(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function Bg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Au={exports:{}},$i={},Ou={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function g0(){if(yp)return ke;yp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function v(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,L={};function P(j,$,J){this.props=j,this.context=$,this.refs=L,this.updater=J||N}P.prototype.isReactComponent={},P.prototype.setState=function(j,$){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,$,"setState")},P.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function S(){}S.prototype=P.prototype;function T(j,$,J){this.props=j,this.context=$,this.refs=L,this.updater=J||N}var C=T.prototype=new S;C.constructor=T,E(C,P.prototype),C.isPureReactComponent=!0;var D=Array.isArray,z=Object.prototype.hasOwnProperty,V={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function x(j,$,J){var ie,ae={},fe=null,Ne=null;if($!=null)for(ie in $.ref!==void 0&&(Ne=$.ref),$.key!==void 0&&(fe=""+$.key),$)z.call($,ie)&&!b.hasOwnProperty(ie)&&(ae[ie]=$[ie]);var le=arguments.length-2;if(le===1)ae.children=J;else if(1<le){for(var me=Array(le),Ie=0;Ie<le;Ie++)me[Ie]=arguments[Ie+2];ae.children=me}if(j&&j.defaultProps)for(ie in le=j.defaultProps,le)ae[ie]===void 0&&(ae[ie]=le[ie]);return{$$typeof:n,type:j,key:fe,ref:Ne,props:ae,_owner:V.current}}function k(j,$){return{$$typeof:n,type:j.type,key:$,ref:j.ref,props:j.props,_owner:j._owner}}function A(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function H(j){var $={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(J){return $[J]})}var q=/\/+/g;function Z(j,$){return typeof j=="object"&&j!==null&&j.key!=null?H(""+j.key):$.toString(36)}function se(j,$,J,ie,ae){var fe=typeof j;(fe==="undefined"||fe==="boolean")&&(j=null);var Ne=!1;if(j===null)Ne=!0;else switch(fe){case"string":case"number":Ne=!0;break;case"object":switch(j.$$typeof){case n:case e:Ne=!0}}if(Ne)return Ne=j,ae=ae(Ne),j=ie===""?"."+Z(Ne,0):ie,D(ae)?(J="",j!=null&&(J=j.replace(q,"$&/")+"/"),se(ae,$,J,"",function(Ie){return Ie})):ae!=null&&(A(ae)&&(ae=k(ae,J+(!ae.key||Ne&&Ne.key===ae.key?"":(""+ae.key).replace(q,"$&/")+"/")+j)),$.push(ae)),1;if(Ne=0,ie=ie===""?".":ie+":",D(j))for(var le=0;le<j.length;le++){fe=j[le];var me=ie+Z(fe,le);Ne+=se(fe,$,J,me,ae)}else if(me=v(j),typeof me=="function")for(j=me.call(j),le=0;!(fe=j.next()).done;)fe=fe.value,me=ie+Z(fe,le++),Ne+=se(fe,$,J,me,ae);else if(fe==="object")throw $=String(j),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ne}function pe(j,$,J){if(j==null)return j;var ie=[],ae=0;return se(j,ie,"","",function(fe){return $.call(J,fe,ae++)}),ie}function ge(j){if(j._status===-1){var $=j._result;$=$(),$.then(function(J){(j._status===0||j._status===-1)&&(j._status=1,j._result=J)},function(J){(j._status===0||j._status===-1)&&(j._status=2,j._result=J)}),j._status===-1&&(j._status=0,j._result=$)}if(j._status===1)return j._result.default;throw j._result}var re={current:null},Q={transition:null},G={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:Q,ReactCurrentOwner:V};function ee(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:pe,forEach:function(j,$,J){pe(j,function(){$.apply(this,arguments)},J)},count:function(j){var $=0;return pe(j,function(){$++}),$},toArray:function(j){return pe(j,function($){return $})||[]},only:function(j){if(!A(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ke.Component=P,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=T,ke.StrictMode=i,ke.Suspense=m,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ke.act=ee,ke.cloneElement=function(j,$,J){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ie=E({},j.props),ae=j.key,fe=j.ref,Ne=j._owner;if($!=null){if($.ref!==void 0&&(fe=$.ref,Ne=V.current),$.key!==void 0&&(ae=""+$.key),j.type&&j.type.defaultProps)var le=j.type.defaultProps;for(me in $)z.call($,me)&&!b.hasOwnProperty(me)&&(ie[me]=$[me]===void 0&&le!==void 0?le[me]:$[me])}var me=arguments.length-2;if(me===1)ie.children=J;else if(1<me){le=Array(me);for(var Ie=0;Ie<me;Ie++)le[Ie]=arguments[Ie+2];ie.children=le}return{$$typeof:n,type:j.type,key:ae,ref:fe,props:ie,_owner:Ne}},ke.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:c,_context:j},j.Consumer=j},ke.createElement=x,ke.createFactory=function(j){var $=x.bind(null,j);return $.type=j,$},ke.createRef=function(){return{current:null}},ke.forwardRef=function(j){return{$$typeof:f,render:j}},ke.isValidElement=A,ke.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:ge}},ke.memo=function(j,$){return{$$typeof:g,type:j,compare:$===void 0?null:$}},ke.startTransition=function(j){var $=Q.transition;Q.transition={};try{j()}finally{Q.transition=$}},ke.unstable_act=ee,ke.useCallback=function(j,$){return re.current.useCallback(j,$)},ke.useContext=function(j){return re.current.useContext(j)},ke.useDebugValue=function(){},ke.useDeferredValue=function(j){return re.current.useDeferredValue(j)},ke.useEffect=function(j,$){return re.current.useEffect(j,$)},ke.useId=function(){return re.current.useId()},ke.useImperativeHandle=function(j,$,J){return re.current.useImperativeHandle(j,$,J)},ke.useInsertionEffect=function(j,$){return re.current.useInsertionEffect(j,$)},ke.useLayoutEffect=function(j,$){return re.current.useLayoutEffect(j,$)},ke.useMemo=function(j,$){return re.current.useMemo(j,$)},ke.useReducer=function(j,$,J){return re.current.useReducer(j,$,J)},ke.useRef=function(j){return re.current.useRef(j)},ke.useState=function(j){return re.current.useState(j)},ke.useSyncExternalStore=function(j,$,J){return re.current.useSyncExternalStore(j,$,J)},ke.useTransition=function(){return re.current.useTransition()},ke.version="18.3.1",ke}var _p;function Id(){return _p||(_p=1,Ou.exports=g0()),Ou.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function v0(){if(xp)return $i;xp=1;var n=Id(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,g){var _,w={},v=null,N=null;g!==void 0&&(v=""+g),m.key!==void 0&&(v=""+m.key),m.ref!==void 0&&(N=m.ref);for(_ in m)i.call(m,_)&&!c.hasOwnProperty(_)&&(w[_]=m[_]);if(f&&f.defaultProps)for(_ in m=f.defaultProps,m)w[_]===void 0&&(w[_]=m[_]);return{$$typeof:e,type:f,key:v,ref:N,props:w,_owner:o.current}}return $i.Fragment=t,$i.jsx=d,$i.jsxs=d,$i}var wp;function y0(){return wp||(wp=1,Au.exports=v0()),Au.exports}var l=y0(),R=Id();const _0=Bg(R);var Va={},Lu={exports:{}},Ut={},Du={exports:{}},Mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function x0(){return Np||(Np=1,function(n){function e(Q,G){var ee=Q.length;Q.push(G);e:for(;0<ee;){var j=ee-1>>>1,$=Q[j];if(0<o($,G))Q[j]=G,Q[ee]=$,ee=j;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var G=Q[0],ee=Q.pop();if(ee!==G){Q[0]=ee;e:for(var j=0,$=Q.length,J=$>>>1;j<J;){var ie=2*(j+1)-1,ae=Q[ie],fe=ie+1,Ne=Q[fe];if(0>o(ae,ee))fe<$&&0>o(Ne,ae)?(Q[j]=Ne,Q[fe]=ee,j=fe):(Q[j]=ae,Q[ie]=ee,j=ie);else if(fe<$&&0>o(Ne,ee))Q[j]=Ne,Q[fe]=ee,j=fe;else break e}}return G}function o(Q,G){var ee=Q.sortIndex-G.sortIndex;return ee!==0?ee:Q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();n.unstable_now=function(){return d.now()-f}}var m=[],g=[],_=1,w=null,v=3,N=!1,E=!1,L=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Q){for(var G=t(g);G!==null;){if(G.callback===null)i(g);else if(G.startTime<=Q)i(g),G.sortIndex=G.expirationTime,e(m,G);else break;G=t(g)}}function D(Q){if(L=!1,C(Q),!E)if(t(m)!==null)E=!0,ge(z);else{var G=t(g);G!==null&&re(D,G.startTime-Q)}}function z(Q,G){E=!1,L&&(L=!1,S(x),x=-1),N=!0;var ee=v;try{for(C(G),w=t(m);w!==null&&(!(w.expirationTime>G)||Q&&!H());){var j=w.callback;if(typeof j=="function"){w.callback=null,v=w.priorityLevel;var $=j(w.expirationTime<=G);G=n.unstable_now(),typeof $=="function"?w.callback=$:w===t(m)&&i(m),C(G)}else i(m);w=t(m)}if(w!==null)var J=!0;else{var ie=t(g);ie!==null&&re(D,ie.startTime-G),J=!1}return J}finally{w=null,v=ee,N=!1}}var V=!1,b=null,x=-1,k=5,A=-1;function H(){return!(n.unstable_now()-A<k)}function q(){if(b!==null){var Q=n.unstable_now();A=Q;var G=!0;try{G=b(!0,Q)}finally{G?Z():(V=!1,b=null)}}else V=!1}var Z;if(typeof T=="function")Z=function(){T(q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,pe=se.port2;se.port1.onmessage=q,Z=function(){pe.postMessage(null)}}else Z=function(){P(q,0)};function ge(Q){b=Q,V||(V=!0,Z())}function re(Q,G){x=P(function(){Q(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){E||N||(E=!0,ge(z))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var ee=v;v=G;try{return Q()}finally{v=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,G){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ee=v;v=Q;try{return G()}finally{v=ee}},n.unstable_scheduleCallback=function(Q,G,ee){var j=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?j+ee:j):ee=j,Q){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,Q={id:_++,callback:G,priorityLevel:Q,startTime:ee,expirationTime:$,sortIndex:-1},ee>j?(Q.sortIndex=ee,e(g,Q),t(m)===null&&Q===t(g)&&(L?(S(x),x=-1):L=!0,re(D,ee-j))):(Q.sortIndex=$,e(m,Q),E||N||(E=!0,ge(z))),Q},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(Q){var G=v;return function(){var ee=v;v=G;try{return Q.apply(this,arguments)}finally{v=ee}}}}(Mu)),Mu}var Sp;function w0(){return Sp||(Sp=1,Du.exports=x0()),Du.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function N0(){if(Ep)return Ut;Ep=1;var n=Id(),e=w0();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function c(r,s){d(r,s),d(r+"Capture",s)}function d(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function v(r){return m.call(w,r)?!0:m.call(_,r)?!1:g.test(r)?w[r]=!0:(_[r]=!0,!1)}function N(r,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function E(r,s,a,u){if(s===null||typeof s>"u"||N(r,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function L(r,s,a,u,h,p,y){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=p,this.removeEmptyString=y}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){P[r]=new L(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];P[s]=new L(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){P[r]=new L(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){P[r]=new L(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){P[r]=new L(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){P[r]=new L(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){P[r]=new L(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){P[r]=new L(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){P[r]=new L(r,5,!1,r.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(S,T);P[s]=new L(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(S,T);P[s]=new L(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(S,T);P[s]=new L(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){P[r]=new L(r,1,!1,r.toLowerCase(),null,!1,!1)}),P.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){P[r]=new L(r,1,!1,r.toLowerCase(),null,!0,!0)});function C(r,s,a,u){var h=P.hasOwnProperty(s)?P[s]:null;(h!==null?h.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(E(s,a,h,u)&&(a=null),u||h===null?v(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):h.mustUseProperty?r[h.propertyName]=a===null?h.type===3?!1:"":a:(s=h.attributeName,u=h.attributeNamespace,a===null?r.removeAttribute(s):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,u?r.setAttributeNS(u,s,a):r.setAttribute(s,a))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),V=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),H=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),Q=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var ee=Object.assign,j;function $(r){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var J=!1;function ie(r,s){if(!r||J)return"";J=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var u=W}Reflect.construct(r,[],s)}else{try{s.call()}catch(W){u=W}r.call(s.prototype)}else{try{throw Error()}catch(W){u=W}r()}}catch(W){if(W&&u&&typeof W.stack=="string"){for(var h=W.stack.split(`
`),p=u.stack.split(`
`),y=h.length-1,I=p.length-1;1<=y&&0<=I&&h[y]!==p[I];)I--;for(;1<=y&&0<=I;y--,I--)if(h[y]!==p[I]){if(y!==1||I!==1)do if(y--,I--,0>I||h[y]!==p[I]){var O=`
`+h[y].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=y&&0<=I);break}}}finally{J=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?$(r):""}function ae(r){switch(r.tag){case 5:return $(r.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return r=ie(r.type,!1),r;case 11:return r=ie(r.type.render,!1),r;case 1:return r=ie(r.type,!0),r;default:return""}}function fe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case V:return"Portal";case k:return"Profiler";case x:return"StrictMode";case Z:return"Suspense";case se:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case H:return(r.displayName||"Context")+".Consumer";case A:return(r._context.displayName||"Context")+".Provider";case q:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case pe:return s=r.displayName||null,s!==null?s:fe(r.type)||"Memo";case ge:s=r._payload,r=r._init;try{return fe(r(s))}catch{}}return null}function Ne(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function le(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function me(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ie(r){var s=me(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(y){u=""+y,p.call(this,y)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Se(r){r._valueTracker||(r._valueTracker=Ie(r))}function ze(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return r&&(u=me(r)?r.checked?"true":"false":r.value),r=u,r!==a?(s.setValue(r),!0):!1}function Ke(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function De(r,s){var a=s.checked;return ee({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Oe(r,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=le(s.value!=null?s.value:a),r._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ee(r,s){s=s.checked,s!=null&&C(r,"checked",s,!1)}function st(r,s){Ee(r,s);var a=le(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Me(r,s.type,a):s.hasOwnProperty("defaultValue")&&Me(r,s.type,le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Re(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Me(r,s,a){(s!=="number"||Ke(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Be=Array.isArray;function Vt(r,s,a,u){if(r=r.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=s.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&u&&(r[a].defaultSelected=!0)}else{for(a=""+le(a),s=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function Pt(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Kn(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Be(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:le(a)}}function at(r,s){var a=le(s.value),u=le(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),u!=null&&(r.defaultValue=""+u)}function Wt(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function tt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?tt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var At,us=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,h){MSApp.execUnsafeLocalFunction(function(){return r(s,a,u,h)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(At=At||document.createElement("div"),At.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=At.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Yn(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kt=["Webkit","ms","Moz","O"];Object.keys(Qt).forEach(function(r){Kt.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Qt[s]=Qt[r]})});function Jn(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Qt.hasOwnProperty(r)&&Qt[r]?(""+s).trim():s+"px"}function oi(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,h=Jn(a,s[a],u);a==="float"&&(a="cssFloat"),u?r.setProperty(a,h):r[a]=h}}var w_=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(r,s){if(s){if(w_[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ql(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gl=null;function Ql(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Kl=null,ds=null,hs=null;function Oh(r){if(r=Ti(r)){if(typeof Kl!="function")throw Error(t(280));var s=r.stateNode;s&&(s=na(s),Kl(r.stateNode,r.type,s))}}function Lh(r){ds?hs?hs.push(r):hs=[r]:ds=r}function Dh(){if(ds){var r=ds,s=hs;if(hs=ds=null,Oh(r),s)for(r=0;r<s.length;r++)Oh(s[r])}}function Mh(r,s){return r(s)}function Fh(){}var Yl=!1;function Uh(r,s,a){if(Yl)return r(s,a);Yl=!0;try{return Mh(r,s,a)}finally{Yl=!1,(ds!==null||hs!==null)&&(Fh(),Dh())}}function ai(r,s){var a=r.stateNode;if(a===null)return null;var u=na(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Jl=!1;if(f)try{var li={};Object.defineProperty(li,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Jl=!1}function N_(r,s,a,u,h,p,y,I,O){var W=Array.prototype.slice.call(arguments,3);try{s.apply(a,W)}catch(Y){this.onError(Y)}}var ci=!1,Oo=null,Lo=!1,Xl=null,S_={onError:function(r){ci=!0,Oo=r}};function E_(r,s,a,u,h,p,y,I,O){ci=!1,Oo=null,N_.apply(S_,arguments)}function k_(r,s,a,u,h,p,y,I,O){if(E_.apply(this,arguments),ci){if(ci){var W=Oo;ci=!1,Oo=null}else throw Error(t(198));Lo||(Lo=!0,Xl=W)}}function Dr(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function zh(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Vh(r){if(Dr(r)!==r)throw Error(t(188))}function b_(r){var s=r.alternate;if(!s){if(s=Dr(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,u=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){a=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Vh(h),r;if(p===u)return Vh(h),s;p=p.sibling}throw Error(t(188))}if(a.return!==u.return)a=h,u=p;else{for(var y=!1,I=h.child;I;){if(I===a){y=!0,a=h,u=p;break}if(I===u){y=!0,u=h,a=p;break}I=I.sibling}if(!y){for(I=p.child;I;){if(I===a){y=!0,a=p,u=h;break}if(I===u){y=!0,u=p,a=h;break}I=I.sibling}if(!y)throw Error(t(189))}}if(a.alternate!==u)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function Wh(r){return r=b_(r),r!==null?$h(r):null}function $h(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=$h(r);if(s!==null)return s;r=r.sibling}return null}var Bh=e.unstable_scheduleCallback,Hh=e.unstable_cancelCallback,C_=e.unstable_shouldYield,T_=e.unstable_requestPaint,nt=e.unstable_now,I_=e.unstable_getCurrentPriorityLevel,Zl=e.unstable_ImmediatePriority,qh=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,R_=e.unstable_LowPriority,Gh=e.unstable_IdlePriority,Mo=null,xn=null;function j_(r){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Mo,r,void 0,(r.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:O_,P_=Math.log,A_=Math.LN2;function O_(r){return r>>>=0,r===0?32:31-(P_(r)/A_|0)|0}var Fo=64,Uo=4194304;function ui(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function zo(r,s){var a=r.pendingLanes;if(a===0)return 0;var u=0,h=r.suspendedLanes,p=r.pingedLanes,y=a&268435455;if(y!==0){var I=y&~h;I!==0?u=ui(I):(p&=y,p!==0&&(u=ui(p)))}else y=a&~h,y!==0?u=ui(y):p!==0&&(u=ui(p));if(u===0)return 0;if(s!==0&&s!==u&&!(s&h)&&(h=u&-u,p=s&-s,h>=p||h===16&&(p&4194240)!==0))return s;if(u&4&&(u|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=u;0<s;)a=31-on(s),h=1<<a,u|=r[a],s&=~h;return u}function L_(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D_(r,s){for(var a=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,p=r.pendingLanes;0<p;){var y=31-on(p),I=1<<y,O=h[y];O===-1?(!(I&a)||I&u)&&(h[y]=L_(I,s)):O<=s&&(r.expiredLanes|=I),p&=~I}}function ec(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Qh(){var r=Fo;return Fo<<=1,!(Fo&4194240)&&(Fo=64),r}function tc(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function di(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-on(s),r[s]=a}function M_(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<a;){var h=31-on(a),p=1<<h;s[h]=0,u[h]=-1,r[h]=-1,a&=~p}}function nc(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var u=31-on(a),h=1<<u;h&s|r[u]&s&&(r[u]|=s),a&=~h}}var Le=0;function Kh(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Yh,rc,Jh,Xh,Zh,sc=!1,Vo=[],Xn=null,Zn=null,er=null,hi=new Map,fi=new Map,tr=[],F_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ef(r,s){switch(r){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(s.pointerId)}}function mi(r,s,a,u,h,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},s!==null&&(s=Ti(s),s!==null&&rc(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function U_(r,s,a,u,h){switch(s){case"focusin":return Xn=mi(Xn,r,s,a,u,h),!0;case"dragenter":return Zn=mi(Zn,r,s,a,u,h),!0;case"mouseover":return er=mi(er,r,s,a,u,h),!0;case"pointerover":var p=h.pointerId;return hi.set(p,mi(hi.get(p)||null,r,s,a,u,h)),!0;case"gotpointercapture":return p=h.pointerId,fi.set(p,mi(fi.get(p)||null,r,s,a,u,h)),!0}return!1}function tf(r){var s=Mr(r.target);if(s!==null){var a=Dr(s);if(a!==null){if(s=a.tag,s===13){if(s=zh(a),s!==null){r.blockedOn=s,Zh(r.priority,function(){Jh(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Wo(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=oc(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Gl=u,a.target.dispatchEvent(u),Gl=null}else return s=Ti(a),s!==null&&rc(s),r.blockedOn=a,!1;s.shift()}return!0}function nf(r,s,a){Wo(r)&&a.delete(s)}function z_(){sc=!1,Xn!==null&&Wo(Xn)&&(Xn=null),Zn!==null&&Wo(Zn)&&(Zn=null),er!==null&&Wo(er)&&(er=null),hi.forEach(nf),fi.forEach(nf)}function pi(r,s){r.blockedOn===s&&(r.blockedOn=null,sc||(sc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,z_)))}function gi(r){function s(h){return pi(h,r)}if(0<Vo.length){pi(Vo[0],r);for(var a=1;a<Vo.length;a++){var u=Vo[a];u.blockedOn===r&&(u.blockedOn=null)}}for(Xn!==null&&pi(Xn,r),Zn!==null&&pi(Zn,r),er!==null&&pi(er,r),hi.forEach(s),fi.forEach(s),a=0;a<tr.length;a++)u=tr[a],u.blockedOn===r&&(u.blockedOn=null);for(;0<tr.length&&(a=tr[0],a.blockedOn===null);)tf(a),a.blockedOn===null&&tr.shift()}var fs=D.ReactCurrentBatchConfig,$o=!0;function V_(r,s,a,u){var h=Le,p=fs.transition;fs.transition=null;try{Le=1,ic(r,s,a,u)}finally{Le=h,fs.transition=p}}function W_(r,s,a,u){var h=Le,p=fs.transition;fs.transition=null;try{Le=4,ic(r,s,a,u)}finally{Le=h,fs.transition=p}}function ic(r,s,a,u){if($o){var h=oc(r,s,a,u);if(h===null)Sc(r,s,u,Bo,a),ef(r,u);else if(U_(h,r,s,a,u))u.stopPropagation();else if(ef(r,u),s&4&&-1<F_.indexOf(r)){for(;h!==null;){var p=Ti(h);if(p!==null&&Yh(p),p=oc(r,s,a,u),p===null&&Sc(r,s,u,Bo,a),p===h)break;h=p}h!==null&&u.stopPropagation()}else Sc(r,s,u,null,a)}}var Bo=null;function oc(r,s,a,u){if(Bo=null,r=Ql(u),r=Mr(r),r!==null)if(s=Dr(r),s===null)r=null;else if(a=s.tag,a===13){if(r=zh(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Bo=r,null}function rf(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I_()){case Zl:return 1;case qh:return 4;case Do:case R_:return 16;case Gh:return 536870912;default:return 16}default:return 16}}var nr=null,ac=null,Ho=null;function sf(){if(Ho)return Ho;var r,s=ac,a=s.length,u,h="value"in nr?nr.value:nr.textContent,p=h.length;for(r=0;r<a&&s[r]===h[r];r++);var y=a-r;for(u=1;u<=y&&s[a-u]===h[p-u];u++);return Ho=h.slice(r,1<u?1-u:void 0)}function qo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Go(){return!0}function of(){return!1}function $t(r){function s(a,u,h,p,y){this._reactName=a,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(a=r[I],this[I]=a?a(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Go:of,this.isPropagationStopped=of,this}return ee(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),s}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=$t(ms),vi=ee({},ms,{view:0,detail:0}),$_=$t(vi),cc,uc,yi,Qo=ee({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==yi&&(yi&&r.type==="mousemove"?(cc=r.screenX-yi.screenX,uc=r.screenY-yi.screenY):uc=cc=0,yi=r),cc)},movementY:function(r){return"movementY"in r?r.movementY:uc}}),af=$t(Qo),B_=ee({},Qo,{dataTransfer:0}),H_=$t(B_),q_=ee({},vi,{relatedTarget:0}),dc=$t(q_),G_=ee({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Q_=$t(G_),K_=ee({},ms,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Y_=$t(K_),J_=ee({},ms,{data:0}),lf=$t(J_),X_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ex={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tx(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ex[r])?!!s[r]:!1}function hc(){return tx}var nx=ee({},vi,{key:function(r){if(r.key){var s=X_[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=qo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Z_[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hc,charCode:function(r){return r.type==="keypress"?qo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),rx=$t(nx),sx=ee({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=$t(sx),ix=ee({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hc}),ox=$t(ix),ax=ee({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),lx=$t(ax),cx=ee({},Qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ux=$t(cx),dx=[9,13,27,32],fc=f&&"CompositionEvent"in window,_i=null;f&&"documentMode"in document&&(_i=document.documentMode);var hx=f&&"TextEvent"in window&&!_i,uf=f&&(!fc||_i&&8<_i&&11>=_i),df=" ",hf=!1;function ff(r,s){switch(r){case"keyup":return dx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ps=!1;function fx(r,s){switch(r){case"compositionend":return mf(s);case"keypress":return s.which!==32?null:(hf=!0,df);case"textInput":return r=s.data,r===df&&hf?null:r;default:return null}}function mx(r,s){if(ps)return r==="compositionend"||!fc&&ff(r,s)?(r=sf(),Ho=ac=nr=null,ps=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return uf&&s.locale!=="ko"?null:s.data;default:return null}}var px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!px[r.type]:s==="textarea"}function gf(r,s,a,u){Lh(u),s=Zo(s,"onChange"),0<s.length&&(a=new lc("onChange","change",null,a,u),r.push({event:a,listeners:s}))}var xi=null,wi=null;function gx(r){Of(r,0)}function Ko(r){var s=xs(r);if(ze(s))return r}function vx(r,s){if(r==="change")return s}var vf=!1;if(f){var mc;if(f){var pc="oninput"in document;if(!pc){var yf=document.createElement("div");yf.setAttribute("oninput","return;"),pc=typeof yf.oninput=="function"}mc=pc}else mc=!1;vf=mc&&(!document.documentMode||9<document.documentMode)}function _f(){xi&&(xi.detachEvent("onpropertychange",xf),wi=xi=null)}function xf(r){if(r.propertyName==="value"&&Ko(wi)){var s=[];gf(s,wi,r,Ql(r)),Uh(gx,s)}}function yx(r,s,a){r==="focusin"?(_f(),xi=s,wi=a,xi.attachEvent("onpropertychange",xf)):r==="focusout"&&_f()}function _x(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ko(wi)}function xx(r,s){if(r==="click")return Ko(s)}function wx(r,s){if(r==="input"||r==="change")return Ko(s)}function Nx(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var an=typeof Object.is=="function"?Object.is:Nx;function Ni(r,s){if(an(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var h=a[u];if(!m.call(s,h)||!an(r[h],s[h]))return!1}return!0}function wf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Nf(r,s){var a=wf(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=s&&u>=s)return{node:a,offset:s-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wf(a)}}function Sf(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Sf(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Ef(){for(var r=window,s=Ke();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Ke(r.document)}return s}function gc(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Sx(r){var s=Ef(),a=r.focusedElem,u=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Sf(a.ownerDocument.documentElement,a)){if(u!==null&&gc(a)){if(s=u.start,r=u.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var h=a.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!r.extend&&p>u&&(h=u,u=p,p=h),h=Nf(a,p);var y=Nf(a,u);h&&y&&(r.rangeCount!==1||r.anchorNode!==h.node||r.anchorOffset!==h.offset||r.focusNode!==y.node||r.focusOffset!==y.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),r.removeAllRanges(),p>u?(r.addRange(s),r.extend(y.node,y.offset)):(s.setEnd(y.node,y.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Ex=f&&"documentMode"in document&&11>=document.documentMode,gs=null,vc=null,Si=null,yc=!1;function kf(r,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yc||gs==null||gs!==Ke(u)||(u=gs,"selectionStart"in u&&gc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Si&&Ni(Si,u)||(Si=u,u=Zo(vc,"onSelect"),0<u.length&&(s=new lc("onSelect","select",null,s,a),r.push({event:s,listeners:u}),s.target=gs)))}function Yo(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var vs={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},_c={},bf={};f&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Jo(r){if(_c[r])return _c[r];if(!vs[r])return r;var s=vs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in bf)return _c[r]=s[a];return r}var Cf=Jo("animationend"),Tf=Jo("animationiteration"),If=Jo("animationstart"),Rf=Jo("transitionend"),jf=new Map,Pf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(r,s){jf.set(r,s),c(s,[r])}for(var xc=0;xc<Pf.length;xc++){var wc=Pf[xc],kx=wc.toLowerCase(),bx=wc[0].toUpperCase()+wc.slice(1);rr(kx,"on"+bx)}rr(Cf,"onAnimationEnd"),rr(Tf,"onAnimationIteration"),rr(If,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(Rf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ei));function Af(r,s,a){var u=r.type||"unknown-event";r.currentTarget=a,k_(u,s,void 0,r),r.currentTarget=null}function Of(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],h=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var y=u.length-1;0<=y;y--){var I=u[y],O=I.instance,W=I.currentTarget;if(I=I.listener,O!==p&&h.isPropagationStopped())break e;Af(h,I,W),p=O}else for(y=0;y<u.length;y++){if(I=u[y],O=I.instance,W=I.currentTarget,I=I.listener,O!==p&&h.isPropagationStopped())break e;Af(h,I,W),p=O}}}if(Lo)throw r=Xl,Lo=!1,Xl=null,r}function He(r,s){var a=s[Ic];a===void 0&&(a=s[Ic]=new Set);var u=r+"__bubble";a.has(u)||(Lf(s,r,2,!1),a.add(u))}function Nc(r,s,a){var u=0;s&&(u|=4),Lf(a,r,u,s)}var Xo="_reactListening"+Math.random().toString(36).slice(2);function ki(r){if(!r[Xo]){r[Xo]=!0,i.forEach(function(a){a!=="selectionchange"&&(Cx.has(a)||Nc(a,!1,r),Nc(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Xo]||(s[Xo]=!0,Nc("selectionchange",!1,s))}}function Lf(r,s,a,u){switch(rf(s)){case 1:var h=V_;break;case 4:h=W_;break;default:h=ic}a=h.bind(null,s,a,r),h=void 0,!Jl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(s,a,{capture:!0,passive:h}):r.addEventListener(s,a,!0):h!==void 0?r.addEventListener(s,a,{passive:h}):r.addEventListener(s,a,!1)}function Sc(r,s,a,u,h){var p=u;if(!(s&1)&&!(s&2)&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var I=u.stateNode.containerInfo;if(I===h||I.nodeType===8&&I.parentNode===h)break;if(y===4)for(y=u.return;y!==null;){var O=y.tag;if((O===3||O===4)&&(O=y.stateNode.containerInfo,O===h||O.nodeType===8&&O.parentNode===h))return;y=y.return}for(;I!==null;){if(y=Mr(I),y===null)return;if(O=y.tag,O===5||O===6){u=p=y;continue e}I=I.parentNode}}u=u.return}Uh(function(){var W=p,Y=Ql(a),X=[];e:{var K=jf.get(r);if(K!==void 0){var oe=lc,ue=r;switch(r){case"keypress":if(qo(a)===0)break e;case"keydown":case"keyup":oe=rx;break;case"focusin":ue="focus",oe=dc;break;case"focusout":ue="blur",oe=dc;break;case"beforeblur":case"afterblur":oe=dc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=H_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=ox;break;case Cf:case Tf:case If:oe=Q_;break;case Rf:oe=lx;break;case"scroll":oe=$_;break;case"wheel":oe=ux;break;case"copy":case"cut":case"paste":oe=Y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=cf}var de=(s&4)!==0,rt=!de&&r==="scroll",F=de?K!==null?K+"Capture":null:K;de=[];for(var M=W,U;M!==null;){U=M;var te=U.stateNode;if(U.tag===5&&te!==null&&(U=te,F!==null&&(te=ai(M,F),te!=null&&de.push(bi(M,te,U)))),rt)break;M=M.return}0<de.length&&(K=new oe(K,ue,null,a,Y),X.push({event:K,listeners:de}))}}if(!(s&7)){e:{if(K=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",K&&a!==Gl&&(ue=a.relatedTarget||a.fromElement)&&(Mr(ue)||ue[jn]))break e;if((oe||K)&&(K=Y.window===Y?Y:(K=Y.ownerDocument)?K.defaultView||K.parentWindow:window,oe?(ue=a.relatedTarget||a.toElement,oe=W,ue=ue?Mr(ue):null,ue!==null&&(rt=Dr(ue),ue!==rt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(oe=null,ue=W),oe!==ue)){if(de=af,te="onMouseLeave",F="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(de=cf,te="onPointerLeave",F="onPointerEnter",M="pointer"),rt=oe==null?K:xs(oe),U=ue==null?K:xs(ue),K=new de(te,M+"leave",oe,a,Y),K.target=rt,K.relatedTarget=U,te=null,Mr(Y)===W&&(de=new de(F,M+"enter",ue,a,Y),de.target=U,de.relatedTarget=rt,te=de),rt=te,oe&&ue)t:{for(de=oe,F=ue,M=0,U=de;U;U=ys(U))M++;for(U=0,te=F;te;te=ys(te))U++;for(;0<M-U;)de=ys(de),M--;for(;0<U-M;)F=ys(F),U--;for(;M--;){if(de===F||F!==null&&de===F.alternate)break t;de=ys(de),F=ys(F)}de=null}else de=null;oe!==null&&Df(X,K,oe,de,!1),ue!==null&&rt!==null&&Df(X,rt,ue,de,!0)}}e:{if(K=W?xs(W):window,oe=K.nodeName&&K.nodeName.toLowerCase(),oe==="select"||oe==="input"&&K.type==="file")var he=vx;else if(pf(K))if(vf)he=wx;else{he=_x;var ve=yx}else(oe=K.nodeName)&&oe.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(he=xx);if(he&&(he=he(r,W))){gf(X,he,a,Y);break e}ve&&ve(r,K,W),r==="focusout"&&(ve=K._wrapperState)&&ve.controlled&&K.type==="number"&&Me(K,"number",K.value)}switch(ve=W?xs(W):window,r){case"focusin":(pf(ve)||ve.contentEditable==="true")&&(gs=ve,vc=W,Si=null);break;case"focusout":Si=vc=gs=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,kf(X,a,Y);break;case"selectionchange":if(Ex)break;case"keydown":case"keyup":kf(X,a,Y)}var ye;if(fc)e:{switch(r){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ps?ff(r,a)&&(we="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(uf&&a.locale!=="ko"&&(ps||we!=="onCompositionStart"?we==="onCompositionEnd"&&ps&&(ye=sf()):(nr=Y,ac="value"in nr?nr.value:nr.textContent,ps=!0)),ve=Zo(W,we),0<ve.length&&(we=new lf(we,r,null,a,Y),X.push({event:we,listeners:ve}),ye?we.data=ye:(ye=mf(a),ye!==null&&(we.data=ye)))),(ye=hx?fx(r,a):mx(r,a))&&(W=Zo(W,"onBeforeInput"),0<W.length&&(Y=new lf("onBeforeInput","beforeinput",null,a,Y),X.push({event:Y,listeners:W}),Y.data=ye))}Of(X,s)})}function bi(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Zo(r,s){for(var a=s+"Capture",u=[];r!==null;){var h=r,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ai(r,a),p!=null&&u.unshift(bi(r,p,h)),p=ai(r,s),p!=null&&u.push(bi(r,p,h))),r=r.return}return u}function ys(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Df(r,s,a,u,h){for(var p=s._reactName,y=[];a!==null&&a!==u;){var I=a,O=I.alternate,W=I.stateNode;if(O!==null&&O===u)break;I.tag===5&&W!==null&&(I=W,h?(O=ai(a,p),O!=null&&y.unshift(bi(a,O,I))):h||(O=ai(a,p),O!=null&&y.push(bi(a,O,I)))),a=a.return}y.length!==0&&r.push({event:s,listeners:y})}var Tx=/\r\n?/g,Ix=/\u0000|\uFFFD/g;function Mf(r){return(typeof r=="string"?r:""+r).replace(Tx,`
`).replace(Ix,"")}function ea(r,s,a){if(s=Mf(s),Mf(r)!==s&&a)throw Error(t(425))}function ta(){}var Ec=null,kc=null;function bc(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Cc=typeof setTimeout=="function"?setTimeout:void 0,Rx=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(r){return Ff.resolve(null).then(r).catch(Px)}:Cc;function Px(r){setTimeout(function(){throw r})}function Tc(r,s){var a=s,u=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(u===0){r.removeChild(h),gi(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=h}while(a);gi(s)}function sr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Uf(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var _s=Math.random().toString(36).slice(2),wn="__reactFiber$"+_s,Ci="__reactProps$"+_s,jn="__reactContainer$"+_s,Ic="__reactEvents$"+_s,Ax="__reactListeners$"+_s,Ox="__reactHandles$"+_s;function Mr(r){var s=r[wn];if(s)return s;for(var a=r.parentNode;a;){if(s=a[jn]||a[wn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Uf(r);r!==null;){if(a=r[wn])return a;r=Uf(r)}return s}r=a,a=r.parentNode}return null}function Ti(r){return r=r[wn]||r[jn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function xs(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function na(r){return r[Ci]||null}var Rc=[],ws=-1;function ir(r){return{current:r}}function qe(r){0>ws||(r.current=Rc[ws],Rc[ws]=null,ws--)}function Ve(r,s){ws++,Rc[ws]=r.current,r.current=s}var or={},Nt=ir(or),Ot=ir(!1),Fr=or;function Ns(r,s){var a=r.type.contextTypes;if(!a)return or;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=s[p];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=h),h}function Lt(r){return r=r.childContextTypes,r!=null}function ra(){qe(Ot),qe(Nt)}function zf(r,s,a){if(Nt.current!==or)throw Error(t(168));Ve(Nt,s),Ve(Ot,a)}function Vf(r,s,a){var u=r.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var h in u)if(!(h in s))throw Error(t(108,Ne(r)||"Unknown",h));return ee({},a,u)}function sa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||or,Fr=Nt.current,Ve(Nt,r),Ve(Ot,Ot.current),!0}function Wf(r,s,a){var u=r.stateNode;if(!u)throw Error(t(169));a?(r=Vf(r,s,Fr),u.__reactInternalMemoizedMergedChildContext=r,qe(Ot),qe(Nt),Ve(Nt,r)):qe(Ot),Ve(Ot,a)}var Pn=null,ia=!1,jc=!1;function $f(r){Pn===null?Pn=[r]:Pn.push(r)}function Lx(r){ia=!0,$f(r)}function ar(){if(!jc&&Pn!==null){jc=!0;var r=0,s=Le;try{var a=Pn;for(Le=1;r<a.length;r++){var u=a[r];do u=u(!0);while(u!==null)}Pn=null,ia=!1}catch(h){throw Pn!==null&&(Pn=Pn.slice(r+1)),Bh(Zl,ar),h}finally{Le=s,jc=!1}}return null}var Ss=[],Es=0,oa=null,aa=0,Yt=[],Jt=0,Ur=null,An=1,On="";function zr(r,s){Ss[Es++]=aa,Ss[Es++]=oa,oa=r,aa=s}function Bf(r,s,a){Yt[Jt++]=An,Yt[Jt++]=On,Yt[Jt++]=Ur,Ur=r;var u=An;r=On;var h=32-on(u)-1;u&=~(1<<h),a+=1;var p=32-on(s)+h;if(30<p){var y=h-h%5;p=(u&(1<<y)-1).toString(32),u>>=y,h-=y,An=1<<32-on(s)+h|a<<h|u,On=p+r}else An=1<<p|a<<h|u,On=r}function Pc(r){r.return!==null&&(zr(r,1),Bf(r,1,0))}function Ac(r){for(;r===oa;)oa=Ss[--Es],Ss[Es]=null,aa=Ss[--Es],Ss[Es]=null;for(;r===Ur;)Ur=Yt[--Jt],Yt[Jt]=null,On=Yt[--Jt],Yt[Jt]=null,An=Yt[--Jt],Yt[Jt]=null}var Bt=null,Ht=null,Ge=!1,ln=null;function Hf(r,s){var a=tn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function qf(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Bt=r,Ht=sr(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Bt=r,Ht=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ur!==null?{id:An,overflow:On}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=tn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Bt=r,Ht=null,!0):!1;default:return!1}}function Oc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Lc(r){if(Ge){var s=Ht;if(s){var a=s;if(!qf(r,s)){if(Oc(r))throw Error(t(418));s=sr(a.nextSibling);var u=Bt;s&&qf(r,s)?Hf(u,a):(r.flags=r.flags&-4097|2,Ge=!1,Bt=r)}}else{if(Oc(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ge=!1,Bt=r}}}function Gf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Bt=r}function la(r){if(r!==Bt)return!1;if(!Ge)return Gf(r),Ge=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!bc(r.type,r.memoizedProps)),s&&(s=Ht)){if(Oc(r))throw Qf(),Error(t(418));for(;s;)Hf(r,s),s=sr(s.nextSibling)}if(Gf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Ht=sr(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Ht=null}}else Ht=Bt?sr(r.stateNode.nextSibling):null;return!0}function Qf(){for(var r=Ht;r;)r=sr(r.nextSibling)}function ks(){Ht=Bt=null,Ge=!1}function Dc(r){ln===null?ln=[r]:ln.push(r)}var Dx=D.ReactCurrentBatchConfig;function Ii(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var u=a.stateNode}if(!u)throw Error(t(147,r));var h=u,p=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(y){var I=h.refs;y===null?delete I[p]:I[p]=y},s._stringRef=p,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function ca(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Kf(r){var s=r._init;return s(r._payload)}function Yf(r){function s(F,M){if(r){var U=F.deletions;U===null?(F.deletions=[M],F.flags|=16):U.push(M)}}function a(F,M){if(!r)return null;for(;M!==null;)s(F,M),M=M.sibling;return null}function u(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function h(F,M){return F=pr(F,M),F.index=0,F.sibling=null,F}function p(F,M,U){return F.index=U,r?(U=F.alternate,U!==null?(U=U.index,U<M?(F.flags|=2,M):U):(F.flags|=2,M)):(F.flags|=1048576,M)}function y(F){return r&&F.alternate===null&&(F.flags|=2),F}function I(F,M,U,te){return M===null||M.tag!==6?(M=Cu(U,F.mode,te),M.return=F,M):(M=h(M,U),M.return=F,M)}function O(F,M,U,te){var he=U.type;return he===b?Y(F,M,U.props.children,te,U.key):M!==null&&(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ge&&Kf(he)===M.type)?(te=h(M,U.props),te.ref=Ii(F,M,U),te.return=F,te):(te=Aa(U.type,U.key,U.props,null,F.mode,te),te.ref=Ii(F,M,U),te.return=F,te)}function W(F,M,U,te){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Tu(U,F.mode,te),M.return=F,M):(M=h(M,U.children||[]),M.return=F,M)}function Y(F,M,U,te,he){return M===null||M.tag!==7?(M=Qr(U,F.mode,te,he),M.return=F,M):(M=h(M,U),M.return=F,M)}function X(F,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Cu(""+M,F.mode,U),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return U=Aa(M.type,M.key,M.props,null,F.mode,U),U.ref=Ii(F,null,M),U.return=F,U;case V:return M=Tu(M,F.mode,U),M.return=F,M;case ge:var te=M._init;return X(F,te(M._payload),U)}if(Be(M)||G(M))return M=Qr(M,F.mode,U,null),M.return=F,M;ca(F,M)}return null}function K(F,M,U,te){var he=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return he!==null?null:I(F,M,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return U.key===he?O(F,M,U,te):null;case V:return U.key===he?W(F,M,U,te):null;case ge:return he=U._init,K(F,M,he(U._payload),te)}if(Be(U)||G(U))return he!==null?null:Y(F,M,U,te,null);ca(F,U)}return null}function oe(F,M,U,te,he){if(typeof te=="string"&&te!==""||typeof te=="number")return F=F.get(U)||null,I(M,F,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case z:return F=F.get(te.key===null?U:te.key)||null,O(M,F,te,he);case V:return F=F.get(te.key===null?U:te.key)||null,W(M,F,te,he);case ge:var ve=te._init;return oe(F,M,U,ve(te._payload),he)}if(Be(te)||G(te))return F=F.get(U)||null,Y(M,F,te,he,null);ca(M,te)}return null}function ue(F,M,U,te){for(var he=null,ve=null,ye=M,we=M=0,pt=null;ye!==null&&we<U.length;we++){ye.index>we?(pt=ye,ye=null):pt=ye.sibling;var Pe=K(F,ye,U[we],te);if(Pe===null){ye===null&&(ye=pt);break}r&&ye&&Pe.alternate===null&&s(F,ye),M=p(Pe,M,we),ve===null?he=Pe:ve.sibling=Pe,ve=Pe,ye=pt}if(we===U.length)return a(F,ye),Ge&&zr(F,we),he;if(ye===null){for(;we<U.length;we++)ye=X(F,U[we],te),ye!==null&&(M=p(ye,M,we),ve===null?he=ye:ve.sibling=ye,ve=ye);return Ge&&zr(F,we),he}for(ye=u(F,ye);we<U.length;we++)pt=oe(ye,F,we,U[we],te),pt!==null&&(r&&pt.alternate!==null&&ye.delete(pt.key===null?we:pt.key),M=p(pt,M,we),ve===null?he=pt:ve.sibling=pt,ve=pt);return r&&ye.forEach(function(gr){return s(F,gr)}),Ge&&zr(F,we),he}function de(F,M,U,te){var he=G(U);if(typeof he!="function")throw Error(t(150));if(U=he.call(U),U==null)throw Error(t(151));for(var ve=he=null,ye=M,we=M=0,pt=null,Pe=U.next();ye!==null&&!Pe.done;we++,Pe=U.next()){ye.index>we?(pt=ye,ye=null):pt=ye.sibling;var gr=K(F,ye,Pe.value,te);if(gr===null){ye===null&&(ye=pt);break}r&&ye&&gr.alternate===null&&s(F,ye),M=p(gr,M,we),ve===null?he=gr:ve.sibling=gr,ve=gr,ye=pt}if(Pe.done)return a(F,ye),Ge&&zr(F,we),he;if(ye===null){for(;!Pe.done;we++,Pe=U.next())Pe=X(F,Pe.value,te),Pe!==null&&(M=p(Pe,M,we),ve===null?he=Pe:ve.sibling=Pe,ve=Pe);return Ge&&zr(F,we),he}for(ye=u(F,ye);!Pe.done;we++,Pe=U.next())Pe=oe(ye,F,we,Pe.value,te),Pe!==null&&(r&&Pe.alternate!==null&&ye.delete(Pe.key===null?we:Pe.key),M=p(Pe,M,we),ve===null?he=Pe:ve.sibling=Pe,ve=Pe);return r&&ye.forEach(function(p0){return s(F,p0)}),Ge&&zr(F,we),he}function rt(F,M,U,te){if(typeof U=="object"&&U!==null&&U.type===b&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case z:e:{for(var he=U.key,ve=M;ve!==null;){if(ve.key===he){if(he=U.type,he===b){if(ve.tag===7){a(F,ve.sibling),M=h(ve,U.props.children),M.return=F,F=M;break e}}else if(ve.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ge&&Kf(he)===ve.type){a(F,ve.sibling),M=h(ve,U.props),M.ref=Ii(F,ve,U),M.return=F,F=M;break e}a(F,ve);break}else s(F,ve);ve=ve.sibling}U.type===b?(M=Qr(U.props.children,F.mode,te,U.key),M.return=F,F=M):(te=Aa(U.type,U.key,U.props,null,F.mode,te),te.ref=Ii(F,M,U),te.return=F,F=te)}return y(F);case V:e:{for(ve=U.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(F,M.sibling),M=h(M,U.children||[]),M.return=F,F=M;break e}else{a(F,M);break}else s(F,M);M=M.sibling}M=Tu(U,F.mode,te),M.return=F,F=M}return y(F);case ge:return ve=U._init,rt(F,M,ve(U._payload),te)}if(Be(U))return ue(F,M,U,te);if(G(U))return de(F,M,U,te);ca(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,M!==null&&M.tag===6?(a(F,M.sibling),M=h(M,U),M.return=F,F=M):(a(F,M),M=Cu(U,F.mode,te),M.return=F,F=M),y(F)):a(F,M)}return rt}var bs=Yf(!0),Jf=Yf(!1),ua=ir(null),da=null,Cs=null,Mc=null;function Fc(){Mc=Cs=da=null}function Uc(r){var s=ua.current;qe(ua),r._currentValue=s}function zc(r,s,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===a)break;r=r.return}}function Ts(r,s){da=r,Mc=Cs=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(Dt=!0),r.firstContext=null)}function Xt(r){var s=r._currentValue;if(Mc!==r)if(r={context:r,memoizedValue:s,next:null},Cs===null){if(da===null)throw Error(t(308));Cs=r,da.dependencies={lanes:0,firstContext:r}}else Cs=Cs.next=r;return s}var Vr=null;function Vc(r){Vr===null?Vr=[r]:Vr.push(r)}function Xf(r,s,a,u){var h=s.interleaved;return h===null?(a.next=a,Vc(s)):(a.next=h.next,h.next=a),s.interleaved=a,Ln(r,u)}function Ln(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var lr=!1;function Wc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Dn(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function cr(r,s,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,je&2){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,Ln(r,a)}return h=u.interleaved,h===null?(s.next=s,Vc(u)):(s.next=h.next,h.next=s),u.interleaved=s,Ln(r,a)}function ha(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=r.pendingLanes,a|=u,s.lanes=a,nc(r,a)}}function em(r,s){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var y={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=y:p=p.next=y,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function fa(r,s,a,u){var h=r.updateQueue;lr=!1;var p=h.firstBaseUpdate,y=h.lastBaseUpdate,I=h.shared.pending;if(I!==null){h.shared.pending=null;var O=I,W=O.next;O.next=null,y===null?p=W:y.next=W,y=O;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,I=Y.lastBaseUpdate,I!==y&&(I===null?Y.firstBaseUpdate=W:I.next=W,Y.lastBaseUpdate=O))}if(p!==null){var X=h.baseState;y=0,Y=W=O=null,I=p;do{var K=I.lane,oe=I.eventTime;if((u&K)===K){Y!==null&&(Y=Y.next={eventTime:oe,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ue=r,de=I;switch(K=s,oe=a,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){X=ue.call(oe,X,K);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,K=typeof ue=="function"?ue.call(oe,X,K):ue,K==null)break e;X=ee({},X,K);break e;case 2:lr=!0}}I.callback!==null&&I.lane!==0&&(r.flags|=64,K=h.effects,K===null?h.effects=[I]:K.push(I))}else oe={eventTime:oe,lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Y===null?(W=Y=oe,O=X):Y=Y.next=oe,y|=K;if(I=I.next,I===null){if(I=h.shared.pending,I===null)break;K=I,I=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);if(Y===null&&(O=X),h.baseState=O,h.firstBaseUpdate=W,h.lastBaseUpdate=Y,s=h.shared.interleaved,s!==null){h=s;do y|=h.lane,h=h.next;while(h!==s)}else p===null&&(h.shared.lanes=0);Br|=y,r.lanes=y,r.memoizedState=X}}function tm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var u=r[s],h=u.callback;if(h!==null){if(u.callback=null,u=a,typeof h!="function")throw Error(t(191,h));h.call(u)}}}var Ri={},Nn=ir(Ri),ji=ir(Ri),Pi=ir(Ri);function Wr(r){if(r===Ri)throw Error(t(174));return r}function $c(r,s){switch(Ve(Pi,s),Ve(ji,r),Ve(Nn,Ri),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ht(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=ht(s,r)}qe(Nn),Ve(Nn,s)}function Is(){qe(Nn),qe(ji),qe(Pi)}function nm(r){Wr(Pi.current);var s=Wr(Nn.current),a=ht(s,r.type);s!==a&&(Ve(ji,r),Ve(Nn,a))}function Bc(r){ji.current===r&&(qe(Nn),qe(ji))}var Ye=ir(0);function ma(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Hc=[];function qc(){for(var r=0;r<Hc.length;r++)Hc[r]._workInProgressVersionPrimary=null;Hc.length=0}var pa=D.ReactCurrentDispatcher,Gc=D.ReactCurrentBatchConfig,$r=0,Je=null,lt=null,ft=null,ga=!1,Ai=!1,Oi=0,Mx=0;function St(){throw Error(t(321))}function Qc(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!an(r[a],s[a]))return!1;return!0}function Kc(r,s,a,u,h,p){if($r=p,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pa.current=r===null||r.memoizedState===null?Vx:Wx,r=a(u,h),Ai){p=0;do{if(Ai=!1,Oi=0,25<=p)throw Error(t(301));p+=1,ft=lt=null,s.updateQueue=null,pa.current=$x,r=a(u,h)}while(Ai)}if(pa.current=_a,s=lt!==null&&lt.next!==null,$r=0,ft=lt=Je=null,ga=!1,s)throw Error(t(300));return r}function Yc(){var r=Oi!==0;return Oi=0,r}function Sn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Je.memoizedState=ft=r:ft=ft.next=r,ft}function Zt(){if(lt===null){var r=Je.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var s=ft===null?Je.memoizedState:ft.next;if(s!==null)ft=s,lt=r;else{if(r===null)throw Error(t(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ft===null?Je.memoizedState=ft=r:ft=ft.next=r}return ft}function Li(r,s){return typeof s=="function"?s(r):s}function Jc(r){var s=Zt(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var u=lt,h=u.baseQueue,p=a.pending;if(p!==null){if(h!==null){var y=h.next;h.next=p.next,p.next=y}u.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,u=u.baseState;var I=y=null,O=null,W=p;do{var Y=W.lane;if(($r&Y)===Y)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),u=W.hasEagerState?W.eagerState:r(u,W.action);else{var X={lane:Y,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(I=O=X,y=u):O=O.next=X,Je.lanes|=Y,Br|=Y}W=W.next}while(W!==null&&W!==p);O===null?y=u:O.next=I,an(u,s.memoizedState)||(Dt=!0),s.memoizedState=u,s.baseState=y,s.baseQueue=O,a.lastRenderedState=u}if(r=a.interleaved,r!==null){h=r;do p=h.lane,Je.lanes|=p,Br|=p,h=h.next;while(h!==r)}else h===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Xc(r){var s=Zt(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var u=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do p=r(p,y.action),y=y.next;while(y!==h);an(p,s.memoizedState)||(Dt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,u]}function rm(){}function sm(r,s){var a=Je,u=Zt(),h=s(),p=!an(u.memoizedState,h);if(p&&(u.memoizedState=h,Dt=!0),u=u.queue,Zc(am.bind(null,a,u,r),[r]),u.getSnapshot!==s||p||ft!==null&&ft.memoizedState.tag&1){if(a.flags|=2048,Di(9,om.bind(null,a,u,h,s),void 0,null),mt===null)throw Error(t(349));$r&30||im(a,s,h)}return h}function im(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function om(r,s,a,u){s.value=a,s.getSnapshot=u,lm(s)&&cm(r)}function am(r,s,a){return a(function(){lm(s)&&cm(r)})}function lm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!an(r,a)}catch{return!0}}function cm(r){var s=Ln(r,1);s!==null&&hn(s,r,1,-1)}function um(r){var s=Sn();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:r},s.queue=r,r=r.dispatch=zx.bind(null,Je,r),[s.memoizedState,r]}function Di(r,s,a,u){return r={tag:r,create:s,destroy:a,deps:u,next:null},s=Je.updateQueue,s===null?(s={lastEffect:null,stores:null},Je.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,s.lastEffect=r)),r}function dm(){return Zt().memoizedState}function va(r,s,a,u){var h=Sn();Je.flags|=r,h.memoizedState=Di(1|s,a,void 0,u===void 0?null:u)}function ya(r,s,a,u){var h=Zt();u=u===void 0?null:u;var p=void 0;if(lt!==null){var y=lt.memoizedState;if(p=y.destroy,u!==null&&Qc(u,y.deps)){h.memoizedState=Di(s,a,p,u);return}}Je.flags|=r,h.memoizedState=Di(1|s,a,p,u)}function hm(r,s){return va(8390656,8,r,s)}function Zc(r,s){return ya(2048,8,r,s)}function fm(r,s){return ya(4,2,r,s)}function mm(r,s){return ya(4,4,r,s)}function pm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function gm(r,s,a){return a=a!=null?a.concat([r]):null,ya(4,4,pm.bind(null,s,r),a)}function eu(){}function vm(r,s){var a=Zt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Qc(s,u[1])?u[0]:(a.memoizedState=[r,s],r)}function ym(r,s){var a=Zt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Qc(s,u[1])?u[0]:(r=r(),a.memoizedState=[r,s],r)}function _m(r,s,a){return $r&21?(an(a,s)||(a=Qh(),Je.lanes|=a,Br|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,Dt=!0),r.memoizedState=a)}function Fx(r,s){var a=Le;Le=a!==0&&4>a?a:4,r(!0);var u=Gc.transition;Gc.transition={};try{r(!1),s()}finally{Le=a,Gc.transition=u}}function xm(){return Zt().memoizedState}function Ux(r,s,a){var u=fr(r);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},wm(r))Nm(s,a);else if(a=Xf(r,s,a,u),a!==null){var h=Tt();hn(a,r,u,h),Sm(a,s,u)}}function zx(r,s,a){var u=fr(r),h={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(wm(r))Nm(s,h);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var y=s.lastRenderedState,I=p(y,a);if(h.hasEagerState=!0,h.eagerState=I,an(I,y)){var O=s.interleaved;O===null?(h.next=h,Vc(s)):(h.next=O.next,O.next=h),s.interleaved=h;return}}catch{}finally{}a=Xf(r,s,h,u),a!==null&&(h=Tt(),hn(a,r,u,h),Sm(a,s,u))}}function wm(r){var s=r.alternate;return r===Je||s!==null&&s===Je}function Nm(r,s){Ai=ga=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Sm(r,s,a){if(a&4194240){var u=s.lanes;u&=r.pendingLanes,a|=u,s.lanes=a,nc(r,a)}}var _a={readContext:Xt,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Vx={readContext:Xt,useCallback:function(r,s){return Sn().memoizedState=[r,s===void 0?null:s],r},useContext:Xt,useEffect:hm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,va(4194308,4,pm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return va(4194308,4,r,s)},useInsertionEffect:function(r,s){return va(4,2,r,s)},useMemo:function(r,s){var a=Sn();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var u=Sn();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},u.queue=r,r=r.dispatch=Ux.bind(null,Je,r),[u.memoizedState,r]},useRef:function(r){var s=Sn();return r={current:r},s.memoizedState=r},useState:um,useDebugValue:eu,useDeferredValue:function(r){return Sn().memoizedState=r},useTransition:function(){var r=um(!1),s=r[0];return r=Fx.bind(null,r[1]),Sn().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var u=Je,h=Sn();if(Ge){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),mt===null)throw Error(t(349));$r&30||im(u,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,hm(am.bind(null,u,p,r),[r]),u.flags|=2048,Di(9,om.bind(null,u,p,a,s),void 0,null),a},useId:function(){var r=Sn(),s=mt.identifierPrefix;if(Ge){var a=On,u=An;a=(u&~(1<<32-on(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=Oi++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Mx++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Wx={readContext:Xt,useCallback:vm,useContext:Xt,useEffect:Zc,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:mm,useMemo:ym,useReducer:Jc,useRef:dm,useState:function(){return Jc(Li)},useDebugValue:eu,useDeferredValue:function(r){var s=Zt();return _m(s,lt.memoizedState,r)},useTransition:function(){var r=Jc(Li)[0],s=Zt().memoizedState;return[r,s]},useMutableSource:rm,useSyncExternalStore:sm,useId:xm,unstable_isNewReconciler:!1},$x={readContext:Xt,useCallback:vm,useContext:Xt,useEffect:Zc,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:mm,useMemo:ym,useReducer:Xc,useRef:dm,useState:function(){return Xc(Li)},useDebugValue:eu,useDeferredValue:function(r){var s=Zt();return lt===null?s.memoizedState=r:_m(s,lt.memoizedState,r)},useTransition:function(){var r=Xc(Li)[0],s=Zt().memoizedState;return[r,s]},useMutableSource:rm,useSyncExternalStore:sm,useId:xm,unstable_isNewReconciler:!1};function cn(r,s){if(r&&r.defaultProps){s=ee({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function tu(r,s,a,u){s=r.memoizedState,a=a(u,s),a=a==null?s:ee({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var xa={isMounted:function(r){return(r=r._reactInternals)?Dr(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var u=Tt(),h=fr(r),p=Dn(u,h);p.payload=s,a!=null&&(p.callback=a),s=cr(r,p,h),s!==null&&(hn(s,r,h,u),ha(s,r,h))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var u=Tt(),h=fr(r),p=Dn(u,h);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=cr(r,p,h),s!==null&&(hn(s,r,h,u),ha(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Tt(),u=fr(r),h=Dn(a,u);h.tag=2,s!=null&&(h.callback=s),s=cr(r,h,u),s!==null&&(hn(s,r,u,a),ha(s,r,u))}};function Em(r,s,a,u,h,p,y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,y):s.prototype&&s.prototype.isPureReactComponent?!Ni(a,u)||!Ni(h,p):!0}function km(r,s,a){var u=!1,h=or,p=s.contextType;return typeof p=="object"&&p!==null?p=Xt(p):(h=Lt(s)?Fr:Nt.current,u=s.contextTypes,p=(u=u!=null)?Ns(r,h):or),s=new s(a,p),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=xa,r.stateNode=s,s._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=h,r.__reactInternalMemoizedMaskedChildContext=p),s}function bm(r,s,a,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==r&&xa.enqueueReplaceState(s,s.state,null)}function nu(r,s,a,u){var h=r.stateNode;h.props=a,h.state=r.memoizedState,h.refs={},Wc(r);var p=s.contextType;typeof p=="object"&&p!==null?h.context=Xt(p):(p=Lt(s)?Fr:Nt.current,h.context=Ns(r,p)),h.state=r.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(tu(r,s,p,a),h.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&xa.enqueueReplaceState(h,h.state,null),fa(r,a,h,u),h.state=r.memoizedState),typeof h.componentDidMount=="function"&&(r.flags|=4194308)}function Rs(r,s){try{var a="",u=s;do a+=ae(u),u=u.return;while(u);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:s,stack:h,digest:null}}function ru(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function su(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Bx=typeof WeakMap=="function"?WeakMap:Map;function Cm(r,s,a){a=Dn(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){Ca||(Ca=!0,_u=u),su(r,s)},a}function Tm(r,s,a){a=Dn(-1,a),a.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var h=s.value;a.payload=function(){return u(h)},a.callback=function(){su(r,s)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){su(r,s),typeof u!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var y=s.stack;this.componentDidCatch(s.value,{componentStack:y!==null?y:""})}),a}function Im(r,s,a){var u=r.pingCache;if(u===null){u=r.pingCache=new Bx;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(a)||(h.add(a),r=s0.bind(null,r,s,a),s.then(r,r))}function Rm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function jm(r,s,a,u,h){return r.mode&1?(r.flags|=65536,r.lanes=h,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Dn(-1,1),s.tag=2,cr(a,s,1))),a.lanes|=1),r)}var Hx=D.ReactCurrentOwner,Dt=!1;function Ct(r,s,a,u){s.child=r===null?Jf(s,null,a,u):bs(s,r.child,a,u)}function Pm(r,s,a,u,h){a=a.render;var p=s.ref;return Ts(s,h),u=Kc(r,s,a,u,p,h),a=Yc(),r!==null&&!Dt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~h,Mn(r,s,h)):(Ge&&a&&Pc(s),s.flags|=1,Ct(r,s,u,h),s.child)}function Am(r,s,a,u,h){if(r===null){var p=a.type;return typeof p=="function"&&!bu(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Om(r,s,p,u,h)):(r=Aa(a.type,null,u,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!(r.lanes&h)){var y=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ni,a(y,u)&&r.ref===s.ref)return Mn(r,s,h)}return s.flags|=1,r=pr(p,u),r.ref=s.ref,r.return=s,s.child=r}function Om(r,s,a,u,h){if(r!==null){var p=r.memoizedProps;if(Ni(p,u)&&r.ref===s.ref)if(Dt=!1,s.pendingProps=u=p,(r.lanes&h)!==0)r.flags&131072&&(Dt=!0);else return s.lanes=r.lanes,Mn(r,s,h)}return iu(r,s,a,u,h)}function Lm(r,s,a){var u=s.pendingProps,h=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ps,qt),qt|=a;else{if(!(a&1073741824))return r=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ve(Ps,qt),qt|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:a,Ve(Ps,qt),qt|=u}else p!==null?(u=p.baseLanes|a,s.memoizedState=null):u=a,Ve(Ps,qt),qt|=u;return Ct(r,s,h,a),s.child}function Dm(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function iu(r,s,a,u,h){var p=Lt(a)?Fr:Nt.current;return p=Ns(s,p),Ts(s,h),a=Kc(r,s,a,u,p,h),u=Yc(),r!==null&&!Dt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~h,Mn(r,s,h)):(Ge&&u&&Pc(s),s.flags|=1,Ct(r,s,a,h),s.child)}function Mm(r,s,a,u,h){if(Lt(a)){var p=!0;sa(s)}else p=!1;if(Ts(s,h),s.stateNode===null)Na(r,s),km(s,a,u),nu(s,a,u,h),u=!0;else if(r===null){var y=s.stateNode,I=s.memoizedProps;y.props=I;var O=y.context,W=a.contextType;typeof W=="object"&&W!==null?W=Xt(W):(W=Lt(a)?Fr:Nt.current,W=Ns(s,W));var Y=a.getDerivedStateFromProps,X=typeof Y=="function"||typeof y.getSnapshotBeforeUpdate=="function";X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I!==u||O!==W)&&bm(s,y,u,W),lr=!1;var K=s.memoizedState;y.state=K,fa(s,u,y,h),O=s.memoizedState,I!==u||K!==O||Ot.current||lr?(typeof Y=="function"&&(tu(s,a,Y,u),O=s.memoizedState),(I=lr||Em(s,a,I,u,K,O,W))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=O),y.props=u,y.state=O,y.context=W,u=I):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,Zf(r,s),I=s.memoizedProps,W=s.type===s.elementType?I:cn(s.type,I),y.props=W,X=s.pendingProps,K=y.context,O=a.contextType,typeof O=="object"&&O!==null?O=Xt(O):(O=Lt(a)?Fr:Nt.current,O=Ns(s,O));var oe=a.getDerivedStateFromProps;(Y=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I!==X||K!==O)&&bm(s,y,u,O),lr=!1,K=s.memoizedState,y.state=K,fa(s,u,y,h);var ue=s.memoizedState;I!==X||K!==ue||Ot.current||lr?(typeof oe=="function"&&(tu(s,a,oe,u),ue=s.memoizedState),(W=lr||Em(s,a,W,u,K,ue,O)||!1)?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ue,O),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ue,O)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||I===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ue),y.props=u,y.state=ue,y.context=O,u=W):(typeof y.componentDidUpdate!="function"||I===r.memoizedProps&&K===r.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&K===r.memoizedState||(s.flags|=1024),u=!1)}return ou(r,s,a,u,p,h)}function ou(r,s,a,u,h,p){Dm(r,s);var y=(s.flags&128)!==0;if(!u&&!y)return h&&Wf(s,a,!1),Mn(r,s,p);u=s.stateNode,Hx.current=s;var I=y&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,r!==null&&y?(s.child=bs(s,r.child,null,p),s.child=bs(s,null,I,p)):Ct(r,s,I,p),s.memoizedState=u.state,h&&Wf(s,a,!0),s.child}function Fm(r){var s=r.stateNode;s.pendingContext?zf(r,s.pendingContext,s.pendingContext!==s.context):s.context&&zf(r,s.context,!1),$c(r,s.containerInfo)}function Um(r,s,a,u,h){return ks(),Dc(h),s.flags|=256,Ct(r,s,a,u),s.child}var au={dehydrated:null,treeContext:null,retryLane:0};function lu(r){return{baseLanes:r,cachePool:null,transitions:null}}function zm(r,s,a){var u=s.pendingProps,h=Ye.current,p=!1,y=(s.flags&128)!==0,I;if((I=y)||(I=r!==null&&r.memoizedState===null?!1:(h&2)!==0),I?(p=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(h|=1),Ve(Ye,h&1),r===null)return Lc(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(y=u.children,r=u.fallback,p?(u=s.mode,p=s.child,y={mode:"hidden",children:y},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=Oa(y,u,0,null),r=Qr(r,u,a,null),p.return=s,r.return=s,p.sibling=r,s.child=p,s.child.memoizedState=lu(a),s.memoizedState=au,r):cu(s,y));if(h=r.memoizedState,h!==null&&(I=h.dehydrated,I!==null))return qx(r,s,y,u,I,h,a);if(p){p=u.fallback,y=s.mode,h=r.child,I=h.sibling;var O={mode:"hidden",children:u.children};return!(y&1)&&s.child!==h?(u=s.child,u.childLanes=0,u.pendingProps=O,s.deletions=null):(u=pr(h,O),u.subtreeFlags=h.subtreeFlags&14680064),I!==null?p=pr(I,p):(p=Qr(p,y,a,null),p.flags|=2),p.return=s,u.return=s,u.sibling=p,s.child=u,u=p,p=s.child,y=r.child.memoizedState,y=y===null?lu(a):{baseLanes:y.baseLanes|a,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=r.childLanes&~a,s.memoizedState=au,u}return p=r.child,r=p.sibling,u=pr(p,{mode:"visible",children:u.children}),!(s.mode&1)&&(u.lanes=a),u.return=s,u.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=u,s.memoizedState=null,u}function cu(r,s){return s=Oa({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function wa(r,s,a,u){return u!==null&&Dc(u),bs(s,r.child,null,a),r=cu(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function qx(r,s,a,u,h,p,y){if(a)return s.flags&256?(s.flags&=-257,u=ru(Error(t(422))),wa(r,s,y,u)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(p=u.fallback,h=s.mode,u=Oa({mode:"visible",children:u.children},h,0,null),p=Qr(p,h,y,null),p.flags|=2,u.return=s,p.return=s,u.sibling=p,s.child=u,s.mode&1&&bs(s,r.child,null,y),s.child.memoizedState=lu(y),s.memoizedState=au,p);if(!(s.mode&1))return wa(r,s,y,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var I=u.dgst;return u=I,p=Error(t(419)),u=ru(p,u,void 0),wa(r,s,y,u)}if(I=(y&r.childLanes)!==0,Dt||I){if(u=mt,u!==null){switch(y&-y){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|y)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Ln(r,h),hn(u,r,h,-1))}return ku(),u=ru(Error(t(421))),wa(r,s,y,u)}return h.data==="$?"?(s.flags|=128,s.child=r.child,s=i0.bind(null,r),h._reactRetry=s,null):(r=p.treeContext,Ht=sr(h.nextSibling),Bt=s,Ge=!0,ln=null,r!==null&&(Yt[Jt++]=An,Yt[Jt++]=On,Yt[Jt++]=Ur,An=r.id,On=r.overflow,Ur=s),s=cu(s,u.children),s.flags|=4096,s)}function Vm(r,s,a){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),zc(r.return,s,a)}function uu(r,s,a,u,h){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=h)}function Wm(r,s,a){var u=s.pendingProps,h=u.revealOrder,p=u.tail;if(Ct(r,s,u.children,a),u=Ye.current,u&2)u=u&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vm(r,a,s);else if(r.tag===19)Vm(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(Ve(Ye,u),!(s.mode&1))s.memoizedState=null;else switch(h){case"forwards":for(a=s.child,h=null;a!==null;)r=a.alternate,r!==null&&ma(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),uu(s,!1,h,a,p);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&ma(r)===null){s.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}uu(s,!0,a,null,p);break;case"together":uu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Na(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Mn(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Br|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=pr(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=pr(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Gx(r,s,a){switch(s.tag){case 3:Fm(s),ks();break;case 5:nm(s);break;case 1:Lt(s.type)&&sa(s);break;case 4:$c(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,h=s.memoizedProps.value;Ve(ua,u._currentValue),u._currentValue=h;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(Ve(Ye,Ye.current&1),s.flags|=128,null):a&s.child.childLanes?zm(r,s,a):(Ve(Ye,Ye.current&1),r=Mn(r,s,a),r!==null?r.sibling:null);Ve(Ye,Ye.current&1);break;case 19:if(u=(a&s.childLanes)!==0,r.flags&128){if(u)return Wm(r,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ve(Ye,Ye.current),u)break;return null;case 22:case 23:return s.lanes=0,Lm(r,s,a)}return Mn(r,s,a)}var $m,du,Bm,Hm;$m=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},du=function(){},Bm=function(r,s,a,u){var h=r.memoizedProps;if(h!==u){r=s.stateNode,Wr(Nn.current);var p=null;switch(a){case"input":h=De(r,h),u=De(r,u),p=[];break;case"select":h=ee({},h,{value:void 0}),u=ee({},u,{value:void 0}),p=[];break;case"textarea":h=Pt(r,h),u=Pt(r,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=ta)}Hl(a,u);var y;a=null;for(W in h)if(!u.hasOwnProperty(W)&&h.hasOwnProperty(W)&&h[W]!=null)if(W==="style"){var I=h[W];for(y in I)I.hasOwnProperty(y)&&(a||(a={}),a[y]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?p||(p=[]):(p=p||[]).push(W,null));for(W in u){var O=u[W];if(I=h!=null?h[W]:void 0,u.hasOwnProperty(W)&&O!==I&&(O!=null||I!=null))if(W==="style")if(I){for(y in I)!I.hasOwnProperty(y)||O&&O.hasOwnProperty(y)||(a||(a={}),a[y]="");for(y in O)O.hasOwnProperty(y)&&I[y]!==O[y]&&(a||(a={}),a[y]=O[y])}else a||(p||(p=[]),p.push(W,a)),a=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,I=I?I.__html:void 0,O!=null&&I!==O&&(p=p||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(p=p||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&He("scroll",r),p||I===O||(p=[])):(p=p||[]).push(W,O))}a&&(p=p||[]).push("style",a);var W=p;(s.updateQueue=W)&&(s.flags|=4)}},Hm=function(r,s,a,u){a!==u&&(s.flags|=4)};function Mi(r,s){if(!Ge)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Et(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(s)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=a,s}function Qx(r,s,a){var u=s.pendingProps;switch(Ac(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Lt(s.type)&&ra(),Et(s),null;case 3:return u=s.stateNode,Is(),qe(Ot),qe(Nt),qc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(la(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ln!==null&&(Nu(ln),ln=null))),du(r,s),Et(s),null;case 5:Bc(s);var h=Wr(Pi.current);if(a=s.type,r!==null&&s.stateNode!=null)Bm(r,s,a,u,h),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(t(166));return Et(s),null}if(r=Wr(Nn.current),la(s)){u=s.stateNode,a=s.type;var p=s.memoizedProps;switch(u[wn]=s,u[Ci]=p,r=(s.mode&1)!==0,a){case"dialog":He("cancel",u),He("close",u);break;case"iframe":case"object":case"embed":He("load",u);break;case"video":case"audio":for(h=0;h<Ei.length;h++)He(Ei[h],u);break;case"source":He("error",u);break;case"img":case"image":case"link":He("error",u),He("load",u);break;case"details":He("toggle",u);break;case"input":Oe(u,p),He("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},He("invalid",u);break;case"textarea":Kn(u,p),He("invalid",u)}Hl(a,p),h=null;for(var y in p)if(p.hasOwnProperty(y)){var I=p[y];y==="children"?typeof I=="string"?u.textContent!==I&&(p.suppressHydrationWarning!==!0&&ea(u.textContent,I,r),h=["children",I]):typeof I=="number"&&u.textContent!==""+I&&(p.suppressHydrationWarning!==!0&&ea(u.textContent,I,r),h=["children",""+I]):o.hasOwnProperty(y)&&I!=null&&y==="onScroll"&&He("scroll",u)}switch(a){case"input":Se(u),Re(u,p,!0);break;case"textarea":Se(u),Wt(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ta)}u=h,s.updateQueue=u,u!==null&&(s.flags|=4)}else{y=h.nodeType===9?h:h.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=tt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=y.createElement(a,{is:u.is}):(r=y.createElement(a),a==="select"&&(y=r,u.multiple?y.multiple=!0:u.size&&(y.size=u.size))):r=y.createElementNS(r,a),r[wn]=s,r[Ci]=u,$m(r,s,!1,!1),s.stateNode=r;e:{switch(y=ql(a,u),a){case"dialog":He("cancel",r),He("close",r),h=u;break;case"iframe":case"object":case"embed":He("load",r),h=u;break;case"video":case"audio":for(h=0;h<Ei.length;h++)He(Ei[h],r);h=u;break;case"source":He("error",r),h=u;break;case"img":case"image":case"link":He("error",r),He("load",r),h=u;break;case"details":He("toggle",r),h=u;break;case"input":Oe(r,u),h=De(r,u),He("invalid",r);break;case"option":h=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},h=ee({},u,{value:void 0}),He("invalid",r);break;case"textarea":Kn(r,u),h=Pt(r,u),He("invalid",r);break;default:h=u}Hl(a,h),I=h;for(p in I)if(I.hasOwnProperty(p)){var O=I[p];p==="style"?oi(r,O):p==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&us(r,O)):p==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&Yn(r,O):typeof O=="number"&&Yn(r,""+O):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?O!=null&&p==="onScroll"&&He("scroll",r):O!=null&&C(r,p,O,y))}switch(a){case"input":Se(r),Re(r,u,!1);break;case"textarea":Se(r),Wt(r);break;case"option":u.value!=null&&r.setAttribute("value",""+le(u.value));break;case"select":r.multiple=!!u.multiple,p=u.value,p!=null?Vt(r,!!u.multiple,p,!1):u.defaultValue!=null&&Vt(r,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(r.onclick=ta)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Et(s),null;case 6:if(r&&s.stateNode!=null)Hm(r,s,r.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(t(166));if(a=Wr(Pi.current),Wr(Nn.current),la(s)){if(u=s.stateNode,a=s.memoizedProps,u[wn]=s,(p=u.nodeValue!==a)&&(r=Bt,r!==null))switch(r.tag){case 3:ea(u.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ea(u.nodeValue,a,(r.mode&1)!==0)}p&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[wn]=s,s.stateNode=u}return Et(s),null;case 13:if(qe(Ye),u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ge&&Ht!==null&&s.mode&1&&!(s.flags&128))Qf(),ks(),s.flags|=98560,p=!1;else if(p=la(s),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[wn]=s}else ks(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Et(s),p=!1}else ln!==null&&(Nu(ln),ln=null),p=!0;if(!p)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(s.child.flags|=8192,s.mode&1&&(r===null||Ye.current&1?ct===0&&(ct=3):ku())),s.updateQueue!==null&&(s.flags|=4),Et(s),null);case 4:return Is(),du(r,s),r===null&&ki(s.stateNode.containerInfo),Et(s),null;case 10:return Uc(s.type._context),Et(s),null;case 17:return Lt(s.type)&&ra(),Et(s),null;case 19:if(qe(Ye),p=s.memoizedState,p===null)return Et(s),null;if(u=(s.flags&128)!==0,y=p.rendering,y===null)if(u)Mi(p,!1);else{if(ct!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(y=ma(r),y!==null){for(s.flags|=128,Mi(p,!1),u=y.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)p=a,r=u,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,r=y.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ve(Ye,Ye.current&1|2),s.child}r=r.sibling}p.tail!==null&&nt()>As&&(s.flags|=128,u=!0,Mi(p,!1),s.lanes=4194304)}else{if(!u)if(r=ma(y),r!==null){if(s.flags|=128,u=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Mi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Ge)return Et(s),null}else 2*nt()-p.renderingStartTime>As&&a!==1073741824&&(s.flags|=128,u=!0,Mi(p,!1),s.lanes=4194304);p.isBackwards?(y.sibling=s.child,s.child=y):(a=p.last,a!==null?a.sibling=y:s.child=y,p.last=y)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=nt(),s.sibling=null,a=Ye.current,Ve(Ye,u?a&1|2:a&1),s):(Et(s),null);case 22:case 23:return Eu(),u=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(s.flags|=8192),u&&s.mode&1?qt&1073741824&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Kx(r,s){switch(Ac(s),s.tag){case 1:return Lt(s.type)&&ra(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Is(),qe(Ot),qe(Nt),qc(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Bc(s),null;case 13:if(qe(Ye),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ks()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return qe(Ye),null;case 4:return Is(),null;case 10:return Uc(s.type._context),null;case 22:case 23:return Eu(),null;case 24:return null;default:return null}}var Sa=!1,kt=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,ce=null;function js(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Xe(r,s,u)}else a.current=null}function hu(r,s,a){try{a()}catch(u){Xe(r,s,u)}}var qm=!1;function Jx(r,s){if(Ec=$o,r=Ef(),gc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var y=0,I=-1,O=-1,W=0,Y=0,X=r,K=null;t:for(;;){for(var oe;X!==a||h!==0&&X.nodeType!==3||(I=y+h),X!==p||u!==0&&X.nodeType!==3||(O=y+u),X.nodeType===3&&(y+=X.nodeValue.length),(oe=X.firstChild)!==null;)K=X,X=oe;for(;;){if(X===r)break t;if(K===a&&++W===h&&(I=y),K===p&&++Y===u&&(O=y),(oe=X.nextSibling)!==null)break;X=K,K=X.parentNode}X=oe}a=I===-1||O===-1?null:{start:I,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(kc={focusedElem:r,selectionRange:a},$o=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var ue=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,rt=ue.memoizedState,F=s.stateNode,M=F.getSnapshotBeforeUpdate(s.elementType===s.type?de:cn(s.type,de),rt);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){Xe(s,s.return,te)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return ue=qm,qm=!1,ue}function Fi(r,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&r)===r){var p=h.destroy;h.destroy=void 0,p!==void 0&&hu(s,a,p)}h=h.next}while(h!==u)}}function Ea(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function fu(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Gm(r){var s=r.alternate;s!==null&&(r.alternate=null,Gm(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[wn],delete s[Ci],delete s[Ic],delete s[Ax],delete s[Ox])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Qm(r){return r.tag===5||r.tag===3||r.tag===4}function Km(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Qm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function mu(r,s,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ta));else if(u!==4&&(r=r.child,r!==null))for(mu(r,s,a),r=r.sibling;r!==null;)mu(r,s,a),r=r.sibling}function pu(r,s,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(pu(r,s,a),r=r.sibling;r!==null;)pu(r,s,a),r=r.sibling}var yt=null,un=!1;function ur(r,s,a){for(a=a.child;a!==null;)Ym(r,s,a),a=a.sibling}function Ym(r,s,a){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Mo,a)}catch{}switch(a.tag){case 5:kt||js(a,s);case 6:var u=yt,h=un;yt=null,ur(r,s,a),yt=u,un=h,yt!==null&&(un?(r=yt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):yt.removeChild(a.stateNode));break;case 18:yt!==null&&(un?(r=yt,a=a.stateNode,r.nodeType===8?Tc(r.parentNode,a):r.nodeType===1&&Tc(r,a),gi(r)):Tc(yt,a.stateNode));break;case 4:u=yt,h=un,yt=a.stateNode.containerInfo,un=!0,ur(r,s,a),yt=u,un=h;break;case 0:case 11:case 14:case 15:if(!kt&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&hu(a,s,y),h=h.next}while(h!==u)}ur(r,s,a);break;case 1:if(!kt&&(js(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(I){Xe(a,s,I)}ur(r,s,a);break;case 21:ur(r,s,a);break;case 22:a.mode&1?(kt=(u=kt)||a.memoizedState!==null,ur(r,s,a),kt=u):ur(r,s,a);break;default:ur(r,s,a)}}function Jm(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Yx),s.forEach(function(u){var h=o0.bind(null,r,u);a.has(u)||(a.add(u),u.then(h,h))})}}function dn(r,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];try{var p=r,y=s,I=y;e:for(;I!==null;){switch(I.tag){case 5:yt=I.stateNode,un=!1;break e;case 3:yt=I.stateNode.containerInfo,un=!0;break e;case 4:yt=I.stateNode.containerInfo,un=!0;break e}I=I.return}if(yt===null)throw Error(t(160));Ym(p,y,h),yt=null,un=!1;var O=h.alternate;O!==null&&(O.return=null),h.return=null}catch(W){Xe(h,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Xm(s,r),s=s.sibling}function Xm(r,s){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(dn(s,r),En(r),u&4){try{Fi(3,r,r.return),Ea(3,r)}catch(de){Xe(r,r.return,de)}try{Fi(5,r,r.return)}catch(de){Xe(r,r.return,de)}}break;case 1:dn(s,r),En(r),u&512&&a!==null&&js(a,a.return);break;case 5:if(dn(s,r),En(r),u&512&&a!==null&&js(a,a.return),r.flags&32){var h=r.stateNode;try{Yn(h,"")}catch(de){Xe(r,r.return,de)}}if(u&4&&(h=r.stateNode,h!=null)){var p=r.memoizedProps,y=a!==null?a.memoizedProps:p,I=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{I==="input"&&p.type==="radio"&&p.name!=null&&Ee(h,p),ql(I,y);var W=ql(I,p);for(y=0;y<O.length;y+=2){var Y=O[y],X=O[y+1];Y==="style"?oi(h,X):Y==="dangerouslySetInnerHTML"?us(h,X):Y==="children"?Yn(h,X):C(h,Y,X,W)}switch(I){case"input":st(h,p);break;case"textarea":at(h,p);break;case"select":var K=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?Vt(h,!!p.multiple,oe,!1):K!==!!p.multiple&&(p.defaultValue!=null?Vt(h,!!p.multiple,p.defaultValue,!0):Vt(h,!!p.multiple,p.multiple?[]:"",!1))}h[Ci]=p}catch(de){Xe(r,r.return,de)}}break;case 6:if(dn(s,r),En(r),u&4){if(r.stateNode===null)throw Error(t(162));h=r.stateNode,p=r.memoizedProps;try{h.nodeValue=p}catch(de){Xe(r,r.return,de)}}break;case 3:if(dn(s,r),En(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{gi(s.containerInfo)}catch(de){Xe(r,r.return,de)}break;case 4:dn(s,r),En(r);break;case 13:dn(s,r),En(r),h=r.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(yu=nt())),u&4&&Jm(r);break;case 22:if(Y=a!==null&&a.memoizedState!==null,r.mode&1?(kt=(W=kt)||Y,dn(s,r),kt=W):dn(s,r),En(r),u&8192){if(W=r.memoizedState!==null,(r.stateNode.isHidden=W)&&!Y&&r.mode&1)for(ce=r,Y=r.child;Y!==null;){for(X=ce=Y;ce!==null;){switch(K=ce,oe=K.child,K.tag){case 0:case 11:case 14:case 15:Fi(4,K,K.return);break;case 1:js(K,K.return);var ue=K.stateNode;if(typeof ue.componentWillUnmount=="function"){u=K,a=K.return;try{s=u,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(de){Xe(u,a,de)}}break;case 5:js(K,K.return);break;case 22:if(K.memoizedState!==null){tp(X);continue}}oe!==null?(oe.return=K,ce=oe):tp(X)}Y=Y.sibling}e:for(Y=null,X=r;;){if(X.tag===5){if(Y===null){Y=X;try{h=X.stateNode,W?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(I=X.stateNode,O=X.memoizedProps.style,y=O!=null&&O.hasOwnProperty("display")?O.display:null,I.style.display=Jn("display",y))}catch(de){Xe(r,r.return,de)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=W?"":X.memoizedProps}catch(de){Xe(r,r.return,de)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===r)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===r)break e;for(;X.sibling===null;){if(X.return===null||X.return===r)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:dn(s,r),En(r),u&4&&Jm(r);break;case 21:break;default:dn(s,r),En(r)}}function En(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Qm(a)){var u=a;break e}a=a.return}throw Error(t(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Yn(h,""),u.flags&=-33);var p=Km(r);pu(r,p,h);break;case 3:case 4:var y=u.stateNode.containerInfo,I=Km(r);mu(r,I,y);break;default:throw Error(t(161))}}catch(O){Xe(r,r.return,O)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Xx(r,s,a){ce=r,Zm(r)}function Zm(r,s,a){for(var u=(r.mode&1)!==0;ce!==null;){var h=ce,p=h.child;if(h.tag===22&&u){var y=h.memoizedState!==null||Sa;if(!y){var I=h.alternate,O=I!==null&&I.memoizedState!==null||kt;I=Sa;var W=kt;if(Sa=y,(kt=O)&&!W)for(ce=h;ce!==null;)y=ce,O=y.child,y.tag===22&&y.memoizedState!==null?np(h):O!==null?(O.return=y,ce=O):np(h);for(;p!==null;)ce=p,Zm(p),p=p.sibling;ce=h,Sa=I,kt=W}ep(r)}else h.subtreeFlags&8772&&p!==null?(p.return=h,ce=p):ep(r)}}function ep(r){for(;ce!==null;){var s=ce;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:kt||Ea(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!kt)if(a===null)u.componentDidMount();else{var h=s.elementType===s.type?a.memoizedProps:cn(s.type,a.memoizedProps);u.componentDidUpdate(h,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&tm(s,p,u);break;case 3:var y=s.updateQueue;if(y!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}tm(s,y,a)}break;case 5:var I=s.stateNode;if(a===null&&s.flags&4){a=I;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var Y=W.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&gi(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}kt||s.flags&512&&fu(s)}catch(K){Xe(s,s.return,K)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function tp(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function np(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ea(4,s)}catch(O){Xe(s,a,O)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var h=s.return;try{u.componentDidMount()}catch(O){Xe(s,h,O)}}var p=s.return;try{fu(s)}catch(O){Xe(s,p,O)}break;case 5:var y=s.return;try{fu(s)}catch(O){Xe(s,y,O)}}}catch(O){Xe(s,s.return,O)}if(s===r){ce=null;break}var I=s.sibling;if(I!==null){I.return=s.return,ce=I;break}ce=s.return}}var Zx=Math.ceil,ka=D.ReactCurrentDispatcher,gu=D.ReactCurrentOwner,en=D.ReactCurrentBatchConfig,je=0,mt=null,it=null,_t=0,qt=0,Ps=ir(0),ct=0,Ui=null,Br=0,ba=0,vu=0,zi=null,Mt=null,yu=0,As=1/0,Fn=null,Ca=!1,_u=null,dr=null,Ta=!1,hr=null,Ia=0,Vi=0,xu=null,Ra=-1,ja=0;function Tt(){return je&6?nt():Ra!==-1?Ra:Ra=nt()}function fr(r){return r.mode&1?je&2&&_t!==0?_t&-_t:Dx.transition!==null?(ja===0&&(ja=Qh()),ja):(r=Le,r!==0||(r=window.event,r=r===void 0?16:rf(r.type)),r):1}function hn(r,s,a,u){if(50<Vi)throw Vi=0,xu=null,Error(t(185));di(r,a,u),(!(je&2)||r!==mt)&&(r===mt&&(!(je&2)&&(ba|=a),ct===4&&mr(r,_t)),Ft(r,u),a===1&&je===0&&!(s.mode&1)&&(As=nt()+500,ia&&ar()))}function Ft(r,s){var a=r.callbackNode;D_(r,s);var u=zo(r,r===mt?_t:0);if(u===0)a!==null&&Hh(a),r.callbackNode=null,r.callbackPriority=0;else if(s=u&-u,r.callbackPriority!==s){if(a!=null&&Hh(a),s===1)r.tag===0?Lx(sp.bind(null,r)):$f(sp.bind(null,r)),jx(function(){!(je&6)&&ar()}),a=null;else{switch(Kh(u)){case 1:a=Zl;break;case 4:a=qh;break;case 16:a=Do;break;case 536870912:a=Gh;break;default:a=Do}a=hp(a,rp.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function rp(r,s){if(Ra=-1,ja=0,je&6)throw Error(t(327));var a=r.callbackNode;if(Os()&&r.callbackNode!==a)return null;var u=zo(r,r===mt?_t:0);if(u===0)return null;if(u&30||u&r.expiredLanes||s)s=Pa(r,u);else{s=u;var h=je;je|=2;var p=op();(mt!==r||_t!==s)&&(Fn=null,As=nt()+500,qr(r,s));do try{n0();break}catch(I){ip(r,I)}while(!0);Fc(),ka.current=p,je=h,it!==null?s=0:(mt=null,_t=0,s=ct)}if(s!==0){if(s===2&&(h=ec(r),h!==0&&(u=h,s=wu(r,h))),s===1)throw a=Ui,qr(r,0),mr(r,u),Ft(r,nt()),a;if(s===6)mr(r,u);else{if(h=r.current.alternate,!(u&30)&&!e0(h)&&(s=Pa(r,u),s===2&&(p=ec(r),p!==0&&(u=p,s=wu(r,p))),s===1))throw a=Ui,qr(r,0),mr(r,u),Ft(r,nt()),a;switch(r.finishedWork=h,r.finishedLanes=u,s){case 0:case 1:throw Error(t(345));case 2:Gr(r,Mt,Fn);break;case 3:if(mr(r,u),(u&130023424)===u&&(s=yu+500-nt(),10<s)){if(zo(r,0)!==0)break;if(h=r.suspendedLanes,(h&u)!==u){Tt(),r.pingedLanes|=r.suspendedLanes&h;break}r.timeoutHandle=Cc(Gr.bind(null,r,Mt,Fn),s);break}Gr(r,Mt,Fn);break;case 4:if(mr(r,u),(u&4194240)===u)break;for(s=r.eventTimes,h=-1;0<u;){var y=31-on(u);p=1<<y,y=s[y],y>h&&(h=y),u&=~p}if(u=h,u=nt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Zx(u/1960))-u,10<u){r.timeoutHandle=Cc(Gr.bind(null,r,Mt,Fn),u);break}Gr(r,Mt,Fn);break;case 5:Gr(r,Mt,Fn);break;default:throw Error(t(329))}}}return Ft(r,nt()),r.callbackNode===a?rp.bind(null,r):null}function wu(r,s){var a=zi;return r.current.memoizedState.isDehydrated&&(qr(r,s).flags|=256),r=Pa(r,s),r!==2&&(s=Mt,Mt=a,s!==null&&Nu(s)),r}function Nu(r){Mt===null?Mt=r:Mt.push.apply(Mt,r)}function e0(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var h=a[u],p=h.getSnapshot;h=h.value;try{if(!an(p(),h))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function mr(r,s){for(s&=~vu,s&=~ba,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-on(s),u=1<<a;r[a]=-1,s&=~u}}function sp(r){if(je&6)throw Error(t(327));Os();var s=zo(r,0);if(!(s&1))return Ft(r,nt()),null;var a=Pa(r,s);if(r.tag!==0&&a===2){var u=ec(r);u!==0&&(s=u,a=wu(r,u))}if(a===1)throw a=Ui,qr(r,0),mr(r,s),Ft(r,nt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Gr(r,Mt,Fn),Ft(r,nt()),null}function Su(r,s){var a=je;je|=1;try{return r(s)}finally{je=a,je===0&&(As=nt()+500,ia&&ar())}}function Hr(r){hr!==null&&hr.tag===0&&!(je&6)&&Os();var s=je;je|=1;var a=en.transition,u=Le;try{if(en.transition=null,Le=1,r)return r()}finally{Le=u,en.transition=a,je=s,!(je&6)&&ar()}}function Eu(){qt=Ps.current,qe(Ps)}function qr(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Rx(a)),it!==null)for(a=it.return;a!==null;){var u=a;switch(Ac(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ra();break;case 3:Is(),qe(Ot),qe(Nt),qc();break;case 5:Bc(u);break;case 4:Is();break;case 13:qe(Ye);break;case 19:qe(Ye);break;case 10:Uc(u.type._context);break;case 22:case 23:Eu()}a=a.return}if(mt=r,it=r=pr(r.current,null),_t=qt=s,ct=0,Ui=null,vu=ba=Br=0,Mt=zi=null,Vr!==null){for(s=0;s<Vr.length;s++)if(a=Vr[s],u=a.interleaved,u!==null){a.interleaved=null;var h=u.next,p=a.pending;if(p!==null){var y=p.next;p.next=h,u.next=y}a.pending=u}Vr=null}return r}function ip(r,s){do{var a=it;try{if(Fc(),pa.current=_a,ga){for(var u=Je.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}ga=!1}if($r=0,ft=lt=Je=null,Ai=!1,Oi=0,gu.current=null,a===null||a.return===null){ct=1,Ui=s,it=null;break}e:{var p=r,y=a.return,I=a,O=s;if(s=_t,I.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,Y=I,X=Y.tag;if(!(Y.mode&1)&&(X===0||X===11||X===15)){var K=Y.alternate;K?(Y.updateQueue=K.updateQueue,Y.memoizedState=K.memoizedState,Y.lanes=K.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var oe=Rm(y);if(oe!==null){oe.flags&=-257,jm(oe,y,I,p,s),oe.mode&1&&Im(p,W,s),s=oe,O=W;var ue=s.updateQueue;if(ue===null){var de=new Set;de.add(O),s.updateQueue=de}else ue.add(O);break e}else{if(!(s&1)){Im(p,W,s),ku();break e}O=Error(t(426))}}else if(Ge&&I.mode&1){var rt=Rm(y);if(rt!==null){!(rt.flags&65536)&&(rt.flags|=256),jm(rt,y,I,p,s),Dc(Rs(O,I));break e}}p=O=Rs(O,I),ct!==4&&(ct=2),zi===null?zi=[p]:zi.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var F=Cm(p,O,s);em(p,F);break e;case 1:I=O;var M=p.type,U=p.stateNode;if(!(p.flags&128)&&(typeof M.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(dr===null||!dr.has(U)))){p.flags|=65536,s&=-s,p.lanes|=s;var te=Tm(p,I,s);em(p,te);break e}}p=p.return}while(p!==null)}lp(a)}catch(he){s=he,it===a&&a!==null&&(it=a=a.return);continue}break}while(!0)}function op(){var r=ka.current;return ka.current=_a,r===null?_a:r}function ku(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(Br&268435455)&&!(ba&268435455)||mr(mt,_t)}function Pa(r,s){var a=je;je|=2;var u=op();(mt!==r||_t!==s)&&(Fn=null,qr(r,s));do try{t0();break}catch(h){ip(r,h)}while(!0);if(Fc(),je=a,ka.current=u,it!==null)throw Error(t(261));return mt=null,_t=0,ct}function t0(){for(;it!==null;)ap(it)}function n0(){for(;it!==null&&!C_();)ap(it)}function ap(r){var s=dp(r.alternate,r,qt);r.memoizedProps=r.pendingProps,s===null?lp(r):it=s,gu.current=null}function lp(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=Kx(a,s),a!==null){a.flags&=32767,it=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ct=6,it=null;return}}else if(a=Qx(a,s,qt),a!==null){it=a;return}if(s=s.sibling,s!==null){it=s;return}it=s=r}while(s!==null);ct===0&&(ct=5)}function Gr(r,s,a){var u=Le,h=en.transition;try{en.transition=null,Le=1,r0(r,s,a,u)}finally{en.transition=h,Le=u}return null}function r0(r,s,a,u){do Os();while(hr!==null);if(je&6)throw Error(t(327));a=r.finishedWork;var h=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(M_(r,p),r===mt&&(it=mt=null,_t=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Ta||(Ta=!0,hp(Do,function(){return Os(),null})),p=(a.flags&15990)!==0,a.subtreeFlags&15990||p){p=en.transition,en.transition=null;var y=Le;Le=1;var I=je;je|=4,gu.current=null,Jx(r,a),Xm(a,r),Sx(kc),$o=!!Ec,kc=Ec=null,r.current=a,Xx(a),T_(),je=I,Le=y,en.transition=p}else r.current=a;if(Ta&&(Ta=!1,hr=r,Ia=h),p=r.pendingLanes,p===0&&(dr=null),j_(a.stateNode),Ft(r,nt()),s!==null)for(u=r.onRecoverableError,a=0;a<s.length;a++)h=s[a],u(h.value,{componentStack:h.stack,digest:h.digest});if(Ca)throw Ca=!1,r=_u,_u=null,r;return Ia&1&&r.tag!==0&&Os(),p=r.pendingLanes,p&1?r===xu?Vi++:(Vi=0,xu=r):Vi=0,ar(),null}function Os(){if(hr!==null){var r=Kh(Ia),s=en.transition,a=Le;try{if(en.transition=null,Le=16>r?16:r,hr===null)var u=!1;else{if(r=hr,hr=null,Ia=0,je&6)throw Error(t(331));var h=je;for(je|=4,ce=r.current;ce!==null;){var p=ce,y=p.child;if(ce.flags&16){var I=p.deletions;if(I!==null){for(var O=0;O<I.length;O++){var W=I[O];for(ce=W;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:Fi(8,Y,p)}var X=Y.child;if(X!==null)X.return=Y,ce=X;else for(;ce!==null;){Y=ce;var K=Y.sibling,oe=Y.return;if(Gm(Y),Y===W){ce=null;break}if(K!==null){K.return=oe,ce=K;break}ce=oe}}}var ue=p.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var rt=de.sibling;de.sibling=null,de=rt}while(de!==null)}}ce=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,ce=y;else e:for(;ce!==null;){if(p=ce,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Fi(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,ce=F;break e}ce=p.return}}var M=r.current;for(ce=M;ce!==null;){y=ce;var U=y.child;if(y.subtreeFlags&2064&&U!==null)U.return=y,ce=U;else e:for(y=M;ce!==null;){if(I=ce,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Ea(9,I)}}catch(he){Xe(I,I.return,he)}if(I===y){ce=null;break e}var te=I.sibling;if(te!==null){te.return=I.return,ce=te;break e}ce=I.return}}if(je=h,ar(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Mo,r)}catch{}u=!0}return u}finally{Le=a,en.transition=s}}return!1}function cp(r,s,a){s=Rs(a,s),s=Cm(r,s,1),r=cr(r,s,1),s=Tt(),r!==null&&(di(r,1,s),Ft(r,s))}function Xe(r,s,a){if(r.tag===3)cp(r,r,a);else for(;s!==null;){if(s.tag===3){cp(s,r,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(dr===null||!dr.has(u))){r=Rs(a,r),r=Tm(s,r,1),s=cr(s,r,1),r=Tt(),s!==null&&(di(s,1,r),Ft(s,r));break}}s=s.return}}function s0(r,s,a){var u=r.pingCache;u!==null&&u.delete(s),s=Tt(),r.pingedLanes|=r.suspendedLanes&a,mt===r&&(_t&a)===a&&(ct===4||ct===3&&(_t&130023424)===_t&&500>nt()-yu?qr(r,0):vu|=a),Ft(r,s)}function up(r,s){s===0&&(r.mode&1?(s=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):s=1);var a=Tt();r=Ln(r,s),r!==null&&(di(r,s,a),Ft(r,a))}function i0(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),up(r,a)}function o0(r,s){var a=0;switch(r.tag){case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(t(314))}u!==null&&u.delete(s),up(r,a)}var dp;dp=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Ot.current)Dt=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return Dt=!1,Gx(r,s,a);Dt=!!(r.flags&131072)}else Dt=!1,Ge&&s.flags&1048576&&Bf(s,aa,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;Na(r,s),r=s.pendingProps;var h=Ns(s,Nt.current);Ts(s,a),h=Kc(null,s,u,r,h,a);var p=Yc();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Lt(u)?(p=!0,sa(s)):p=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Wc(s),h.updater=xa,s.stateNode=h,h._reactInternals=s,nu(s,u,r,a),s=ou(null,s,u,!0,p,a)):(s.tag=0,Ge&&p&&Pc(s),Ct(null,s,h,a),s=s.child),s;case 16:u=s.elementType;e:{switch(Na(r,s),r=s.pendingProps,h=u._init,u=h(u._payload),s.type=u,h=s.tag=l0(u),r=cn(u,r),h){case 0:s=iu(null,s,u,r,a);break e;case 1:s=Mm(null,s,u,r,a);break e;case 11:s=Pm(null,s,u,r,a);break e;case 14:s=Am(null,s,u,cn(u.type,r),a);break e}throw Error(t(306,u,""))}return s;case 0:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:cn(u,h),iu(r,s,u,h,a);case 1:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:cn(u,h),Mm(r,s,u,h,a);case 3:e:{if(Fm(s),r===null)throw Error(t(387));u=s.pendingProps,p=s.memoizedState,h=p.element,Zf(r,s),fa(s,u,null,a);var y=s.memoizedState;if(u=y.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){h=Rs(Error(t(423)),s),s=Um(r,s,u,a,h);break e}else if(u!==h){h=Rs(Error(t(424)),s),s=Um(r,s,u,a,h);break e}else for(Ht=sr(s.stateNode.containerInfo.firstChild),Bt=s,Ge=!0,ln=null,a=Jf(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ks(),u===h){s=Mn(r,s,a);break e}Ct(r,s,u,a)}s=s.child}return s;case 5:return nm(s),r===null&&Lc(s),u=s.type,h=s.pendingProps,p=r!==null?r.memoizedProps:null,y=h.children,bc(u,h)?y=null:p!==null&&bc(u,p)&&(s.flags|=32),Dm(r,s),Ct(r,s,y,a),s.child;case 6:return r===null&&Lc(s),null;case 13:return zm(r,s,a);case 4:return $c(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=bs(s,null,u,a):Ct(r,s,u,a),s.child;case 11:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:cn(u,h),Pm(r,s,u,h,a);case 7:return Ct(r,s,s.pendingProps,a),s.child;case 8:return Ct(r,s,s.pendingProps.children,a),s.child;case 12:return Ct(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,h=s.pendingProps,p=s.memoizedProps,y=h.value,Ve(ua,u._currentValue),u._currentValue=y,p!==null)if(an(p.value,y)){if(p.children===h.children&&!Ot.current){s=Mn(r,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var I=p.dependencies;if(I!==null){y=p.child;for(var O=I.firstContext;O!==null;){if(O.context===u){if(p.tag===1){O=Dn(-1,a&-a),O.tag=2;var W=p.updateQueue;if(W!==null){W=W.shared;var Y=W.pending;Y===null?O.next=O:(O.next=Y.next,Y.next=O),W.pending=O}}p.lanes|=a,O=p.alternate,O!==null&&(O.lanes|=a),zc(p.return,a,s),I.lanes|=a;break}O=O.next}}else if(p.tag===10)y=p.type===s.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(t(341));y.lanes|=a,I=y.alternate,I!==null&&(I.lanes|=a),zc(y,a,s),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===s){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Ct(r,s,h.children,a),s=s.child}return s;case 9:return h=s.type,u=s.pendingProps.children,Ts(s,a),h=Xt(h),u=u(h),s.flags|=1,Ct(r,s,u,a),s.child;case 14:return u=s.type,h=cn(u,s.pendingProps),h=cn(u.type,h),Am(r,s,u,h,a);case 15:return Om(r,s,s.type,s.pendingProps,a);case 17:return u=s.type,h=s.pendingProps,h=s.elementType===u?h:cn(u,h),Na(r,s),s.tag=1,Lt(u)?(r=!0,sa(s)):r=!1,Ts(s,a),km(s,u,h),nu(s,u,h,a),ou(null,s,u,!0,r,a);case 19:return Wm(r,s,a);case 22:return Lm(r,s,a)}throw Error(t(156,s.tag))};function hp(r,s){return Bh(r,s)}function a0(r,s,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(r,s,a,u){return new a0(r,s,a,u)}function bu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function l0(r){if(typeof r=="function")return bu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===q)return 11;if(r===pe)return 14}return 2}function pr(r,s){var a=r.alternate;return a===null?(a=tn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Aa(r,s,a,u,h,p){var y=2;if(u=r,typeof r=="function")bu(r)&&(y=1);else if(typeof r=="string")y=5;else e:switch(r){case b:return Qr(a.children,h,p,s);case x:y=8,h|=8;break;case k:return r=tn(12,a,s,h|2),r.elementType=k,r.lanes=p,r;case Z:return r=tn(13,a,s,h),r.elementType=Z,r.lanes=p,r;case se:return r=tn(19,a,s,h),r.elementType=se,r.lanes=p,r;case re:return Oa(a,h,p,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:y=10;break e;case H:y=9;break e;case q:y=11;break e;case pe:y=14;break e;case ge:y=16,u=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=tn(y,a,s,h),s.elementType=r,s.type=u,s.lanes=p,s}function Qr(r,s,a,u){return r=tn(7,r,u,s),r.lanes=a,r}function Oa(r,s,a,u){return r=tn(22,r,u,s),r.elementType=re,r.lanes=a,r.stateNode={isHidden:!1},r}function Cu(r,s,a){return r=tn(6,r,null,s),r.lanes=a,r}function Tu(r,s,a){return s=tn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function c0(r,s,a,u,h){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tc(0),this.expirationTimes=tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Iu(r,s,a,u,h,p,y,I,O){return r=new c0(r,s,a,I,O),s===1?(s=1,p===!0&&(s|=8)):s=0,p=tn(3,null,null,s),r.current=p,p.stateNode=r,p.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wc(p),r}function u0(r,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:u==null?null:""+u,children:r,containerInfo:s,implementation:a}}function fp(r){if(!r)return or;r=r._reactInternals;e:{if(Dr(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Lt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Lt(a))return Vf(r,a,s)}return s}function mp(r,s,a,u,h,p,y,I,O){return r=Iu(a,u,!0,r,h,p,y,I,O),r.context=fp(null),a=r.current,u=Tt(),h=fr(a),p=Dn(u,h),p.callback=s??null,cr(a,p,h),r.current.lanes=h,di(r,h,u),Ft(r,u),r}function La(r,s,a,u){var h=s.current,p=Tt(),y=fr(h);return a=fp(a),s.context===null?s.context=a:s.pendingContext=a,s=Dn(p,y),s.payload={element:r},u=u===void 0?null:u,u!==null&&(s.callback=u),r=cr(h,s,y),r!==null&&(hn(r,h,y,p),ha(r,h,y)),y}function Da(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function pp(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Ru(r,s){pp(r,s),(r=r.alternate)&&pp(r,s)}function d0(){return null}var gp=typeof reportError=="function"?reportError:function(r){console.error(r)};function ju(r){this._internalRoot=r}Ma.prototype.render=ju.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));La(r,s,null,null)},Ma.prototype.unmount=ju.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Hr(function(){La(null,r,null,null)}),s[jn]=null}};function Ma(r){this._internalRoot=r}Ma.prototype.unstable_scheduleHydration=function(r){if(r){var s=Xh();r={blockedOn:null,target:r,priority:s};for(var a=0;a<tr.length&&s!==0&&s<tr[a].priority;a++);tr.splice(a,0,r),a===0&&tf(r)}};function Pu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Fa(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function vp(){}function h0(r,s,a,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var W=Da(y);p.call(W)}}var y=mp(s,u,r,0,null,!1,!1,"",vp);return r._reactRootContainer=y,r[jn]=y.current,ki(r.nodeType===8?r.parentNode:r),Hr(),y}for(;h=r.lastChild;)r.removeChild(h);if(typeof u=="function"){var I=u;u=function(){var W=Da(O);I.call(W)}}var O=Iu(r,0,!1,null,null,!1,!1,"",vp);return r._reactRootContainer=O,r[jn]=O.current,ki(r.nodeType===8?r.parentNode:r),Hr(function(){La(s,O,a,u)}),O}function Ua(r,s,a,u,h){var p=a._reactRootContainer;if(p){var y=p;if(typeof h=="function"){var I=h;h=function(){var O=Da(y);I.call(O)}}La(s,y,r,h)}else y=h0(a,s,r,h,u);return Da(y)}Yh=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ui(s.pendingLanes);a!==0&&(nc(s,a|1),Ft(s,nt()),!(je&6)&&(As=nt()+500,ar()))}break;case 13:Hr(function(){var u=Ln(r,1);if(u!==null){var h=Tt();hn(u,r,1,h)}}),Ru(r,1)}},rc=function(r){if(r.tag===13){var s=Ln(r,134217728);if(s!==null){var a=Tt();hn(s,r,134217728,a)}Ru(r,134217728)}},Jh=function(r){if(r.tag===13){var s=fr(r),a=Ln(r,s);if(a!==null){var u=Tt();hn(a,r,s,u)}Ru(r,s)}},Xh=function(){return Le},Zh=function(r,s){var a=Le;try{return Le=r,s()}finally{Le=a}},Kl=function(r,s,a){switch(s){case"input":if(st(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==r&&u.form===r.form){var h=na(u);if(!h)throw Error(t(90));ze(u),st(u,h)}}}break;case"textarea":at(r,a);break;case"select":s=a.value,s!=null&&Vt(r,!!a.multiple,s,!1)}},Mh=Su,Fh=Hr;var f0={usingClientEntryPoint:!1,Events:[Ti,xs,na,Lh,Dh,Su]},Wi={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m0={bundleType:Wi.bundleType,version:Wi.version,rendererPackageName:Wi.rendererPackageName,rendererConfig:Wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Wh(r),r===null?null:r.stateNode},findFiberByHostInstance:Wi.findFiberByHostInstance||d0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{Mo=za.inject(m0),xn=za}catch{}}return Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f0,Ut.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pu(s))throw Error(t(200));return u0(r,s,null,a)},Ut.createRoot=function(r,s){if(!Pu(r))throw Error(t(299));var a=!1,u="",h=gp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=Iu(r,1,!1,null,null,a,!1,u,h),r[jn]=s.current,ki(r.nodeType===8?r.parentNode:r),new ju(s)},Ut.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Wh(s),r=r===null?null:r.stateNode,r},Ut.flushSync=function(r){return Hr(r)},Ut.hydrate=function(r,s,a){if(!Fa(s))throw Error(t(200));return Ua(null,r,s,!0,a)},Ut.hydrateRoot=function(r,s,a){if(!Pu(r))throw Error(t(405));var u=a!=null&&a.hydratedSources||null,h=!1,p="",y=gp;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),s=mp(s,null,r,1,a??null,h,!1,p,y),r[jn]=s.current,ki(r),u)for(r=0;r<u.length;r++)a=u[r],h=a._getVersion,h=h(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,h]:s.mutableSourceEagerHydrationData.push(a,h);return new Ma(s)},Ut.render=function(r,s,a){if(!Fa(s))throw Error(t(200));return Ua(null,r,s,!1,a)},Ut.unmountComponentAtNode=function(r){if(!Fa(r))throw Error(t(40));return r._reactRootContainer?(Hr(function(){Ua(null,null,r,!1,function(){r._reactRootContainer=null,r[jn]=null})}),!0):!1},Ut.unstable_batchedUpdates=Su,Ut.unstable_renderSubtreeIntoContainer=function(r,s,a,u){if(!Fa(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Ua(r,s,a,!1,u)},Ut.version="18.3.1-next-f1338f8080-20240426",Ut}var kp;function S0(){if(kp)return Lu.exports;kp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lu.exports=N0(),Lu.exports}var bp;function E0(){if(bp)return Va;bp=1;var n=S0();return Va.createRoot=n.createRoot,Va.hydrateRoot=n.hydrateRoot,Va}var k0=E0(),Bi={},Cp;function b0(){if(Cp)return Bi;Cp=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.parse=d,Bi.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function d(v,N){const E=new c,L=v.length;if(L<2)return E;const P=(N==null?void 0:N.decode)||_;let S=0;do{const T=v.indexOf("=",S);if(T===-1)break;const C=v.indexOf(";",S),D=C===-1?L:C;if(T>D){S=v.lastIndexOf(";",T-1)+1;continue}const z=f(v,S,T),V=m(v,T,z),b=v.slice(z,V);if(E[b]===void 0){let x=f(v,T+1,D),k=m(v,D,x);const A=P(v.slice(x,k));E[b]=A}S=D+1}while(S<L);return E}function f(v,N,E){do{const L=v.charCodeAt(N);if(L!==32&&L!==9)return N}while(++N<E);return E}function m(v,N,E){for(;N>E;){const L=v.charCodeAt(--N);if(L!==32&&L!==9)return N+1}return E}function g(v,N,E){const L=(E==null?void 0:E.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const P=L(N);if(!e.test(P))throw new TypeError(`argument val is invalid: ${N}`);let S=v+"="+P;if(!E)return S;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);S+="; Max-Age="+E.maxAge}if(E.domain){if(!t.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);S+="; Domain="+E.domain}if(E.path){if(!i.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);S+="; Path="+E.path}if(E.expires){if(!w(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);S+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(S+="; HttpOnly"),E.secure&&(S+="; Secure"),E.partitioned&&(S+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return S}function _(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function w(v){return o.call(v)==="[object Date]"}return Bi}b0();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tp="popstate";function C0(n={}){function e(i,o){let{pathname:c,search:d,hash:f}=i.location;return nd("",{pathname:c,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:so(o)}return I0(e,t,null,n)}function Qe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T0(){return Math.random().toString(36).substring(2,10)}function Ip(n,e){return{usr:n.state,key:n.key,idx:e}}function nd(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ys(e):e,state:t,key:e&&e.key||i||T0()}}function so({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ys(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function I0(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,f="POP",m=null,g=_();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function _(){return(d.state||{idx:null}).idx}function w(){f="POP";let P=_(),S=P==null?null:P-g;g=P,m&&m({action:f,location:L.location,delta:S})}function v(P,S){f="PUSH";let T=nd(L.location,P,S);g=_()+1;let C=Ip(T,g),D=L.createHref(T);try{d.pushState(C,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;o.location.assign(D)}c&&m&&m({action:f,location:L.location,delta:1})}function N(P,S){f="REPLACE";let T=nd(L.location,P,S);g=_();let C=Ip(T,g),D=L.createHref(T);d.replaceState(C,"",D),c&&m&&m({action:f,location:L.location,delta:0})}function E(P){let S=o.location.origin!=="null"?o.location.origin:o.location.href,T=typeof P=="string"?P:so(P);return T=T.replace(/ $/,"%20"),Qe(S,`No window.location.(origin|href) available to create URL for href: ${T}`),new URL(T,S)}let L={get action(){return f},get location(){return n(o,d)},listen(P){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Tp,w),m=P,()=>{o.removeEventListener(Tp,w),m=null}},createHref(P){return e(o,P)},createURL:E,encodeLocation(P){let S=E(P);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:N,go(P){return d.go(P)}};return L}function Hg(n,e,t="/"){return R0(n,e,t,!1)}function R0(n,e,t,i){let o=typeof e=="string"?Ys(e):e,c=Tr(o.pathname||"/",t);if(c==null)return null;let d=qg(n);j0(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let g=W0(c);f=z0(d[m],g,i)}return f}function qg(n,e=[],t=[],i=""){let o=(c,d,f)=>{let m={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};m.relativePath.startsWith("/")&&(Qe(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let g=Wn([i,m.relativePath]),_=t.concat(m);c.children&&c.children.length>0&&(Qe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),qg(c.children,e,_,g)),!(c.path==null&&!c.index)&&e.push({path:g,score:F0(g,c.index),routesMeta:_})};return n.forEach((c,d)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))o(c,d);else for(let m of Gg(c.path))o(c,d,m)}),e}function Gg(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=Gg(i.join("/")),f=[];return f.push(...d.map(m=>m===""?c:[c,m].join("/"))),o&&f.push(...d),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function j0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:U0(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var P0=/^:[\w-]+$/,A0=3,O0=2,L0=1,D0=10,M0=-2,Rp=n=>n==="*";function F0(n,e){let t=n.split("/"),i=t.length;return t.some(Rp)&&(i+=M0),e&&(i+=O0),t.filter(o=>!Rp(o)).reduce((o,c)=>o+(P0.test(c)?A0:c===""?L0:D0),i)}function U0(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function z0(n,e,t=!1){let{routesMeta:i}=n,o={},c="/",d=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,_=c==="/"?e:e.slice(c.length)||"/",w=el({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),v=m.route;if(!w&&g&&t&&!i[i.length-1].route.index&&(w=el({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:Wn([c,w.pathname]),pathnameBase:q0(Wn([c,w.pathnameBase])),route:v}),w.pathnameBase!=="/"&&(c=Wn([c,w.pathnameBase]))}return d}function el(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=V0(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:w},v)=>{if(_==="*"){let E=f[v]||"";d=c.slice(0,c.length-E.length).replace(/(.)\/+$/,"$1")}const N=f[v];return w&&!N?g[_]=void 0:g[_]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:n}}function V0(n,e=!1,t=!0){vn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function W0(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Tr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function $0(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ys(n):n;return{pathname:t?t.startsWith("/")?t:B0(t,e):e,search:G0(i),hash:Q0(o)}}function B0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Fu(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H0(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rd(n){let e=H0(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function jd(n,e,t,i=!1){let o;typeof n=="string"?o=Ys(n):(o={...n},Qe(!o.pathname||!o.pathname.includes("?"),Fu("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),Fu("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),Fu("#","search","hash",o)));let c=n===""||o.pathname==="",d=c?"/":o.pathname,f;if(d==null)f=t;else{let w=e.length-1;if(!i&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),w-=1;o.pathname=v.join("/")}f=w>=0?e[w]:"/"}let m=$0(o,f),g=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var Wn=n=>n.join("/").replace(/\/\/+/g,"/"),q0=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),G0=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Q0=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function K0(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Qg=["POST","PUT","PATCH","DELETE"];new Set(Qg);var Y0=["GET",...Qg];new Set(Y0);var Js=R.createContext(null);Js.displayName="DataRouter";var kl=R.createContext(null);kl.displayName="DataRouterState";var Kg=R.createContext({isTransitioning:!1});Kg.displayName="ViewTransition";var J0=R.createContext(new Map);J0.displayName="Fetchers";var X0=R.createContext(null);X0.displayName="Await";var _n=R.createContext(null);_n.displayName="Navigation";var _o=R.createContext(null);_o.displayName="Location";var Cn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Cn.displayName="Route";var Pd=R.createContext(null);Pd.displayName="RouteError";function Z0(n,{relative:e}={}){Qe(Xs(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=R.useContext(_n),{hash:o,pathname:c,search:d}=wo(n,{relative:e}),f=c;return t!=="/"&&(f=c==="/"?t:Wn([t,c])),i.createHref({pathname:f,search:d,hash:o})}function Xs(){return R.useContext(_o)!=null}function Pr(){return Qe(Xs(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(_o).location}var Yg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jg(n){R.useContext(_n).static||R.useLayoutEffect(n)}function xo(){let{isDataRoute:n}=R.useContext(Cn);return n?hw():ew()}function ew(){Qe(Xs(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Js),{basename:e,navigator:t}=R.useContext(_n),{matches:i}=R.useContext(Cn),{pathname:o}=Pr(),c=JSON.stringify(Rd(i)),d=R.useRef(!1);return Jg(()=>{d.current=!0}),R.useCallback((m,g={})=>{if(vn(d.current,Yg),!d.current)return;if(typeof m=="number"){t.go(m);return}let _=jd(m,JSON.parse(c),o,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Wn([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,c,o,n])}R.createContext(null);function wo(n,{relative:e}={}){let{matches:t}=R.useContext(Cn),{pathname:i}=Pr(),o=JSON.stringify(Rd(t));return R.useMemo(()=>jd(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function tw(n,e){return Xg(n,e)}function Xg(n,e,t,i){var T;Qe(Xs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:c}=R.useContext(_n),{matches:d}=R.useContext(Cn),f=d[d.length-1],m=f?f.params:{},g=f?f.pathname:"/",_=f?f.pathnameBase:"/",w=f&&f.route;{let C=w&&w.path||"";Zg(g,!w||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=Pr(),N;if(e){let C=typeof e=="string"?Ys(e):e;Qe(_==="/"||((T=C.pathname)==null?void 0:T.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${C.pathname}" was given in the \`location\` prop.`),N=C}else N=v;let E=N.pathname||"/",L=E;if(_!=="/"){let C=_.replace(/^\//,"").split("/");L="/"+E.replace(/^\//,"").split("/").slice(C.length).join("/")}let P=!c&&t&&t.matches&&t.matches.length>0?t.matches:Hg(n,{pathname:L});vn(w||P!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),vn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=ow(P&&P.map(C=>Object.assign({},C,{params:Object.assign({},m,C.params),pathname:Wn([_,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?_:Wn([_,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),d,t,i);return e&&S?R.createElement(_o.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},S):S}function nw(){let n=dw(),e=K0(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:c},"ErrorBoundary")," or"," ",R.createElement("code",{style:c},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:o},t):null,d)}var rw=R.createElement(nw,null),sw=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?R.createElement(Cn.Provider,{value:this.props.routeContext},R.createElement(Pd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iw({routeContext:n,match:e,children:t}){let i=R.useContext(Js);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Cn.Provider,{value:n},t)}function ow(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t==null?void 0:t.errors;if(c!=null){let m=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);Qe(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,f=-1;if(t)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:_,errors:w}=t,v=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||v){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((m,g,_)=>{let w,v=!1,N=null,E=null;t&&(w=c&&g.route.id?c[g.route.id]:void 0,N=g.route.errorElement||rw,d&&(f<0&&_===0?(Zg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,E=null):f===_&&(v=!0,E=g.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,_+1)),P=()=>{let S;return w?S=N:v?S=E:g.route.Component?S=R.createElement(g.route.Component,null):g.route.element?S=g.route.element:S=m,R.createElement(iw,{match:g,routeContext:{outlet:m,matches:L,isDataRoute:t!=null},children:S})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?R.createElement(sw,{location:t.location,revalidation:t.revalidation,component:N,error:w,children:P(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):P()},null)}function Ad(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aw(n){let e=R.useContext(Js);return Qe(e,Ad(n)),e}function lw(n){let e=R.useContext(kl);return Qe(e,Ad(n)),e}function cw(n){let e=R.useContext(Cn);return Qe(e,Ad(n)),e}function Od(n){let e=cw(n),t=e.matches[e.matches.length-1];return Qe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function uw(){return Od("useRouteId")}function dw(){var i;let n=R.useContext(Pd),e=lw("useRouteError"),t=Od("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function hw(){let{router:n}=aw("useNavigate"),e=Od("useNavigate"),t=R.useRef(!1);return Jg(()=>{t.current=!0}),R.useCallback(async(o,c={})=>{vn(t.current,Yg),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...c}))},[n,e])}var jp={};function Zg(n,e,t){!e&&!jp[n]&&(jp[n]=!0,vn(!1,t))}R.memo(fw);function fw({routes:n,future:e,state:t}){return Xg(n,void 0,t,e)}function rd({to:n,replace:e,state:t,relative:i}){Qe(Xs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(_n);vn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=R.useContext(Cn),{pathname:d}=Pr(),f=xo(),m=jd(n,Rd(c),d,i==="path"),g=JSON.stringify(m);return R.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:i})},[f,g,i,e,t]),null}function Kr(n){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mw({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:c=!1}){Qe(!Xs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),f=R.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof t=="string"&&(t=Ys(t));let{pathname:m="/",search:g="",hash:_="",state:w=null,key:v="default"}=t,N=R.useMemo(()=>{let E=Tr(m,d);return E==null?null:{location:{pathname:E,search:g,hash:_,state:w,key:v},navigationType:i}},[d,m,g,_,w,v,i]);return vn(N!=null,`<Router basename="${d}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:R.createElement(_n.Provider,{value:f},R.createElement(_o.Provider,{children:e,value:N}))}function pw({children:n,location:e}){return tw(sd(n),e)}function sd(n,e=[]){let t=[];return R.Children.forEach(n,(i,o)=>{if(!R.isValidElement(i))return;let c=[...e,o];if(i.type===R.Fragment){t.push.apply(t,sd(i.props.children,c));return}Qe(i.type===Kr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=sd(i.props.children,c)),t.push(d)}),t}var qa="get",Ga="application/x-www-form-urlencoded";function bl(n){return n!=null&&typeof n.tagName=="string"}function gw(n){return bl(n)&&n.tagName.toLowerCase()==="button"}function vw(n){return bl(n)&&n.tagName.toLowerCase()==="form"}function yw(n){return bl(n)&&n.tagName.toLowerCase()==="input"}function _w(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xw(n,e){return n.button===0&&(!e||e==="_self")&&!_w(n)}var Wa=null;function ww(){if(Wa===null)try{new FormData(document.createElement("form"),0),Wa=!1}catch{Wa=!0}return Wa}var Nw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uu(n){return n!=null&&!Nw.has(n)?(vn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ga}"`),null):n}function Sw(n,e){let t,i,o,c,d;if(vw(n)){let f=n.getAttribute("action");i=f?Tr(f,e):null,t=n.getAttribute("method")||qa,o=Uu(n.getAttribute("enctype"))||Ga,c=new FormData(n)}else if(gw(n)||yw(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?Tr(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||qa,o=Uu(n.getAttribute("formenctype"))||Uu(f.getAttribute("enctype"))||Ga,c=new FormData(f,n),!ww()){let{name:g,type:_,value:w}=n;if(_==="image"){let v=g?`${g}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else g&&c.append(g,w)}}else{if(bl(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qa,i=null,o=Ga,d=n}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:c,body:d}}function Ld(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Ew(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kw(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bw(n,e,t){let i=await Promise.all(n.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await Ew(c,t);return d.links?d.links():[]}return[]}));return Rw(i.flat(1).filter(kw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Pp(n,e,t,i,o,c){let d=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>{var _;return t[g].pathname!==m.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return c==="assets"?e.filter((m,g)=>d(m,g)||f(m,g)):c==="data"?e.filter((m,g)=>{var w;let _=i.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(d(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Cw(n,e,{includeHydrateFallback:t}={}){return Tw(n.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function Tw(n){return[...new Set(n)]}function Iw(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Rw(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let c=JSON.stringify(Iw(o));return t.has(c)||(t.add(c),i.push({key:c,link:o})),i},[])}function jw(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Pw(){let n=R.useContext(Js);return Ld(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Aw(){let n=R.useContext(kl);return Ld(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Dd=R.createContext(void 0);Dd.displayName="FrameworkContext";function ev(){let n=R.useContext(Dd);return Ld(n,"You must render this element inside a <HydratedRouter> element"),n}function Ow(n,e){let t=R.useContext(Dd),[i,o]=R.useState(!1),[c,d]=R.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:w}=e,v=R.useRef(null);R.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let L=S=>{S.forEach(T=>{d(T.isIntersecting)})},P=new IntersectionObserver(L,{threshold:.5});return v.current&&P.observe(v.current),()=>{P.disconnect()}}},[n]),R.useEffect(()=>{if(i){let L=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(L)}}},[i]);let N=()=>{o(!0)},E=()=>{o(!1),d(!1)};return t?n!=="intent"?[c,v,{}]:[c,v,{onFocus:Hi(f,N),onBlur:Hi(m,E),onMouseEnter:Hi(g,N),onMouseLeave:Hi(_,E),onTouchStart:Hi(w,N)}]:[!1,v,{}]}function Hi(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Lw({page:n,...e}){let{router:t}=Pw(),i=R.useMemo(()=>Hg(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?R.createElement(Mw,{page:n,matches:i,...e}):null}function Dw(n){let{manifest:e,routeModules:t}=ev(),[i,o]=R.useState([]);return R.useEffect(()=>{let c=!1;return bw(n,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[n,e,t]),i}function Mw({page:n,matches:e,...t}){let i=Pr(),{manifest:o,routeModules:c}=ev(),{loaderData:d,matches:f}=Aw(),m=R.useMemo(()=>Pp(n,e,f,o,i,"data"),[n,e,f,o,i]),g=R.useMemo(()=>Pp(n,e,f,o,i,"assets"),[n,e,f,o,i]),_=R.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,E=!1;if(e.forEach(P=>{var T;let S=o.routes[P.route.id];!S||!S.hasLoader||(!m.some(C=>C.route.id===P.route.id)&&P.route.id in d&&((T=c[P.route.id])!=null&&T.shouldRevalidate)||S.hasClientLoader?E=!0:N.add(P.route.id))}),N.size===0)return[];let L=jw(n);return E&&N.size>0&&L.searchParams.set("_routes",e.filter(P=>N.has(P.route.id)).map(P=>P.route.id).join(",")),[L.pathname+L.search]},[d,i,o,m,e,n,c]),w=R.useMemo(()=>Cw(g,o),[g,o]),v=Dw(g);return R.createElement(R.Fragment,null,_.map(N=>R.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),w.map(N=>R.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),v.map(({key:N,link:E})=>R.createElement("link",{key:N,...E})))}function Fw(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tv&&(window.__reactRouterVersion="7.2.0")}catch{}function Uw({basename:n,children:e,window:t}){let i=R.useRef();i.current==null&&(i.current=C0({window:t,v5Compat:!0}));let o=i.current,[c,d]=R.useState({action:o.action,location:o.location}),f=R.useCallback(m=>{R.startTransition(()=>d(m))},[d]);return R.useLayoutEffect(()=>o.listen(f),[o,f]),R.createElement(mw,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o})}var nv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rv=R.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:f,target:m,to:g,preventScrollReset:_,viewTransition:w,...v},N){let{basename:E}=R.useContext(_n),L=typeof g=="string"&&nv.test(g),P,S=!1;if(typeof g=="string"&&L&&(P=g,tv))try{let k=new URL(window.location.href),A=g.startsWith("//")?new URL(k.protocol+g):new URL(g),H=Tr(A.pathname,E);A.origin===k.origin&&H!=null?g=H+A.search+A.hash:S=!0}catch{vn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=Z0(g,{relative:o}),[C,D,z]=Ow(i,v),V=$w(g,{replace:d,state:f,target:m,preventScrollReset:_,relative:o,viewTransition:w});function b(k){e&&e(k),k.defaultPrevented||V(k)}let x=R.createElement("a",{...v,...z,href:P||T,onClick:S||c?e:b,ref:Fw(N,D),target:m,"data-discover":!L&&t==="render"?"true":void 0});return C&&!L?R.createElement(R.Fragment,null,x,R.createElement(Lw,{page:T})):x});rv.displayName="Link";var zw=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:f,children:m,...g},_){let w=wo(d,{relative:g.relative}),v=Pr(),N=R.useContext(kl),{navigator:E,basename:L}=R.useContext(_n),P=N!=null&&Qw(w)&&f===!0,S=E.encodeLocation?E.encodeLocation(w).pathname:w.pathname,T=v.pathname,C=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(T=T.toLowerCase(),C=C?C.toLowerCase():null,S=S.toLowerCase()),C&&L&&(C=Tr(C,L)||C);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let z=T===S||!o&&T.startsWith(S)&&T.charAt(D)==="/",V=C!=null&&(C===S||!o&&C.startsWith(S)&&C.charAt(S.length)==="/"),b={isActive:z,isPending:V,isTransitioning:P},x=z?e:void 0,k;typeof i=="function"?k=i(b):k=[i,z?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let A=typeof c=="function"?c(b):c;return R.createElement(rv,{...g,"aria-current":x,className:k,ref:_,style:A,to:d,viewTransition:f},typeof m=="function"?m(b):m)});zw.displayName="NavLink";var Vw=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:c,method:d=qa,action:f,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:w,...v},N)=>{let E=qw(),L=Gw(f,{relative:g}),P=d.toLowerCase()==="get"?"get":"post",S=typeof f=="string"&&nv.test(f),T=C=>{if(m&&m(C),C.defaultPrevented)return;C.preventDefault();let D=C.nativeEvent.submitter,z=(D==null?void 0:D.getAttribute("formmethod"))||d;E(D||C.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:o,state:c,relative:g,preventScrollReset:_,viewTransition:w})};return R.createElement("form",{ref:N,method:P,action:L,onSubmit:i?m:T,...v,"data-discover":!S&&n==="render"?"true":void 0})});Vw.displayName="Form";function Ww(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sv(n){let e=R.useContext(Js);return Qe(e,Ww(n)),e}function $w(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let f=xo(),m=Pr(),g=wo(n,{relative:c});return R.useCallback(_=>{if(xw(_,e)){_.preventDefault();let w=t!==void 0?t:so(m)===so(g);f(n,{replace:w,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[m,f,g,t,i,e,n,o,c,d])}var Bw=0,Hw=()=>`__${String(++Bw)}__`;function qw(){let{router:n}=sv("useSubmit"),{basename:e}=R.useContext(_n),t=uw();return R.useCallback(async(i,o={})=>{let{action:c,method:d,encType:f,formData:m,body:g}=Sw(i,e);if(o.navigate===!1){let _=o.fetcherKey||Hw();await n.fetch(_,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||d,formEncType:o.encType||f,flushSync:o.flushSync})}else await n.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||d,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function Gw(n,{relative:e}={}){let{basename:t}=R.useContext(_n),i=R.useContext(Cn);Qe(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...wo(n||".",{relative:e})},d=Pr();if(n==null){c.search=d.search;let f=new URLSearchParams(c.search),m=f.getAll("index");if(m.some(_=>_==="")){f.delete("index"),m.filter(w=>w).forEach(w=>f.append("index",w));let _=f.toString();c.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Wn([t,c.pathname])),so(c)}function Qw(n,e={}){let t=R.useContext(Kg);Qe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=sv("useViewTransitionState"),o=wo(n,{relative:e.relative});if(!t.isTransitioning)return!1;let c=Tr(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=Tr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return el(o.pathname,d)!=null||el(o.pathname,c)!=null}new TextEncoder;const Kw=()=>{};var Ap={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(n,e){if(!n)throw Zs(e)},Zs=function(n){return new Error("Firebase Database ("+iv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Yw=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=n[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=n[t++],d=n[t++],f=n[t++],m=((o&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const c=n[t++],d=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Md={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const c=n[o],d=o+1<n.length,f=d?n[o+1]:0,m=o+2<n.length,g=m?n[o+2]:0,_=c>>2,w=(c&3)<<4|f>>4;let v=(f&15)<<2|g>>6,N=g&63;m||(N=64,d||(v=64)),i.push(t[_],t[w],t[v],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ov(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Yw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const c=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,c==null||f==null||g==null||w==null)throw new Jw;const v=c<<2|f>>4;if(i.push(v),g!==64){const N=f<<4&240|g>>2;if(i.push(N),w!==64){const E=g<<6&192|w;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Jw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const av=function(n){const e=ov(n);return Md.encodeByteArray(e,!0)},tl=function(n){return av(n).replace(/\./g,"")},nl=function(n){try{return Md.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n){return lv(void 0,n)}function lv(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Zw(t)||(n[t]=lv(n[t],e[t]));return n}function Zw(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=()=>eN().__FIREBASE_DEFAULTS__,nN=()=>{if(typeof process>"u"||typeof Ap>"u")return;const n=Ap.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nl(n[1]);return e&&JSON.parse(e)},Fd=()=>{try{return Kw()||tN()||nN()||rN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cv=n=>{var e,t;return(t=(e=Fd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sN=n=>{const e=cv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},uv=()=>{var n;return(n=Fd())===null||n===void 0?void 0:n.config},dv=n=>{var e;return(e=Fd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tl(JSON.stringify(t)),tl(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ud(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function oN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lN(){const n=jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cN(){return iv.NODE_ADMIN===!0}function uN(){try{return typeof indexedDB=="object"}catch{return!1}}function dN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="FirebaseError";class Ar extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=hN,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,So.prototype.create)}}class So{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?fN(c,i):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Ar(o,f,i)}}function fN(n,e){return n.replace(mN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const mN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(n){return JSON.parse(n)}function dt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=function(n){let e={},t={},i={},o="";try{const c=n.split(".");e=io(nl(c[0])||""),t=io(nl(c[1])||""),o=c[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:o}},pN=function(n){const e=fv(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},gN=function(n){const e=fv(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function $s(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function id(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rl(n,e,t){const i={};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=e.call(t,n[o],o,n));return i}function es(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=n[o],d=e[o];if(Op(c)&&Op(d)){if(!es(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Op(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yi(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Ji(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let w=0;w<16;w++)i[w]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let w=0;w<16;w++)i[w]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let w=16;w<80;w++){const v=i[w-3]^i[w-8]^i[w-14]^i[w-16];i[w]=(v<<1|v>>>31)&4294967295}let o=this.chain_[0],c=this.chain_[1],d=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,_;for(let w=0;w<80;w++){w<40?w<20?(g=f^c&(d^f),_=1518500249):(g=c^d^f,_=1859775393):w<60?(g=c&d|f&(c|d),_=2400959708):(g=c^d^f,_=3395469782);const v=(o<<5|o>>>27)+g+m+_+i[w]&4294967295;m=f,f=d,d=(c<<30|c>>>2)&4294967295,c=o,o=v}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let o=0;const c=this.buf_;let d=this.inbuf_;for(;o<t;){if(d===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(c[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}else for(;o<t;)if(c[d]=e[o],++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let c=24;c>=0;c-=8)e[i]=this.chain_[o]>>c&255,++i;return e}}function yN(n,e){const t=new _N(n,e);return t.subscribe.bind(t)}class _N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");xN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=zu),o.error===void 0&&(o.error=zu),o.complete===void 0&&(o.complete=zu);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zu(){}function Cl(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);if(o>=55296&&o<=56319){const c=o-55296;i++,ne(i<n.length,"Surrogate pair missing trail surrogate.");const d=n.charCodeAt(i)-56320;o=65536+(c<<10)+d}o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):o<65536?(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Tl=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(n){return n&&n._delegate?n._delegate:n}class ts{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new No;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EN(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);i===f&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SN(n){return n===Yr?void 0:n}function EN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const bN={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},CN=Fe.INFO,TN={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},IN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=TN[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zd{constructor(e){this.name=e,this._logLevel=CN,this._logHandler=IN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const RN=(n,e)=>e.some(t=>n instanceof t);let Lp,Dp;function jN(){return Lp||(Lp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PN(){return Dp||(Dp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mv=new WeakMap,od=new WeakMap,pv=new WeakMap,Vu=new WeakMap,Vd=new WeakMap;function AN(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Sr(n.result)),o()},d=()=>{i(n.error),o()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&mv.set(t,n)}).catch(()=>{}),Vd.set(e,n),e}function ON(n){if(od.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});od.set(n,e)}let ad={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return od.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LN(n){ad=n(ad)}function DN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Wu(this),e,...t);return pv.set(i,e.sort?e.sort():[e]),Sr(i)}:PN().includes(n)?function(...e){return n.apply(Wu(this),e),Sr(mv.get(this))}:function(...e){return Sr(n.apply(Wu(this),e))}}function MN(n){return typeof n=="function"?DN(n):(n instanceof IDBTransaction&&ON(n),RN(n,jN())?new Proxy(n,ad):n)}function Sr(n){if(n instanceof IDBRequest)return AN(n);if(Vu.has(n))return Vu.get(n);const e=MN(n);return e!==n&&(Vu.set(n,e),Vd.set(e,n)),e}const Wu=n=>Vd.get(n);function FN(n,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(n,e),f=Sr(d);return i&&d.addEventListener("upgradeneeded",m=>{i(Sr(d.result),m.oldVersion,m.newVersion,Sr(d.transaction),m)}),t&&d.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const UN=["get","getKey","getAll","getAllKeys","count"],zN=["put","add","delete","clear"],$u=new Map;function Mp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($u.get(e))return $u.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=zN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||UN.includes(t)))return;const c=async function(d,...f){const m=this.transaction(d,o?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),o&&m.done]))[0]};return $u.set(e,c),c}LN(n=>({...n,get:(e,t,i)=>Mp(e,t)||n.get(e,t,i),has:(e,t)=>!!Mp(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function WN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ld="@firebase/app",Fp="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new zd("@firebase/app"),$N="@firebase/app-compat",BN="@firebase/analytics-compat",HN="@firebase/analytics",qN="@firebase/app-check-compat",GN="@firebase/app-check",QN="@firebase/auth",KN="@firebase/auth-compat",YN="@firebase/database",JN="@firebase/data-connect",XN="@firebase/database-compat",ZN="@firebase/functions",eS="@firebase/functions-compat",tS="@firebase/installations",nS="@firebase/installations-compat",rS="@firebase/messaging",sS="@firebase/messaging-compat",iS="@firebase/performance",oS="@firebase/performance-compat",aS="@firebase/remote-config",lS="@firebase/remote-config-compat",cS="@firebase/storage",uS="@firebase/storage-compat",dS="@firebase/firestore",hS="@firebase/vertexai",fS="@firebase/firestore-compat",mS="firebase",pS="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="[DEFAULT]",gS={[ld]:"fire-core",[$N]:"fire-core-compat",[HN]:"fire-analytics",[BN]:"fire-analytics-compat",[GN]:"fire-app-check",[qN]:"fire-app-check-compat",[QN]:"fire-auth",[KN]:"fire-auth-compat",[YN]:"fire-rtdb",[JN]:"fire-data-connect",[XN]:"fire-rtdb-compat",[ZN]:"fire-fn",[eS]:"fire-fn-compat",[tS]:"fire-iid",[nS]:"fire-iid-compat",[rS]:"fire-fcm",[sS]:"fire-fcm-compat",[iS]:"fire-perf",[oS]:"fire-perf-compat",[aS]:"fire-rc",[lS]:"fire-rc-compat",[cS]:"fire-gcs",[uS]:"fire-gcs-compat",[dS]:"fire-fst",[fS]:"fire-fst-compat",[hS]:"fire-vertex","fire-js":"fire-js",[mS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,vS=new Map,ud=new Map;function Up(n,e){try{n.container.addComponent(e)}catch(t){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bs(n){const e=n.name;if(ud.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;ud.set(e,n);for(const t of sl.values())Up(t,n);for(const t of vS.values())Up(t,n);return!0}function Wd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new So("app","Firebase",yS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=pS;function gv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:cd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Er.create("bad-app-name",{appName:String(o)});if(t||(t=uv()),!t)throw Er.create("no-options");const c=sl.get(o);if(c){if(es(t,c.options)&&es(i,c.config))return c;throw Er.create("duplicate-app",{appName:o})}const d=new kN(o);for(const m of ud.values())d.addComponent(m);const f=new _S(t,i,d);return sl.set(o,f),f}function vv(n=cd){const e=sl.get(n);if(!e&&n===cd&&uv())return gv();if(!e)throw Er.create("no-app",{appName:n});return e}function kr(n,e,t){var i;let o=(i=gS[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const f=[`Unable to register library "${o}" with version "${e}":`];c&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(f.join(" "));return}Bs(new ts(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebase-heartbeat-database",wS=1,oo="firebase-heartbeat-store";let Bu=null;function yv(){return Bu||(Bu=FN(xS,wS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Er.create("idb-open",{originalErrorMessage:n.message})})),Bu}async function NS(n){try{const t=(await yv()).transaction(oo),i=await t.objectStore(oo).get(_v(n));return await t.done,i}catch(e){if(e instanceof Ar)Hn.warn(e.message);else{const t=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(t.message)}}}async function zp(n,e){try{const i=(await yv()).transaction(oo,"readwrite");await i.objectStore(oo).put(e,_v(n)),await i.done}catch(t){if(t instanceof Ar)Hn.warn(t.message);else{const i=Er.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Hn.warn(i.message)}}}function _v(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=1024,ES=30;class kS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Vp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>ES){const d=TS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Hn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vp(),{heartbeatsToSend:i,unsentEntries:o}=bS(this._heartbeatsCache.heartbeats),c=tl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Hn.warn(t),""}}}function Vp(){return new Date().toISOString().substring(0,10)}function bS(n,e=SS){const t=[];let i=n.slice();for(const o of n){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Wp(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Wp(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class CS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uN()?dN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return zp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Wp(n){return tl(JSON.stringify({version:2,heartbeats:n})).length}function TS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n){Bs(new ts("platform-logger",e=>new VN(e),"PRIVATE")),Bs(new ts("heartbeat",e=>new kS(e),"PRIVATE")),kr(ld,Fp,n),kr(ld,Fp,"esm2017"),kr("fire-js","")}IS("");function $d(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function xv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RS=xv,wv=new So("auth","Firebase",xv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new zd("@firebase/auth");function jS(n,...e){il.logLevel<=Fe.WARN&&il.warn(`Auth (${ti}): ${n}`,...e)}function Qa(n,...e){il.logLevel<=Fe.ERROR&&il.error(`Auth (${ti}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,...e){throw Bd(n,...e)}function kn(n,...e){return Bd(n,...e)}function Nv(n,e,t){const i=Object.assign(Object.assign({},RS()),{[e]:t});return new So("auth","Firebase",i).create(e,{appName:n.name})}function $n(n){return Nv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bd(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return wv.create(n,...e)}function _e(n,e,...t){if(!n)throw Bd(e,...t)}function Un(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qa(e),new Error(e)}function qn(n,e){n||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function PS(){return $p()==="http:"||$p()==="https:"}function $p(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PS()||aN()||"connection"in navigator)?navigator.onLine:!0}function OS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this.shortDelay=e,this.longDelay=t,qn(t>e,"Short delay should be less than long delay!"),this.isMobile=Ud()||hv()}get(){return AS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n,e){qn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MS=new Eo(3e4,6e4);function Or(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Lr(n,e,t,i,o={}){return Ev(n,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const f=ei(Object.assign({key:n.config.apiKey},d)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:m},c);return oN()||(g.referrerPolicy="no-referrer"),Sv.fetch()(await kv(n,n.config.apiHost,t,f),g)})}async function Ev(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},LS),e);try{const o=new US(n),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw $a(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw $a(n,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw $a(n,"email-already-in-use",d);if(m==="USER_DISABLED")throw $a(n,"user-disabled",d);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Nv(n,_,g);yn(n,_)}}catch(o){if(o instanceof Ar)throw o;yn(n,"network-request-failed",{message:String(o)})}}async function ko(n,e,t,i,o={}){const c=await Lr(n,e,t,i,o);return"mfaPendingCredential"in c&&yn(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function kv(n,e,t,i){const o=`${e}${t}?${i}`,c=n,d=c.config.emulator?Hd(n.config,o):`${n.config.apiScheme}://${o}`;return DS.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function FS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class US{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(kn(this.auth,"network-request-failed")),MS.get())})}}function $a(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=kn(n,e,i);return o.customData._tokenResponse=t,o}function Bp(n){return n!==void 0&&n.enterprise!==void 0}class zS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return FS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VS(n,e){return Lr(n,"GET","/v2/recaptchaConfig",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(n,e){return Lr(n,"POST","/v1/accounts:delete",e)}async function ol(n,e){return Lr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $S(n,e=!1){const t=bt(n),i=await t.getIdToken(e),o=qd(i);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:i,authTime:Xi(Hu(o.auth_time)),issuedAtTime:Xi(Hu(o.iat)),expirationTime:Xi(Hu(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Hu(n){return Number(n)*1e3}function qd(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Qa("JWT malformed, contained fewer than 3 sections"),null;try{const o=nl(t);return o?JSON.parse(o):(Qa("Failed to decode base64 JWT payload"),null)}catch(o){return Qa("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Hp(n){const e=qd(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ar&&BS(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function BS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xi(this.lastLoginAt),this.creationTime=Xi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n){var e;const t=n.auth,i=await n.getIdToken(),o=await ao(n,ol(t,{idToken:i}));_e(o==null?void 0:o.users.length,t,"internal-error");const c=o.users[0];n._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?bv(c.providerUserInfo):[],f=GS(n.providerData,d),m=n.isAnonymous,g=!(n.email&&c.passwordHash)&&!(f!=null&&f.length),_=m?g:!1,w={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new hd(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function qS(n){const e=bt(n);await al(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GS(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function bv(n){return n.map(e=>{var{providerId:t}=e,i=$d(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(n,e){const t=await Ev(n,{},async()=>{const i=ei({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=n.config,d=await kv(n,o,"/v1/token",`key=${c}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",Sv.fetch()(d,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KS(n,e){return Lr(n,"POST","/v2/accounts:revokeToken",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=Hp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await QS(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,d=new Fs;return i&&(_e(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(_e(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(_e(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class mn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,c=$d(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new hd(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await ao(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $S(this,e)}reload(){return qS(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await al(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await ao(this,WS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,c,d,f,m,g,_;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,v=(o=t.email)!==null&&o!==void 0?o:void 0,N=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,E=(d=t.photoURL)!==null&&d!==void 0?d:void 0,L=(f=t.tenantId)!==null&&f!==void 0?f:void 0,P=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,S=(g=t.createdAt)!==null&&g!==void 0?g:void 0,T=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:C,emailVerified:D,isAnonymous:z,providerData:V,stsTokenManager:b}=t;_e(C&&b,e,"internal-error");const x=Fs.fromJSON(this.name,b);_e(typeof C=="string",e,"internal-error"),vr(w,e.name),vr(v,e.name),_e(typeof D=="boolean",e,"internal-error"),_e(typeof z=="boolean",e,"internal-error"),vr(N,e.name),vr(E,e.name),vr(L,e.name),vr(P,e.name),vr(S,e.name),vr(T,e.name);const k=new mn({uid:C,auth:e,email:v,emailVerified:D,displayName:w,isAnonymous:z,photoURL:E,phoneNumber:N,tenantId:L,stsTokenManager:x,createdAt:S,lastLoginAt:T});return V&&Array.isArray(V)&&(k.providerData=V.map(A=>Object.assign({},A))),P&&(k._redirectEventId=P),k}static async _fromIdTokenResponse(e,t,i=!1){const o=new Fs;o.updateFromServerResponse(t);const c=new mn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await al(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?bv(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),f=new Fs;f.updateFromIdToken(i);const m=new mn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new hd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=new Map;function zn(n){qn(n instanceof Function,"Expected a class definition");let e=qp.get(n);return e?(qn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qp.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cv.type="NONE";const Gp=Cv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(n,e,t){return`firebase:${n}:${e}:${t}`}class Us{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=Ka(this.userKey,o.apiKey,c),this.fullPersistenceKey=Ka("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ol(this.auth,{idToken:e}).catch(()=>{});return t?mn._fromGetAccountInfoResponse(this.auth,t,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Us(zn(Gp),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||zn(Gp);const d=Ka(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(d);if(_){let w;if(typeof _=="string"){const v=await ol(e,{idToken:_}).catch(()=>{});if(!v)break;w=await mn._fromGetAccountInfoResponse(e,v,_)}else w=mn._fromJSON(e,_);g!==c&&(f=w),c=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Us(c,e,i):(c=m[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Us(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Av(e))return"Blackberry";if(Ov(e))return"Webos";if(Iv(e))return"Safari";if((e.includes("chrome/")||Rv(e))&&!e.includes("edge/"))return"Chrome";if(Pv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Tv(n=jt()){return/firefox\//i.test(n)}function Iv(n=jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rv(n=jt()){return/crios\//i.test(n)}function jv(n=jt()){return/iemobile/i.test(n)}function Pv(n=jt()){return/android/i.test(n)}function Av(n=jt()){return/blackberry/i.test(n)}function Ov(n=jt()){return/webos/i.test(n)}function Gd(n=jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function YS(n=jt()){var e;return Gd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JS(){return lN()&&document.documentMode===10}function Lv(n=jt()){return Gd(n)||Pv(n)||Ov(n)||Av(n)||/windows phone/i.test(n)||jv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n,e=[]){let t;switch(n){case"Browser":t=Qp(jt());break;case"Worker":t=`${Qp(jt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ti}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((d,f)=>{try{const m=e(c);d(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",Or(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=6;class tE{constructor(e){var t,i,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:eE,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,c,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(c=m.containsUppercaseLetter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kp(this),this.idTokenSubscription=new Kp(this),this.beforeStateQueue=new XS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zn(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Us.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ol(this,{idToken:e}),i=await mn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&(m!=null&&m.user)&&(o=m.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await al(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject($n(this));const t=e?bt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZS(this),t=new tE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new So("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await KS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zn(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[zn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{d=!0,m()}}else{const m=e.addObserver(t);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&jS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function as(n){return bt(n)}class Kp{constructor(e){this.auth=e,this.observer=null,this.addObserver=yN(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rE(n){Il=n}function Mv(n){return Il.loadJS(n)}function sE(){return Il.recaptchaEnterpriseScript}function iE(){return Il.gapiScript}function oE(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class aE{constructor(){this.enterprise=new lE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lE{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cE="recaptcha-enterprise",Fv="NO_RECAPTCHA";class uE{constructor(e){this.type=cE,this.auth=as(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{VS(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new zS(m);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,d(g.siteKey)}}).catch(m=>{f(m)})})}function o(c,d,f){const m=window.grecaptcha;Bp(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(g=>{d(g)}).catch(()=>{d(Fv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aE().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(f=>{if(!t&&Bp(window.grecaptcha))o(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let m=sE();m.length!==0&&(m+=f),Mv(m).then(()=>{o(f,c,d)}).catch(g=>{d(g)})}}).catch(f=>{d(f)})})}}async function Yp(n,e,t,i=!1,o=!1){const c=new uE(n);let d;if(o)d=Fv;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function fd(n,e,t,i,o){var c;if(!((c=n._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Yp(n,e,t,t==="getOobCode");return i(n,d)}else return i(n,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Yp(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n,e){const t=Wd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(es(c,e??{}))return o;yn(o,"already-initialized")}return t.initialize({options:e})}function hE(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(zn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fE(n,e,t){const i=as(n);_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=Uv(e),{host:d,port:f}=mE(e),m=f===null?"":`:${f}`,g={url:`${c}//${d}${m}/`},_=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){_e(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_e(es(g,i.config.emulator)&&es(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,pE()}function Uv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mE(n){const e=Uv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:Jp(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:Jp(d)}}}function Jp(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pE(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,t){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function gE(n,e){return Lr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(n,e){return ko(n,"POST","/v1/accounts:signInWithPassword",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(n,e){return ko(n,"POST","/v1/accounts:signInWithEmailLink",Or(n,e))}async function _E(n,e){return ko(n,"POST","/v1/accounts:signInWithEmailLink",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Qd{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new lo(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new lo(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fd(e,t,"signInWithPassword",vE);case"emailLink":return yE(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fd(e,i,"signUpPassword",gE);case"emailLink":return _E(e,{idToken:t,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(n,e){return ko(n,"POST","/v1/accounts:signInWithIdp",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="http://localhost";class ns extends Qd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,c=$d(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new ns(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return zs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,zs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zs(e,t)}buildRequest(){const e={requestUri:xE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ei(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NE(n){const e=Yi(Ji(n)).link,t=e?Yi(Ji(e)).deep_link_id:null,i=Yi(Ji(n)).deep_link_id;return(i?Yi(Ji(i)).link:null)||i||t||e||n}class Kd{constructor(e){var t,i,o,c,d,f;const m=Yi(Ji(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,_=(i=m.oobCode)!==null&&i!==void 0?i:null,w=wE((o=m.mode)!==null&&o!==void 0?o:null);_e(g&&_&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=_,this.continueUrl=(c=m.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=m.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=NE(e);try{return new Kd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.providerId=ni.PROVIDER_ID}static credential(e,t){return lo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Kd.parseLink(t);return _e(i,"argument-error"),lo._fromEmailAndCode(e,i.code,i.tenantId)}}ni.PROVIDER_ID="password";ni.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ni.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends zv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends bo{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends bo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ns._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return _r.credential(t,i)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends bo{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.GITHUB_SIGN_IN_METHOD="github.com";xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends bo{constructor(){super("twitter.com")}static credential(e,t){return ns._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return wr.credential(t,i)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SE(n,e){return ko(n,"POST","/v1/accounts:signUp",Or(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await mn._fromIdTokenResponse(e,i,o),d=Xp(i);return new rs({user:c,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Xp(i);return new rs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Xp(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends Ar{constructor(e,t,i,o){var c;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ll.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new ll(e,t,i,o)}}function Vv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ll._fromErrorAndOperation(n,c,e,i):c})}async function EE(n,e,t=!1){const i=await ao(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return rs._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(n,e,t=!1){const{auth:i}=n;if(nn(i.app))return Promise.reject($n(i));const o="reauthenticate";try{const c=await ao(n,Vv(i,o,e,n),t);_e(c.idToken,i,"internal-error");const d=qd(c.idToken);_e(d,i,"internal-error");const{sub:f}=d;return _e(n.uid===f,i,"user-mismatch"),rs._forOperation(n,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&yn(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(n,e,t=!1){if(nn(n.app))return Promise.reject($n(n));const i="signIn",o=await Vv(n,i,e),c=await rs._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(c.user),c}async function bE(n,e){return Wv(as(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $v(n){const e=as(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CE(n,e,t){if(nn(n.app))return Promise.reject($n(n));const i=as(n),d=await fd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SE).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&$v(n),m}),f=await rs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(f.user),f}function TE(n,e,t){return nn(n.app)?Promise.reject($n(n)):bE(bt(n),ni.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&$v(n),i})}function IE(n,e,t,i){return bt(n).onIdTokenChanged(e,t,i)}function RE(n,e,t){return bt(n).beforeAuthStateChanged(e,t)}function jE(n,e,t,i){return bt(n).onAuthStateChanged(e,t,i)}function PE(n){return bt(n).signOut()}const cl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cl,"1"),this.storage.removeItem(cl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=1e3,OE=10;class Hv extends Bv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);JS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,OE):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},AE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hv.type="LOCAL";const LE=Hv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Bv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qv.type="SESSION";const Gv=qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Rl(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(d).map(async g=>g(t.origin,c)),m=await DE(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((f,m)=>{const g=Yd("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(w){const v=w;if(v.data.eventId===g)switch(v.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(v.data.response);break;default:clearTimeout(_),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function FE(n){bn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function UE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zE(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function VE(){return Qv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="firebaseLocalStorageDb",WE=1,ul="firebaseLocalStorage",Yv="fbase_key";class Co{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jl(n,e){return n.transaction([ul],e?"readwrite":"readonly").objectStore(ul)}function $E(){const n=indexedDB.deleteDatabase(Kv);return new Co(n).toPromise()}function md(){const n=indexedDB.open(Kv,WE);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ul,{keyPath:Yv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ul)?e(i):(i.close(),await $E(),e(await md()))})})}async function Zp(n,e,t){const i=jl(n,!0).put({[Yv]:e,value:t});return new Co(i).toPromise()}async function BE(n,e){const t=jl(n,!1).get(e),i=await new Co(t).toPromise();return i===void 0?null:i.value}function eg(n,e){const t=jl(n,!0).delete(e);return new Co(t).toPromise()}const HE=800,qE=3;class Jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await md(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>qE)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rl._getInstance(VE()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await UE(),!this.activeServiceWorker)return;this.sender=new ME(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await md();return await Zp(e,cl,"1"),await eg(e,cl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zp(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>BE(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=jl(o,!1).getAll();return new Co(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jv.type="LOCAL";const GE=Jv;new Eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e){return e?zn(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends Qd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KE(n){return Wv(n.auth,new Jd(n),n.bypassAuthState)}function YE(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),kE(t,new Jd(n),n.bypassAuthState)}async function JE(n){const{auth:e,user:t}=n;return _e(t,e,"internal-error"),EE(t,new Jd(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KE;case"linkViaPopup":case"linkViaRedirect":return JE;case"reauthViaPopup":case"reauthViaRedirect":return YE;default:yn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Eo(2e3,1e4);class Ds extends Xv{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Yd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XE.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="pendingRedirect",Ya=new Map;class ek extends Xv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ya.get(this.auth._key());if(!e){try{const i=await tk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ya.set(this.auth._key(),e)}return this.bypassAuthState||Ya.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tk(n,e){const t=sk(e),i=rk(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function nk(n,e){Ya.set(n._key(),e)}function rk(n){return zn(n._redirectPersistence)}function sk(n){return Ka(ZE,n.config.apiKey,n.name)}async function ik(n,e,t=!1){if(nn(n.app))return Promise.reject($n(n));const i=as(n),o=QE(i,e),d=await new ek(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=10*60*1e3;class ak{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Zv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(kn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ok&&this.cachedEventUids.clear(),this.cachedEventUids.has(tg(e))}saveEventToCache(e){this.cachedEventUids.add(tg(e)),this.lastProcessedEventTime=Date.now()}}function tg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Zv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(n,e={}){return Lr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dk=/^https?/;async function hk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ck(n);for(const t of e)try{if(fk(t))return}catch{}yn(n,"unauthorized-domain")}function fk(n){const e=dd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!dk.test(t))return!1;if(uk.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new Eo(3e4,6e4);function ng(){const n=bn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pk(n){return new Promise((e,t)=>{var i,o,c;function d(){ng(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ng(),t(kn(n,"network-request-failed"))},timeout:mk.get()})}if(!((o=(i=bn().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=bn().gapi)===null||c===void 0)&&c.load)d();else{const f=oE("iframefcb");return bn()[f]=()=>{gapi.load?d():t(kn(n,"network-request-failed"))},Mv(`${iE()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Ja=null,e})}let Ja=null;function gk(n){return Ja=Ja||pk(n),Ja}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Eo(5e3,15e3),yk="__/auth/iframe",_k="emulator/auth/iframe",xk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nk(n){const e=n.config;_e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hd(e,_k):`https://${n.config.authDomain}/${yk}`,i={apiKey:e.apiKey,appName:n.name,v:ti},o=wk.get(n.config.apiHost);o&&(i.eid=o);const c=n._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${ei(i).slice(1)}`}async function Sk(n){const e=await gk(n),t=bn().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:Nk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xk,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=kn(n,"network-request-failed"),f=bn().setTimeout(()=>{c(d)},vk.get());function m(){bn().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kk=500,bk=600,Ck="_blank",Tk="http://localhost";class rg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ik(n,e,t,i=kk,o=bk){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},Ek),{width:i.toString(),height:o.toString(),top:c,left:d}),g=jt().toLowerCase();t&&(f=Rv(g)?Ck:t),Tv(g)&&(e=e||Tk,m.scrollbars="yes");const _=Object.entries(m).reduce((v,[N,E])=>`${v}${N}=${E},`,"");if(YS(g)&&f!=="_self")return Rk(e||"",f),new rg(null);const w=window.open(e||"",f,_);_e(w,n,"popup-blocked");try{w.focus()}catch{}return new rg(w)}function Rk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="__/auth/handler",Pk="emulator/auth/handler",Ak=encodeURIComponent("fac");async function sg(n,e,t,i,o,c){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ti,eventId:o};if(e instanceof zv){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",id(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))d[_]=w}if(e instanceof bo){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const f=d;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await n._getAppCheckToken(),g=m?`#${Ak}=${encodeURIComponent(m)}`:"";return`${Ok(n)}?${ei(f).slice(1)}${g}`}function Ok({config:n}){return n.emulator?Hd(n,Pk):`https://${n.authDomain}/${jk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="webStorageSupport";class Lk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gv,this._completeRedirectFn=ik,this._overrideRedirectResult=nk}async _openPopup(e,t,i,o){var c;qn((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await sg(e,t,i,dd(),o);return Ik(e,d,Yd())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await sg(e,t,i,dd(),o);return FE(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(qn(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Sk(e),i=new ak(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qu,{type:qu},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[qu];d!==void 0&&t(!!d),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Lv()||Iv()||Gd()}}const Dk=Lk;var ig="@firebase/auth",og="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uk(n){Bs(new ts("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=i.options;_e(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:d,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dv(n)},g=new nE(i,o,c,m);return hE(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Bs(new ts("auth-internal",e=>{const t=as(e.getProvider("auth").getImmediate());return(i=>new Mk(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(ig,og,Fk(n)),kr(ig,og,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=5*60,Vk=dv("authIdTokenMaxAge")||zk;let ag=null;const Wk=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Vk)return;const o=t==null?void 0:t.token;ag!==o&&(ag=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $k(n=vv()){const e=Wd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dE(n,{popupRedirectResolver:Dk,persistence:[GE,LE,Gv]}),i=dv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=Wk(c.toString());RE(t,d,()=>d(t.currentUser)),IE(t,f=>d(f))}}const o=cv("auth");return o&&fE(t,`http://${o}`),t}function Bk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}rE({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const c=kn("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",Bk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uk("Browser");var Hk="firebase",qk="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(Hk,qk,"app");var lg={};const cg="@firebase/database",ug="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey="";function Gk(n){ey=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:io(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Tn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qk(e)}}catch{}return new Kk},Zr=ty("localStorage"),Yk=ty("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new zd("@firebase/database"),Jk=function(){let n=1;return function(){return n++}}(),ny=function(n){const e=wN(n),t=new vN;t.update(e);const i=t.digest();return Md.encodeByteArray(i)},To=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=To.apply(null,i):typeof i=="object"?e+=dt(i):e+=i,e+=" "}return e};let Zi=null,dg=!0;const Xk=function(n,e){ne(!0,"Can't turn on custom loggers persistently."),Vs.logLevel=Fe.VERBOSE,Zi=Vs.log.bind(Vs)},xt=function(...n){if(dg===!0&&(dg=!1,Zi===null&&Yk.get("logging_enabled")===!0&&Xk()),Zi){const e=To.apply(null,n);Zi(e)}},Io=function(n){return function(...e){xt(n,...e)}},pd=function(...n){const e="FIREBASE INTERNAL ERROR: "+To(...n);Vs.error(e)},Gn=function(...n){const e=`FIREBASE FATAL ERROR: ${To(...n)}`;throw Vs.error(e),new Error(e)},Rt=function(...n){const e="FIREBASE WARNING: "+To(...n);Vs.warn(e)},Zk=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xd=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},eb=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Hs="[MIN_NAME]",ss="[MAX_NAME]",ls=function(n,e){if(n===e)return 0;if(n===Hs||e===ss)return-1;if(e===Hs||n===ss)return 1;{const t=hg(n),i=hg(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},tb=function(n,e){return n===e?0:n<e?-1:1},qi=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+dt(e))},Zd=function(n){if(typeof n!="object"||n===null)return dt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=dt(e[i]),t+=":",t+=Zd(n[e[i]]);return t+="}",t},ry=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let o=0;o<t;o+=e)o+e>t?i.push(n.substring(o,t)):i.push(n.substring(o,o+e));return i};function wt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sy=function(n){ne(!Xd(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let o,c,d,f,m;n===0?(c=0,d=0,o=1/n===-1/0?1:0):(o=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),c=f+i,d=Math.round(n*Math.pow(2,t-f)-Math.pow(2,t))):(c=0,d=Math.round(n/Math.pow(2,1-i-t))));const g=[];for(m=t;m;m-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(m=e;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);g.push(o?1:0),g.reverse();const _=g.join("");let w="";for(m=0;m<64;m+=8){let v=parseInt(_.substr(m,8),2).toString(16);v.length===1&&(v="0"+v),w=w+v}return w.toLowerCase()},nb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function sb(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const ib=new RegExp("^-?(0*)\\d{1,10}$"),ob=-2147483648,ab=2147483647,hg=function(n){if(ib.test(n)){const e=Number(n);if(e>=ob&&e<=ab)return e}return null},ri=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Rt("Exception was thrown by user callback.",t),e},Math.floor(0))}},lb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},eo=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,nn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Rt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rt(e)}}class Xa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="5",iy="v",oy="s",ay="r",ly="f",cy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uy="ls",dy="p",gd="ac",hy="websocket",fy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t,i,o,c=!1,d="",f=!1,m=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function db(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function py(n,e,t){ne(typeof e=="string","typeof type must == string"),ne(typeof t=="object","typeof params must == object");let i;if(e===hy)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===fy)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);db(n)&&(t.ns=n.namespace);const o=[];return wt(t,(c,d)=>{o.push(c+"="+d)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.counters_={}}incrementCounter(e,t=1){Tn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Xw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu={},Qu={};function th(n){const e=n.toString();return Gu[e]||(Gu[e]=new hb),Gu[e]}function fb(n,e){const t=n.toString();return Qu[t]||(Qu[t]=e()),Qu[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&ri(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="start",pb="close",gb="pLPCommand",vb="pRTLPCB",gy="id",vy="pw",yy="ser",yb="cb",_b="seg",xb="ts",wb="d",Nb="dframe",_y=1870,xy=30,Sb=_y-xy,Eb=25e3,kb=3e4;class Ms{constructor(e,t,i,o,c,d,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Io(e),this.stats_=th(t),this.urlFn=m=>(this.appCheckToken&&(m[gd]=this.appCheckToken),py(t,fy,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new mb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kb)),eb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nh((...c)=>{const[d,f,m,g,_]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===fg)this.id=f,this.password=m;else if(d===pb)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,f]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[fg]="t",i[yy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[yb]=this.scriptTagHolder.uniqueCallbackIdentifier),i[iy]=eh,this.transportSessionId&&(i[oy]=this.transportSessionId),this.lastSessionId&&(i[uy]=this.lastSessionId),this.applicationId&&(i[dy]=this.applicationId),this.appCheckToken&&(i[gd]=this.appCheckToken),typeof location<"u"&&location.hostname&&cy.test(location.hostname)&&(i[ay]=ly);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ms.forceAllow_=!0}static forceDisallow(){Ms.forceDisallow_=!0}static isAvailable(){return Ms.forceAllow_?!0:!Ms.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nb()&&!rb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=dt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=av(t),o=ry(i,Sb);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[Nb]="t",i[gy]=e,i[vy]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=dt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class nh{constructor(e,t,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Jk(),window[gb+this.uniqueCallbackIdentifier]=e,window[vb+this.uniqueCallbackIdentifier]=t,this.myIFrame=nh.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){xt("frame writing exception"),f.stack&&xt(f.stack),xt(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[gy]=this.myID,e[vy]=this.myPW,e[yy]=this.currentSerial;let t=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xy+i.length<=_y;){const d=this.pendingSegs.shift();i=i+"&"+_b+o+"="+d.seg+"&"+xb+o+"="+d.ts+"&"+wb+o+"="+d.d,o++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(i,Math.floor(Eb)),c=()=>{clearTimeout(o),i()};this.addTag(e,c)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=16384,Cb=45e3;let dl=null;typeof MozWebSocket<"u"?dl=MozWebSocket:typeof WebSocket<"u"&&(dl=WebSocket);class fn{constructor(e,t,i,o,c,d,f){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Io(this.connId),this.stats_=th(t),this.connURL=fn.connectionURL_(t,d,f,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,o,c){const d={};return d[iy]=eh,typeof location<"u"&&location.hostname&&cy.test(location.hostname)&&(d[ay]=ly),t&&(d[oy]=t),i&&(d[uy]=i),o&&(d[gd]=o),c&&(d[dy]=c),py(e,hy,d)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zr.set("previous_websocket_failure",!0);try{let i;cN(),this.mySock=new dl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){fn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&dl!==null&&!fn.forceDisallow_}static previouslyFailed(){return Zr.isInMemoryStorage||Zr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=io(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=dt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=ry(t,bb);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Cb))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fn.responsesRequiredToBeHealthy=2;fn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static get ALL_TRANSPORTS(){return[Ms,fn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=fn&&fn.isAvailable();let i=t&&!fn.previouslyFailed();if(e.webSocketOnly&&(t||Rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[fn];else{const o=this.transports_=[];for(const c of co.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);co.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}co.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=6e4,Ib=5e3,Rb=10*1024,jb=100*1024,Ku="t",mg="d",Pb="s",pg="r",Ab="e",gg="o",vg="a",yg="n",_g="p",Ob="h";class Lb{constructor(e,t,i,o,c,d,f,m,g,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Io("c:"+this.id+":"),this.transportManager_=new co(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=eo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jb?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Rb?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ku in e){const t=e[Ku];t===vg?this.upgradeIfSecondaryHealthy_():t===pg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===gg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=qi("t",e),i=qi("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_g,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:yg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=qi("t",e),i=qi("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=qi(Ku,e);if(mg in e){const i=e[mg];if(t===Ob){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(t===yg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Pb?this.onConnectionShutdown_(i):t===pg?this.onReset_(i):t===Ab?pd("Server Error: "+i):t===gg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pd("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),eh!==i&&Rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),eo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Tb))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Ib))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_g,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{put(e,t,i,o){}merge(e,t,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const o=this.getInitialEvent(e);o&&t.apply(i,o)}off(e,t,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===t&&(!i||i===o[c].context)){o.splice(c,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Ny{static getInstance(){return new hl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ud()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=32,wg=768;class Ue{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ae(){return new Ue("")}function be(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ir(n){return n.pieces_.length-n.pieceNum_}function $e(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ue(n.pieces_,e)}function rh(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Db(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function uo(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Sy(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ue(e,0)}function Ze(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ue)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&t.push(i[o])}return new Ue(t,0)}function Te(n){return n.pieceNum_>=n.pieces_.length}function It(n,e){const t=be(n),i=be(e);if(t===null)return e;if(t===i)return It($e(n),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Mb(n,e){const t=uo(n,0),i=uo(e,0);for(let o=0;o<t.length&&o<i.length;o++){const c=ls(t[o],i[o]);if(c!==0)return c}return t.length===i.length?0:t.length<i.length?-1:1}function sh(n,e){if(Ir(n)!==Ir(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function rn(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ir(n)>Ir(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Fb{constructor(e,t){this.errorPrefix_=t,this.parts_=uo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Tl(this.parts_[i]);Ey(this)}}function Ub(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Tl(e),Ey(n)}function zb(n){const e=n.parts_.pop();n.byteLength_-=Tl(e),n.parts_.length>0&&(n.byteLength_-=1)}function Ey(n){if(n.byteLength_>wg)throw new Error(n.errorPrefix_+"has a key path longer than "+wg+" bytes ("+n.byteLength_+").");if(n.parts_.length>xg)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+xg+") or object contains a cycle "+Jr(n))}function Jr(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Ny{static getInstance(){return new ih}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=1e3,Vb=60*5*1e3,Ng=30*1e3,Wb=1.3,$b=3e4,Bb="server_kill",Sg=3;class Bn extends wy{constructor(e,t,i,o,c,d,f,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Bn.nextPersistentConnectionId_++,this.log_=Io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gi,this.maxReconnectDelay_=Vb,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ih.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&hl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const o=++this.requestNumber_,c={r:o,a:e,b:t};this.log_(dt(c)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const t=new No,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;d.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),t.promise}listen(e,t,i,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:t,query:e,tag:i};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),o=t._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i},d="q";e.tag&&(c.q=t._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,f=>{const m=f.d,g=f.s;Bn.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Tn(e,"w")){const i=$s(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+t._queryParams.getIndex().toString()+'"',c=t._path.toString();Rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||gN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ng)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=pN(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,t)}sendUnlisten_(e,t,i,o){this.log_("Unlisten on "+e+" for "+t);const c={p:e},d="n";o&&(c.q=i,c.t=o),this.sendRequest(d,c)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,o){const c={p:t,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,t,i,o){this.putInternal("p",e,t,i,o)}merge(e,t,i,o){this.putInternal("m",e,t,i,o)}putInternal(e,t,i,o,c){this.initConnection_();const d={p:t,d:i};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,c=>{this.log_(t+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+dt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):pd("Unrecognized action received from server: "+dt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Gi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$b&&(this.reconnectDelay_=Gi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Wb)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Bn.nextConnectionId_++,c=this.lastSessionId;let d=!1,f=null;const m=function(){f?f.close():(d=!0,i())},g=function(w){ne(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(w)};this.realtime_={close:m,sendRequest:g};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[w,v]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);d?xt("getToken() completed but was canceled"):(xt("getToken() completed. Creating connection."),this.authToken_=w&&w.accessToken,this.appCheckToken_=v&&v.token,f=new Lb(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,N=>{Rt(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(Bb)},c))}catch(w){this.log_("Failed to get token: "+w),d||(this.repoInfo_.nodeAdmin&&Rt(w),m())}}}interrupt(e){xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],id(this.interruptReasons_)&&(this.reconnectDelay_=Gi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(c=>Zd(c)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,t){const i=new Ue(e).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(t),c.delete(t),c.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,t){xt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sg&&(this.reconnectDelay_=Ng,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){xt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Sg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+ey.replace(/\./g,"-")]=1,Ud()?e["framework.cordova"]=1:hv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=hl.getInstance().currentlyOnline();return id(this.interruptReasons_)&&e}}Bn.nextPersistentConnectionId_=0;Bn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ce(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ce(Hs,e),o=new Ce(Hs,t);return this.compare(i,o)!==0}minPost(){return Ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba;class ky extends Pl{static get __EMPTY_NODE(){return Ba}static set __EMPTY_NODE(e){Ba=e}compare(e,t){return ls(e.name,t.name)}isDefinedOn(e){throw Zs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ce.MIN}maxPost(){return new Ce(ss,Ba)}makePost(e,t){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ce(e,Ba)}toString(){return".key"}}const Ws=new ky;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t,i,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?i(e.key,t):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class vt{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??vt.RED,this.left=o??zt.EMPTY_NODE,this.right=c??zt.EMPTY_NODE}copy(e,t,i,o,c){return new vt(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o=o.copy(null,t,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return zt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,o;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}vt.RED=!0;vt.BLACK=!1;class Hb{copy(e,t,i,o,c){return this}insert(e,t,i){return new vt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zt{constructor(e,t=zt.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new zt(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(e){return new zt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,o=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ha(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ha(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ha(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ha(this.root_,null,this.comparator_,!0,e)}}zt.EMPTY_NODE=new Hb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){return ls(n.name,e.name)}function oh(n,e){return ls(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd;function Gb(n){vd=n}const by=function(n){return typeof n=="number"?"number:"+sy(n):"string:"+n},Cy=function(n){if(n.isLeafNode()){const e=n.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Tn(e,".sv"),"Priority must be a string or number.")}else ne(n===vd||n.isEmpty(),"priority of unexpected type.");ne(n===vd||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg;class gt{static set __childrenNodeConstructor(e){Eg=e}static get __childrenNodeConstructor(){return Eg}constructor(e,t=gt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Cy(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Te(e)?this:be(e)===".priority"?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:gt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=be(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ne(i!==".priority"||Ir(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,gt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+by(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=sy(this.value_):e+=this.value_,this.lazyHash_=ny(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gt.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,o=gt.VALUE_TYPE_ORDER.indexOf(t),c=gt.VALUE_TYPE_ORDER.indexOf(i);return ne(o>=0,"Unknown leaf type: "+t),ne(c>=0,"Unknown leaf type: "+i),o===c?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}gt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ty,Iy;function Qb(n){Ty=n}function Kb(n){Iy=n}class Yb extends Pl{compare(e,t){const i=e.node.getPriority(),o=t.node.getPriority(),c=i.compareTo(o);return c===0?ls(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ce.MIN}maxPost(){return new Ce(ss,new gt("[PRIORITY-POST]",Iy))}makePost(e,t){const i=Ty(e);return new Ce(t,new gt("[PRIORITY-POST]",i))}toString(){return".priority"}}const et=new Yb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=Math.log(2);class Xb{constructor(e){const t=c=>parseInt(Math.log(c)/Jb,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fl=function(n,e,t,i){n.sort(e);const o=function(m,g){const _=g-m;let w,v;if(_===0)return null;if(_===1)return w=n[m],v=t?t(w):w,new vt(v,w.node,vt.BLACK,null,null);{const N=parseInt(_/2,10)+m,E=o(m,N),L=o(N+1,g);return w=n[N],v=t?t(w):w,new vt(v,w.node,vt.BLACK,E,L)}},c=function(m){let g=null,_=null,w=n.length;const v=function(E,L){const P=w-E,S=w;w-=E;const T=o(P+1,S),C=n[P],D=t?t(C):C;N(new vt(D,C.node,L,null,T))},N=function(E){g?(g.left=E,g=E):(_=E,g=E)};for(let E=0;E<m.count;++E){const L=m.nextBitIsOne(),P=Math.pow(2,m.count-(E+1));L?v(P,vt.BLACK):(v(P,vt.BLACK),v(P,vt.RED))}return _},d=new Xb(n.length),f=c(d);return new zt(i||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu;const Ls={};class Vn{static get Default(){return ne(Ls&&et,"ChildrenNode.ts has not been loaded"),Yu=Yu||new Vn({".priority":Ls},{".priority":et}),Yu}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=$s(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zt?t:null}hasIndex(e){return Tn(this.indexSet_,e.toString())}addIndex(e,t){ne(e!==Ws,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const c=t.getIterator(Ce.Wrap);let d=c.getNext();for(;d;)o=o||e.isDefinedOn(d.node),i.push(d),d=c.getNext();let f;o?f=fl(i,e.getCompare()):f=Ls;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const _=Object.assign({},this.indexes_);return _[m]=f,new Vn(_,g)}addToIndexes(e,t){const i=rl(this.indexes_,(o,c)=>{const d=$s(this.indexSet_,c);if(ne(d,"Missing index implementation for "+c),o===Ls)if(d.isDefinedOn(e.node)){const f=[],m=t.getIterator(Ce.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&f.push(g),g=m.getNext();return f.push(e),fl(f,d.getCompare())}else return Ls;else{const f=t.get(e.name);let m=o;return f&&(m=m.remove(new Ce(e.name,f))),m.insert(e,e.node)}});return new Vn(i,this.indexSet_)}removeFromIndexes(e,t){const i=rl(this.indexes_,o=>{if(o===Ls)return o;{const c=t.get(e.name);return c?o.remove(new Ce(e.name,c)):o}});return new Vn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi;class xe{static get EMPTY_NODE(){return Qi||(Qi=new xe(new zt(oh),null,Vn.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Cy(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qi}updatePriority(e){return this.children_.isEmpty()?this:new xe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Qi:t}}getChild(e){const t=be(e);return t===null?this:this.getImmediateChild(t).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ne(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ce(e,t);let o,c;t.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,t),c=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?Qi:this.priorityNode_;return new xe(o,d,c)}}updateChild(e,t){const i=be(e);if(i===null)return t;{ne(be(e)!==".priority"||Ir(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild($e(e),t);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,o=0,c=!0;if(this.forEachChild(et,(d,f)=>{t[d]=f.val(e),i++,c&&xe.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*i){const d=[];for(const f in t)d[f]=t[f];return d}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+by(this.getPriority().val())+":"),this.forEachChild(et,(t,i)=>{const o=i.hash();o!==""&&(e+=":"+t+":"+o)}),this.lazyHash_=e===""?"":ny(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new Ce(e,t));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ce(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ce(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>t(o.name,o.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Ce.Wrap);let c=o.peek();for(;c!=null&&t.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Ce.Wrap);let c=o.peek();for(;c!=null&&t.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ro?-1:0}withIndex(e){if(e===Ws||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new xe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ws||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(et),o=t.getIterator(et);let c=i.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=i.getNext(),d=o.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Ws?null:this.indexMap_.get(e.toString())}}xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Zb extends xe{constructor(){super(new zt(oh),xe.EMPTY_NODE,Vn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xe.EMPTY_NODE}isEmpty(){return!1}}const Ro=new Zb;Object.defineProperties(Ce,{MIN:{value:new Ce(Hs,xe.EMPTY_NODE)},MAX:{value:new Ce(ss,Ro)}});ky.__EMPTY_NODE=xe.EMPTY_NODE;gt.__childrenNodeConstructor=xe;Gb(Ro);Kb(Ro);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=!0;function ut(n,e=null){if(n===null)return xe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new gt(t,ut(e))}if(!(n instanceof Array)&&eC){const t=[];let i=!1;if(wt(n,(d,f)=>{if(d.substring(0,1)!=="."){const m=ut(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Ce(d,m)))}}),t.length===0)return xe.EMPTY_NODE;const c=fl(t,qb,d=>d.name,oh);if(i){const d=fl(t,et.getCompare());return new xe(c,ut(e),new Vn({".priority":d},{".priority":et}))}else return new xe(c,ut(e),Vn.Default)}else{let t=xe.EMPTY_NODE;return wt(n,(i,o)=>{if(Tn(n,i)&&i.substring(0,1)!=="."){const c=ut(o);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(i,c))}}),t.updatePriority(ut(e))}}Qb(ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC extends Pl{constructor(e){super(),this.indexPath_=e,ne(!Te(e)&&be(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),o=this.extractChild(t.node),c=i.compareTo(o);return c===0?ls(e.name,t.name):c}makePost(e,t){const i=ut(e),o=xe.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ce(t,o)}maxPost(){const e=xe.EMPTY_NODE.updateChild(this.indexPath_,Ro);return new Ce(ss,e)}toString(){return uo(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends Pl{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ls(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ce.MIN}maxPost(){return Ce.MAX}makePost(e,t){const i=ut(e);return new Ce(t,i)}toString(){return".value"}}const rC=new nC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){return{type:"value",snapshotNode:n}}function qs(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ho(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function fo(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function sC(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.index_=e}updateChild(e,t,i,o,c,d){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(o).equals(i.getChild(o))&&f.isEmpty()===i.isEmpty()||(d!=null&&(i.isEmpty()?e.hasChild(t)?d.trackChildChange(ho(t,f)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(qs(t,i)):d.trackChildChange(fo(t,i,f))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(et,(o,c)=>{t.hasChild(o)||i.trackChildChange(ho(o,c))}),t.isLeafNode()||t.forEachChild(et,(o,c)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(c)||i.trackChildChange(fo(o,c,d))}else i.trackChildChange(qs(o,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xe.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.indexedFilter_=new ah(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mo.getStartPost_(e),this.endPost_=mo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,o,c,d){return this.matches(new Ce(t,i))||(i=xe.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,o,c,d)}updateFullNode(e,t,i){t.isLeafNode()&&(t=xe.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(xe.EMPTY_NODE);const c=this;return t.forEachChild(et,(d,f)=>{c.matches(new Ce(d,f))||(o=o.updateImmediateChild(d,xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new mo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,o,c,d){return this.rangedFilter_.matches(new Ce(t,i))||(i=xe.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,o,c,d):this.fullLimitUpdateChild_(e,t,i,c,d)}updateFullNode(e,t,i){let o;if(t.isLeafNode()||t.isEmpty())o=xe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){o=xe.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const f=c.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),d++;else break;else continue}}else{o=t.withIndex(this.index_),o=o.updatePriority(xe.EMPTY_NODE);let c;this.reverse_?c=o.getReverseIterator(this.index_):c=o.getIterator(this.index_);let d=0;for(;c.hasNext();){const f=c.getNext();d<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?d++:o=o.updateImmediateChild(f.name,xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,o,c){let d;if(this.reverse_){const w=this.index_.getCompare();d=(v,N)=>w(N,v)}else d=this.index_.getCompare();const f=e;ne(f.numChildren()===this.limit_,"");const m=new Ce(t,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),_=this.rangedFilter_.matches(m);if(f.hasChild(t)){const w=f.getImmediateChild(t);let v=o.getChildAfterChild(this.index_,g,this.reverse_);for(;v!=null&&(v.name===t||f.hasChild(v.name));)v=o.getChildAfterChild(this.index_,v,this.reverse_);const N=v==null?1:d(v,m);if(_&&!i.isEmpty()&&N>=0)return c!=null&&c.trackChildChange(fo(t,i,w)),f.updateImmediateChild(t,i);{c!=null&&c.trackChildChange(ho(t,w));const L=f.updateImmediateChild(t,xe.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(c!=null&&c.trackChildChange(qs(v.name,v.node)),L.updateImmediateChild(v.name,v.node)):L}}else return i.isEmpty()?e:_&&d(g,m)>=0?(c!=null&&(c.trackChildChange(ho(g.name,g.node)),c.trackChildChange(qs(t,i))),f.updateImmediateChild(t,i).updateImmediateChild(g.name,xe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=et}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Hs}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ss}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===et}copy(){const e=new lh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oC(n){return n.loadsAllData()?new ah(n.getIndex()):n.hasLimit()?new iC(n):new mo(n)}function kg(n){const e={};if(n.isDefault())return e;let t;if(n.index_===et?t="$priority":n.index_===rC?t="$value":n.index_===Ws?t="$key":(ne(n.index_ instanceof tC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=dt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=dt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+dt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=dt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+dt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bg(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==et&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends wy{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Io("p:rest:"),this.listens_={}}listen(e,t,i,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=ml.getListenId_(e,i),f={};this.listens_[d]=f;const m=kg(e._queryParams);this.restRequest_(c+".json",m,(g,_)=>{let w=_;if(g===404&&(w=null,g=null),g===null&&this.onDataUpdate_(c,w,!1,i),$s(this.listens_,d)===f){let v;g?g===401?v="permission_denied":v="rest_error:"+g:v="ok",o(v,null)}})}unlisten(e,t){const i=ml.getListenId_(e,t);delete this.listens_[i]}get(e){const t=kg(e._queryParams),i=e._path.toString(),o=new No;return this.restRequest_(i+".json",t,(c,d)=>{let f=d;c===404&&(f=null,c=null),c===null?(this.onDataUpdate_(i,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(t.auth=o.accessToken),c&&c.token&&(t.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ei(t);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=io(f.responseText)}catch{Rt("Failed to parse JSON response for "+d+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&Rt("Got unsuccessful REST response for "+d+" Status: "+f.status),i(f.status);i=null}},f.open("GET",d,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.rootNode_=xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){return{value:null,children:new Map}}function jy(n,e,t){if(Te(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=be(e);n.children.has(i)||n.children.set(i,pl());const o=n.children.get(i);e=$e(e),jy(o,e,t)}}function yd(n,e,t){n.value!==null?t(e,n.value):lC(n,(i,o)=>{const c=new Ue(e.toString()+"/"+i);yd(o,c,t)})}function lC(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&wt(this.last_,(i,o)=>{t[i]=t[i]-o}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=10*1e3,uC=30*1e3,dC=5*60*1e3;class hC{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cC(e);const i=Cg+(uC-Cg)*Math.random();eo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;wt(e,(o,c)=>{c>0&&Tn(this.statsToReport_,o)&&(t[o]=c,i=!0)}),i&&this.server_.reportStats(t),eo(this.reportStats_.bind(this),Math.floor(Math.random()*2*dC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pn||(pn={}));function ch(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dh(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=pn.ACK_USER_WRITE,this.source=ch()}operationForChild(e){if(Te(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ue(e));return new gl(Ae(),t,this.revert)}}else return ne(be(this.path)===e,"operationForChild called for unrelated child."),new gl($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.source=e,this.path=t,this.type=pn.LISTEN_COMPLETE}operationForChild(e){return Te(this.path)?new po(this.source,Ae()):new po(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=pn.OVERWRITE}operationForChild(e){return Te(this.path)?new is(this.source,Ae(),this.snap.getImmediateChild(e)):new is(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=pn.MERGE}operationForChild(e){if(Te(this.path)){const t=this.children.subtree(new Ue(e));return t.isEmpty()?null:t.value?new is(this.source,Ae(),t.value):new Gs(this.source,Ae(),t)}else return ne(be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gs(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;const t=be(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function mC(n,e,t,i){const o=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(sC(d.childName,d.snapshotNode))}),Ki(n,o,"child_removed",e,i,t),Ki(n,o,"child_added",e,i,t),Ki(n,o,"child_moved",c,i,t),Ki(n,o,"child_changed",e,i,t),Ki(n,o,"value",e,i,t),o}function Ki(n,e,t,i,o,c){const d=i.filter(f=>f.type===t);d.sort((f,m)=>gC(n,f,m)),d.forEach(f=>{const m=pC(n,f,c);o.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(m,n.query_))})})}function pC(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function gC(n,e,t){if(e.childName==null||t.childName==null)throw Zs("Should only compare child_ events.");const i=new Ce(e.childName,e.snapshotNode),o=new Ce(t.childName,t.snapshotNode);return n.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(n,e){return{eventCache:n,serverCache:e}}function to(n,e,t,i){return Al(new Rr(e,t,i),n.serverCache)}function Py(n,e,t,i){return Al(n.eventCache,new Rr(e,t,i))}function vl(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function os(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju;const vC=()=>(Ju||(Ju=new zt(tb)),Ju);class We{static fromObject(e){let t=new We(null);return wt(e,(i,o)=>{t=t.set(new Ue(i),o)}),t}constructor(e,t=vC()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ae(),value:this.value};if(Te(e))return null;{const i=be(e),o=this.children.get(i);if(o!==null){const c=o.findRootMostMatchingPathAndValue($e(e),t);return c!=null?{path:Ze(new Ue(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{const t=be(e),i=this.children.get(t);return i!==null?i.subtree($e(e)):new We(null)}}set(e,t){if(Te(e))return new We(t,this.children);{const i=be(e),c=(this.children.get(i)||new We(null)).set($e(e),t),d=this.children.insert(i,c);return new We(this.value,d)}}remove(e){if(Te(e))return this.children.isEmpty()?new We(null):new We(null,this.children);{const t=be(e),i=this.children.get(t);if(i){const o=i.remove($e(e));let c;return o.isEmpty()?c=this.children.remove(t):c=this.children.insert(t,o),this.value===null&&c.isEmpty()?new We(null):new We(this.value,c)}else return this}}get(e){if(Te(e))return this.value;{const t=be(e),i=this.children.get(t);return i?i.get($e(e)):null}}setTree(e,t){if(Te(e))return t;{const i=be(e),c=(this.children.get(i)||new We(null)).setTree($e(e),t);let d;return c.isEmpty()?d=this.children.remove(i):d=this.children.insert(i,c),new We(this.value,d)}}fold(e){return this.fold_(Ae(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((o,c)=>{i[o]=c.fold_(Ze(e,o),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Ae(),t)}findOnPath_(e,t,i){const o=this.value?i(t,this.value):!1;if(o)return o;if(Te(e))return null;{const c=be(e),d=this.children.get(c);return d?d.findOnPath_($e(e),Ze(t,c),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ae(),t)}foreachOnPath_(e,t,i){if(Te(e))return this;{this.value&&i(t,this.value);const o=be(e),c=this.children.get(o);return c?c.foreachOnPath_($e(e),Ze(t,o),i):new We(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,t){this.children.inorderTraversal((i,o)=>{o.foreach_(Ze(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.writeTree_=e}static empty(){return new gn(new We(null))}}function no(n,e,t){if(Te(e))return new gn(new We(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let c=i.value;const d=It(o,e);return c=c.updateChild(d,t),new gn(n.writeTree_.set(o,c))}else{const o=new We(t),c=n.writeTree_.setTree(e,o);return new gn(c)}}}function _d(n,e,t){let i=n;return wt(t,(o,c)=>{i=no(i,Ze(e,o),c)}),i}function Tg(n,e){if(Te(e))return gn.empty();{const t=n.writeTree_.setTree(e,new We(null));return new gn(t)}}function xd(n,e){return cs(n,e)!=null}function cs(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(It(t.path,e)):null}function Ig(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(et,(i,o)=>{e.push(new Ce(i,o))}):n.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new Ce(i,o.value))}),e}function br(n,e){if(Te(e))return n;{const t=cs(n,e);return t!=null?new gn(new We(t)):new gn(n.writeTree_.subtree(e))}}function wd(n){return n.writeTree_.isEmpty()}function Qs(n,e){return Ay(Ae(),n.writeTree_,e)}function Ay(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((o,c)=>{o===".priority"?(ne(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):t=Ay(Ze(n,o),c,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Ze(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n,e){return My(e,n)}function yC(n,e,t,i,o){ne(i>n.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:o}),o&&(n.visibleWrites=no(n.visibleWrites,e,t)),n.lastWriteId=i}function _C(n,e,t,i){ne(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=_d(n.visibleWrites,e,t),n.lastWriteId=i}function xC(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function wC(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);ne(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let o=i.visible,c=!1,d=n.allWrites.length-1;for(;o&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=t&&NC(f,i.path)?o=!1:rn(i.path,f.path)&&(c=!0)),d--}if(o){if(c)return SC(n),!0;if(i.snap)n.visibleWrites=Tg(n.visibleWrites,i.path);else{const f=i.children;wt(f,m=>{n.visibleWrites=Tg(n.visibleWrites,Ze(i.path,m))})}return!0}else return!1}function NC(n,e){if(n.snap)return rn(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&rn(Ze(n.path,t),e))return!0;return!1}function SC(n){n.visibleWrites=Oy(n.allWrites,EC,Ae()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function EC(n){return n.visible}function Oy(n,e,t){let i=gn.empty();for(let o=0;o<n.length;++o){const c=n[o];if(e(c)){const d=c.path;let f;if(c.snap)rn(t,d)?(f=It(t,d),i=no(i,f,c.snap)):rn(d,t)&&(f=It(d,t),i=no(i,Ae(),c.snap.getChild(f)));else if(c.children){if(rn(t,d))f=It(t,d),i=_d(i,f,c.children);else if(rn(d,t))if(f=It(d,t),Te(f))i=_d(i,Ae(),c.children);else{const m=$s(c.children,be(f));if(m){const g=m.getChild($e(f));i=no(i,Ae(),g)}}}else throw Zs("WriteRecord should have .snap or .children")}}return i}function Ly(n,e,t,i,o){if(!i&&!o){const c=cs(n.visibleWrites,e);if(c!=null)return c;{const d=br(n.visibleWrites,e);if(wd(d))return t;if(t==null&&!xd(d,Ae()))return null;{const f=t||xe.EMPTY_NODE;return Qs(d,f)}}}else{const c=br(n.visibleWrites,e);if(!o&&wd(c))return t;if(!o&&t==null&&!xd(c,Ae()))return null;{const d=function(g){return(g.visible||o)&&(!i||!~i.indexOf(g.writeId))&&(rn(g.path,e)||rn(e,g.path))},f=Oy(n.allWrites,d,e),m=t||xe.EMPTY_NODE;return Qs(f,m)}}}function kC(n,e,t){let i=xe.EMPTY_NODE;const o=cs(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(et,(c,d)=>{i=i.updateImmediateChild(c,d)}),i;if(t){const c=br(n.visibleWrites,e);return t.forEachChild(et,(d,f)=>{const m=Qs(br(c,new Ue(d)),f);i=i.updateImmediateChild(d,m)}),Ig(c).forEach(d=>{i=i.updateImmediateChild(d.name,d.node)}),i}else{const c=br(n.visibleWrites,e);return Ig(c).forEach(d=>{i=i.updateImmediateChild(d.name,d.node)}),i}}function bC(n,e,t,i,o){ne(i||o,"Either existingEventSnap or existingServerSnap must exist");const c=Ze(e,t);if(xd(n.visibleWrites,c))return null;{const d=br(n.visibleWrites,c);return wd(d)?o.getChild(t):Qs(d,o.getChild(t))}}function CC(n,e,t,i){const o=Ze(e,t),c=cs(n.visibleWrites,o);if(c!=null)return c;if(i.isCompleteForChild(t)){const d=br(n.visibleWrites,o);return Qs(d,i.getNode().getImmediateChild(t))}else return null}function TC(n,e){return cs(n.visibleWrites,e)}function IC(n,e,t,i,o,c,d){let f;const m=br(n.visibleWrites,e),g=cs(m,Ae());if(g!=null)f=g;else if(t!=null)f=Qs(m,t);else return[];if(f=f.withIndex(d),!f.isEmpty()&&!f.isLeafNode()){const _=[],w=d.getCompare(),v=c?f.getReverseIteratorFrom(i,d):f.getIteratorFrom(i,d);let N=v.getNext();for(;N&&_.length<o;)w(N,i)!==0&&_.push(N),N=v.getNext();return _}else return[]}function RC(){return{visibleWrites:gn.empty(),allWrites:[],lastWriteId:-1}}function yl(n,e,t,i){return Ly(n.writeTree,n.treePath,e,t,i)}function hh(n,e){return kC(n.writeTree,n.treePath,e)}function Rg(n,e,t,i){return bC(n.writeTree,n.treePath,e,t,i)}function _l(n,e){return TC(n.writeTree,Ze(n.treePath,e))}function jC(n,e,t,i,o,c){return IC(n.writeTree,n.treePath,e,t,i,o,c)}function fh(n,e,t){return CC(n.writeTree,n.treePath,e,t)}function Dy(n,e){return My(Ze(n.treePath,e),n.writeTree)}function My(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ne(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ne(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const c=o.type;if(t==="child_added"&&c==="child_removed")this.changeMap.set(i,fo(i,e.snapshotNode,o.snapshotNode));else if(t==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&c==="child_changed")this.changeMap.set(i,ho(i,o.oldSnap));else if(t==="child_changed"&&c==="child_added")this.changeMap.set(i,qs(i,e.snapshotNode));else if(t==="child_changed"&&c==="child_changed")this.changeMap.set(i,fo(i,e.snapshotNode,o.oldSnap));else throw Zs("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const Fy=new AC;class mh{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Rr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fh(this.writes_,e,i)}}getChildAfterChild(e,t,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:os(this.viewCache_),c=jC(this.writes_,o,t,1,i,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n){return{filter:n}}function LC(n,e){ne(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function DC(n,e,t,i,o){const c=new PC;let d,f;if(t.type===pn.OVERWRITE){const g=t;g.source.fromUser?d=Nd(n,e,g.path,g.snap,i,o,c):(ne(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!Te(g.path),d=xl(n,e,g.path,g.snap,i,o,f,c))}else if(t.type===pn.MERGE){const g=t;g.source.fromUser?d=FC(n,e,g.path,g.children,i,o,c):(ne(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),d=Sd(n,e,g.path,g.children,i,o,f,c))}else if(t.type===pn.ACK_USER_WRITE){const g=t;g.revert?d=VC(n,e,g.path,i,o,c):d=UC(n,e,g.path,g.affectedTree,i,o,c)}else if(t.type===pn.LISTEN_COMPLETE)d=zC(n,e,t.path,i,c);else throw Zs("Unknown operation type: "+t.type);const m=c.getChanges();return MC(e,d,m),{viewCache:d,changes:m}}function MC(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=vl(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&t.push(Ry(vl(e)))}}function Uy(n,e,t,i,o,c){const d=e.eventCache;if(_l(i,t)!=null)return e;{let f,m;if(Te(t))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=os(e),_=g instanceof xe?g:xe.EMPTY_NODE,w=hh(i,_);f=n.filter.updateFullNode(e.eventCache.getNode(),w,c)}else{const g=yl(i,os(e));f=n.filter.updateFullNode(e.eventCache.getNode(),g,c)}else{const g=be(t);if(g===".priority"){ne(Ir(t)===1,"Can't have a priority with additional path components");const _=d.getNode();m=e.serverCache.getNode();const w=Rg(i,t,_,m);w!=null?f=n.filter.updatePriority(_,w):f=d.getNode()}else{const _=$e(t);let w;if(d.isCompleteForChild(g)){m=e.serverCache.getNode();const v=Rg(i,t,d.getNode(),m);v!=null?w=d.getNode().getImmediateChild(g).updateChild(_,v):w=d.getNode().getImmediateChild(g)}else w=fh(i,g,e.serverCache);w!=null?f=n.filter.updateChild(d.getNode(),g,w,_,o,c):f=d.getNode()}}return to(e,f,d.isFullyInitialized()||Te(t),n.filter.filtersNodes())}}function xl(n,e,t,i,o,c,d,f){const m=e.serverCache;let g;const _=d?n.filter:n.filter.getIndexedFilter();if(Te(t))g=_.updateFullNode(m.getNode(),i,null);else if(_.filtersNodes()&&!m.isFiltered()){const N=m.getNode().updateChild(t,i);g=_.updateFullNode(m.getNode(),N,null)}else{const N=be(t);if(!m.isCompleteForPath(t)&&Ir(t)>1)return e;const E=$e(t),P=m.getNode().getImmediateChild(N).updateChild(E,i);N===".priority"?g=_.updatePriority(m.getNode(),P):g=_.updateChild(m.getNode(),N,P,E,Fy,null)}const w=Py(e,g,m.isFullyInitialized()||Te(t),_.filtersNodes()),v=new mh(o,w,c);return Uy(n,w,t,o,v,f)}function Nd(n,e,t,i,o,c,d){const f=e.eventCache;let m,g;const _=new mh(o,e,c);if(Te(t))g=n.filter.updateFullNode(e.eventCache.getNode(),i,d),m=to(e,g,!0,n.filter.filtersNodes());else{const w=be(t);if(w===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),i),m=to(e,g,f.isFullyInitialized(),f.isFiltered());else{const v=$e(t),N=f.getNode().getImmediateChild(w);let E;if(Te(v))E=i;else{const L=_.getCompleteChild(w);L!=null?rh(v)===".priority"&&L.getChild(Sy(v)).isEmpty()?E=L:E=L.updateChild(v,i):E=xe.EMPTY_NODE}if(N.equals(E))m=e;else{const L=n.filter.updateChild(f.getNode(),w,E,v,_,d);m=to(e,L,f.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function jg(n,e){return n.eventCache.isCompleteForChild(e)}function FC(n,e,t,i,o,c,d){let f=e;return i.foreach((m,g)=>{const _=Ze(t,m);jg(e,be(_))&&(f=Nd(n,f,_,g,o,c,d))}),i.foreach((m,g)=>{const _=Ze(t,m);jg(e,be(_))||(f=Nd(n,f,_,g,o,c,d))}),f}function Pg(n,e,t){return t.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Sd(n,e,t,i,o,c,d,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;Te(t)?g=i:g=new We(null).setTree(t,i);const _=e.serverCache.getNode();return g.children.inorderTraversal((w,v)=>{if(_.hasChild(w)){const N=e.serverCache.getNode().getImmediateChild(w),E=Pg(n,N,v);m=xl(n,m,new Ue(w),E,o,c,d,f)}}),g.children.inorderTraversal((w,v)=>{const N=!e.serverCache.isCompleteForChild(w)&&v.value===null;if(!_.hasChild(w)&&!N){const E=e.serverCache.getNode().getImmediateChild(w),L=Pg(n,E,v);m=xl(n,m,new Ue(w),L,o,c,d,f)}}),m}function UC(n,e,t,i,o,c,d){if(_l(o,t)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Te(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return xl(n,e,t,m.getNode().getChild(t),o,c,f,d);if(Te(t)){let g=new We(null);return m.getNode().forEachChild(Ws,(_,w)=>{g=g.set(new Ue(_),w)}),Sd(n,e,t,g,o,c,f,d)}else return e}else{let g=new We(null);return i.foreach((_,w)=>{const v=Ze(t,_);m.isCompleteForPath(v)&&(g=g.set(_,m.getNode().getChild(v)))}),Sd(n,e,t,g,o,c,f,d)}}function zC(n,e,t,i,o){const c=e.serverCache,d=Py(e,c.getNode(),c.isFullyInitialized()||Te(t),c.isFiltered());return Uy(n,d,t,i,Fy,o)}function VC(n,e,t,i,o,c){let d;if(_l(i,t)!=null)return e;{const f=new mh(i,e,o),m=e.eventCache.getNode();let g;if(Te(t)||be(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=yl(i,os(e));else{const w=e.serverCache.getNode();ne(w instanceof xe,"serverChildren would be complete if leaf node"),_=hh(i,w)}_=_,g=n.filter.updateFullNode(m,_,c)}else{const _=be(t);let w=fh(i,_,e.serverCache);w==null&&e.serverCache.isCompleteForChild(_)&&(w=m.getImmediateChild(_)),w!=null?g=n.filter.updateChild(m,_,w,$e(t),f,c):e.eventCache.getNode().hasChild(_)?g=n.filter.updateChild(m,_,xe.EMPTY_NODE,$e(t),f,c):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=yl(i,os(e)),d.isLeafNode()&&(g=n.filter.updateFullNode(g,d,c)))}return d=e.serverCache.isFullyInitialized()||_l(i,Ae())!=null,to(e,g,d,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new ah(i.getIndex()),c=oC(i);this.processor_=OC(c);const d=t.serverCache,f=t.eventCache,m=o.updateFullNode(xe.EMPTY_NODE,d.getNode(),null),g=c.updateFullNode(xe.EMPTY_NODE,f.getNode(),null),_=new Rr(m,d.isFullyInitialized(),o.filtersNodes()),w=new Rr(g,f.isFullyInitialized(),c.filtersNodes());this.viewCache_=Al(w,_),this.eventGenerator_=new fC(this.query_)}get query(){return this.query_}}function $C(n){return n.viewCache_.serverCache.getNode()}function BC(n){return vl(n.viewCache_)}function HC(n,e){const t=os(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Te(e)&&!t.getImmediateChild(be(e)).isEmpty())?t.getChild(e):null}function Ag(n){return n.eventRegistrations_.length===0}function qC(n,e){n.eventRegistrations_.push(e)}function Og(n,e,t){const i=[];if(t){ne(e==null,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(t,o);d&&i.push(d)})}if(e){let o=[];for(let c=0;c<n.eventRegistrations_.length;++c){const d=n.eventRegistrations_[c];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(c+1));break}}n.eventRegistrations_=o}else n.eventRegistrations_=[];return i}function Lg(n,e,t,i){e.type===pn.MERGE&&e.source.queryId!==null&&(ne(os(n.viewCache_),"We should always have a full cache before handling merges"),ne(vl(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,c=DC(n.processor_,o,e,t,i);return LC(n.processor_,c.viewCache),ne(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,zy(n,c.changes,c.viewCache.eventCache.getNode(),null)}function GC(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(et,(c,d)=>{i.push(qs(c,d))}),t.isFullyInitialized()&&i.push(Ry(t.getNode())),zy(n,i,t.getNode(),e)}function zy(n,e,t,i){const o=i?[i]:n.eventRegistrations_;return mC(n.eventGenerator_,e,t,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl;class Vy{constructor(){this.views=new Map}}function QC(n){ne(!wl,"__referenceConstructor has already been defined"),wl=n}function KC(){return ne(wl,"Reference.ts has not been loaded"),wl}function YC(n){return n.views.size===0}function ph(n,e,t,i){const o=e.source.queryId;if(o!==null){const c=n.views.get(o);return ne(c!=null,"SyncTree gave us an op for an invalid query."),Lg(c,e,t,i)}else{let c=[];for(const d of n.views.values())c=c.concat(Lg(d,e,t,i));return c}}function Wy(n,e,t,i,o){const c=e._queryIdentifier,d=n.views.get(c);if(!d){let f=yl(t,o?i:null),m=!1;f?m=!0:i instanceof xe?(f=hh(t,i),m=!1):(f=xe.EMPTY_NODE,m=!1);const g=Al(new Rr(f,m,!1),new Rr(i,o,!1));return new WC(e,g)}return d}function JC(n,e,t,i,o,c){const d=Wy(n,e,i,o,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),qC(d,t),GC(d,t)}function XC(n,e,t,i){const o=e._queryIdentifier,c=[];let d=[];const f=jr(n);if(o==="default")for(const[m,g]of n.views.entries())d=d.concat(Og(g,t,i)),Ag(g)&&(n.views.delete(m),g.query._queryParams.loadsAllData()||c.push(g.query));else{const m=n.views.get(o);m&&(d=d.concat(Og(m,t,i)),Ag(m)&&(n.views.delete(o),m.query._queryParams.loadsAllData()||c.push(m.query)))}return f&&!jr(n)&&c.push(new(KC())(e._repo,e._path)),{removed:c,events:d}}function $y(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cr(n,e){let t=null;for(const i of n.views.values())t=t||HC(i,e);return t}function By(n,e){if(e._queryParams.loadsAllData())return Ll(n);{const i=e._queryIdentifier;return n.views.get(i)}}function Hy(n,e){return By(n,e)!=null}function jr(n){return Ll(n)!=null}function Ll(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl;function ZC(n){ne(!Nl,"__referenceConstructor has already been defined"),Nl=n}function eT(){return ne(Nl,"Reference.ts has not been loaded"),Nl}let tT=1;class Dg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new We(null),this.pendingWriteTree_=RC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qy(n,e,t,i,o){return yC(n.pendingWriteTree_,e,t,i,o),o?si(n,new is(ch(),e,t)):[]}function nT(n,e,t,i){_C(n.pendingWriteTree_,e,t,i);const o=We.fromObject(t);return si(n,new Gs(ch(),e,o))}function Nr(n,e,t=!1){const i=xC(n.pendingWriteTree_,e);if(wC(n.pendingWriteTree_,e)){let c=new We(null);return i.snap!=null?c=c.set(Ae(),!0):wt(i.children,d=>{c=c.set(new Ue(d),!0)}),si(n,new gl(i.path,c,t))}else return[]}function jo(n,e,t){return si(n,new is(uh(),e,t))}function rT(n,e,t){const i=We.fromObject(t);return si(n,new Gs(uh(),e,i))}function sT(n,e){return si(n,new po(uh(),e))}function iT(n,e,t){const i=vh(n,t);if(i){const o=yh(i),c=o.path,d=o.queryId,f=It(c,e),m=new po(dh(d),f);return _h(n,c,m)}else return[]}function Sl(n,e,t,i,o=!1){const c=e._path,d=n.syncPointTree_.get(c);let f=[];if(d&&(e._queryIdentifier==="default"||Hy(d,e))){const m=XC(d,e,t,i);YC(d)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const g=m.removed;if(f=m.events,!o){const _=g.findIndex(v=>v._queryParams.loadsAllData())!==-1,w=n.syncPointTree_.findOnPath(c,(v,N)=>jr(N));if(_&&!w){const v=n.syncPointTree_.subtree(c);if(!v.isEmpty()){const N=lT(v);for(let E=0;E<N.length;++E){const L=N[E],P=L.query,S=Yy(n,L);n.listenProvider_.startListening(ro(P),go(n,P),S.hashFn,S.onComplete)}}}!w&&g.length>0&&!i&&(_?n.listenProvider_.stopListening(ro(e),null):g.forEach(v=>{const N=n.queryToTagMap.get(Dl(v));n.listenProvider_.stopListening(ro(v),N)}))}cT(n,g)}return f}function Gy(n,e,t,i){const o=vh(n,i);if(o!=null){const c=yh(o),d=c.path,f=c.queryId,m=It(d,e),g=new is(dh(f),m,t);return _h(n,d,g)}else return[]}function oT(n,e,t,i){const o=vh(n,i);if(o){const c=yh(o),d=c.path,f=c.queryId,m=It(d,e),g=We.fromObject(t),_=new Gs(dh(f),m,g);return _h(n,d,_)}else return[]}function Ed(n,e,t,i=!1){const o=e._path;let c=null,d=!1;n.syncPointTree_.foreachOnPath(o,(v,N)=>{const E=It(v,o);c=c||Cr(N,E),d=d||jr(N)});let f=n.syncPointTree_.get(o);f?(d=d||jr(f),c=c||Cr(f,Ae())):(f=new Vy,n.syncPointTree_=n.syncPointTree_.set(o,f));let m;c!=null?m=!0:(m=!1,c=xe.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((N,E)=>{const L=Cr(E,Ae());L&&(c=c.updateImmediateChild(N,L))}));const g=Hy(f,e);if(!g&&!e._queryParams.loadsAllData()){const v=Dl(e);ne(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const N=uT();n.queryToTagMap.set(v,N),n.tagToQueryMap.set(N,v)}const _=Ol(n.pendingWriteTree_,o);let w=JC(f,e,t,_,c,m);if(!g&&!d&&!i){const v=By(f,e);w=w.concat(dT(n,e,v))}return w}function gh(n,e,t){const o=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(d,f)=>{const m=It(d,e),g=Cr(f,m);if(g)return g});return Ly(o,e,c,t,!0)}function aT(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(g,_)=>{const w=It(g,t);i=i||Cr(_,w)});let o=n.syncPointTree_.get(t);o?i=i||Cr(o,Ae()):(o=new Vy,n.syncPointTree_=n.syncPointTree_.set(t,o));const c=i!=null,d=c?new Rr(i,!0,!1):null,f=Ol(n.pendingWriteTree_,e._path),m=Wy(o,e,f,c?d.getNode():xe.EMPTY_NODE,c);return BC(m)}function si(n,e){return Qy(e,n.syncPointTree_,null,Ol(n.pendingWriteTree_,Ae()))}function Qy(n,e,t,i){if(Te(n.path))return Ky(n,e,t,i);{const o=e.get(Ae());t==null&&o!=null&&(t=Cr(o,Ae()));let c=[];const d=be(n.path),f=n.operationForChild(d),m=e.children.get(d);if(m&&f){const g=t?t.getImmediateChild(d):null,_=Dy(i,d);c=c.concat(Qy(f,m,g,_))}return o&&(c=c.concat(ph(o,n,i,t))),c}}function Ky(n,e,t,i){const o=e.get(Ae());t==null&&o!=null&&(t=Cr(o,Ae()));let c=[];return e.children.inorderTraversal((d,f)=>{const m=t?t.getImmediateChild(d):null,g=Dy(i,d),_=n.operationForChild(d);_&&(c=c.concat(Ky(_,f,m,g)))}),o&&(c=c.concat(ph(o,n,i,t))),c}function Yy(n,e){const t=e.query,i=go(n,t);return{hashFn:()=>($C(e)||xe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?iT(n,t._path,i):sT(n,t._path);{const c=sb(o,t);return Sl(n,t,null,c)}}}}function go(n,e){const t=Dl(e);return n.queryToTagMap.get(t)}function Dl(n){return n._path.toString()+"$"+n._queryIdentifier}function vh(n,e){return n.tagToQueryMap.get(e)}function yh(n){const e=n.indexOf("$");return ne(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ue(n.substr(0,e))}}function _h(n,e,t){const i=n.syncPointTree_.get(e);ne(i,"Missing sync point for query tag that we're tracking");const o=Ol(n.pendingWriteTree_,e);return ph(i,t,o,null)}function lT(n){return n.fold((e,t,i)=>{if(t&&jr(t))return[Ll(t)];{let o=[];return t&&(o=$y(t)),wt(i,(c,d)=>{o=o.concat(d)}),o}})}function ro(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(eT())(n._repo,n._path):n}function cT(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const o=Dl(i),c=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(c)}}}function uT(){return tT++}function dT(n,e,t){const i=e._path,o=go(n,e),c=Yy(n,t),d=n.listenProvider_.startListening(ro(e),o,c.hashFn,c.onComplete),f=n.syncPointTree_.subtree(i);if(o)ne(!jr(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,_,w)=>{if(!Te(g)&&_&&jr(_))return[Ll(_).query];{let v=[];return _&&(v=v.concat($y(_).map(N=>N.query))),wt(w,(N,E)=>{v=v.concat(E)}),v}});for(let g=0;g<m.length;++g){const _=m[g];n.listenProvider_.stopListening(ro(_),go(n,_))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new xh(t)}node(){return this.node_}}class wh{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ze(this.path_,e);return new wh(this.syncTree_,t)}node(){return gh(this.syncTree_,this.path_)}}const hT=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Mg=function(n,e,t){if(!n||typeof n!="object")return n;if(ne(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return fT(n[".sv"],e,t);if(typeof n[".sv"]=="object")return mT(n[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},fT=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ne(!1,"Unexpected server value: "+n)}},mT=function(n,e,t){n.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ne(!1,"Unexpected increment value: "+i);const o=e.node();if(ne(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const d=o.getValue();return typeof d!="number"?i:d+i},Jy=function(n,e,t,i){return Nh(e,new wh(t,n),i)},Xy=function(n,e,t){return Nh(n,new xh(e),t)};function Nh(n,e,t){const i=n.getPriority().val(),o=Mg(i,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const d=n,f=Mg(d.getValue(),e,t);return f!==d.getValue()||o!==d.getPriority().val()?new gt(f,ut(o)):n}else{const d=n;return c=d,o!==d.getPriority().val()&&(c=c.updatePriority(new gt(o))),d.forEachChild(et,(f,m)=>{const g=Nh(m,e.getImmediateChild(f),t);g!==m&&(c=c.updateImmediateChild(f,g))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Eh(n,e){let t=e instanceof Ue?e:new Ue(e),i=n,o=be(t);for(;o!==null;){const c=$s(i.node.children,o)||{children:{},childCount:0};i=new Sh(o,i,c),t=$e(t),o=be(t)}return i}function ii(n){return n.node.value}function Zy(n,e){n.node.value=e,kd(n)}function e_(n){return n.node.childCount>0}function pT(n){return ii(n)===void 0&&!e_(n)}function Ml(n,e){wt(n.node.children,(t,i)=>{e(new Sh(t,n,i))})}function t_(n,e,t,i){t&&e(n),Ml(n,o=>{t_(o,e,!0)})}function gT(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Po(n){return new Ue(n.parent===null?n.name:Po(n.parent)+"/"+n.name)}function kd(n){n.parent!==null&&vT(n.parent,n.name,n)}function vT(n,e,t){const i=pT(t),o=Tn(n.node.children,e);i&&o?(delete n.node.children[e],n.node.childCount--,kd(n)):!i&&!o&&(n.node.children[e]=t.node,n.node.childCount++,kd(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=/[\[\].#$\/\u0000-\u001F\u007F]/,_T=/[\[\].#$\u0000-\u001F\u007F]/,Xu=10*1024*1024,kh=function(n){return typeof n=="string"&&n.length!==0&&!yT.test(n)},n_=function(n){return typeof n=="string"&&n.length!==0&&!_T.test(n)},xT=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),n_(n)},wT=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Xd(n)||n&&typeof n=="object"&&Tn(n,".sv")},r_=function(n,e,t,i){i&&e===void 0||Fl(Cl(n,"value"),e,t)},Fl=function(n,e,t){const i=t instanceof Ue?new Fb(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Jr(i));if(typeof e=="function")throw new Error(n+"contains a function "+Jr(i)+" with contents = "+e.toString());if(Xd(e))throw new Error(n+"contains "+e.toString()+" "+Jr(i));if(typeof e=="string"&&e.length>Xu/3&&Tl(e)>Xu)throw new Error(n+"contains a string greater than "+Xu+" utf8 bytes "+Jr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,c=!1;if(wt(e,(d,f)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!kh(d)))throw new Error(n+" contains an invalid key ("+d+") "+Jr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ub(i,d),Fl(n,f,i),zb(i)}),o&&c)throw new Error(n+' contains ".value" child '+Jr(i)+" in addition to actual children.")}},NT=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const c=uo(i);for(let d=0;d<c.length;d++)if(!(c[d]===".priority"&&d===c.length-1)){if(!kh(c[d]))throw new Error(n+"contains an invalid key ("+c[d]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Mb);let o=null;for(t=0;t<e.length;t++){if(i=e[t],o!==null&&rn(o,i))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},ST=function(n,e,t,i){const o=Cl(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const c=[];wt(e,(d,f)=>{const m=new Ue(d);if(Fl(o,f,Ze(t,m)),rh(m)===".priority"&&!wT(f))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(m)}),NT(o,c)},s_=function(n,e,t,i){if(!n_(t))throw new Error(Cl(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ET=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),s_(n,e,t)},bh=function(n,e){if(be(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},kT=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!xT(t))throw new Error(Cl(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ul(n,e){let t=null;for(let i=0;i<e.length;i++){const o=e[i],c=o.getPath();t!==null&&!sh(c,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:c}),t.events.push(o)}t&&n.eventLists_.push(t)}function i_(n,e,t){Ul(n,t),o_(n,i=>sh(i,e))}function sn(n,e,t){Ul(n,t),o_(n,i=>rn(i,e)||rn(e,i))}function o_(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const o=n.eventLists_[i];if(o){const c=o.path;e(c)?(CT(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function CT(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Zi&&xt("event: "+t.toString()),ri(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="repo_interrupt",IT=25;class RT{constructor(e,t,i,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pl(),this.transactionQueueTree_=new Sh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jT(n,e,t){if(n.stats_=th(n.repoInfo_),n.forceRestClient_||lb())n.server_=new ml(n.repoInfo_,(i,o,c,d)=>{Fg(n,i,o,c,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ug(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Bn(n.repoInfo_,e,(i,o,c,d)=>{Fg(n,i,o,c,d)},i=>{Ug(n,i)},i=>{PT(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=fb(n.repoInfo_,()=>new hC(n.stats_,n.server_)),n.infoData_=new aC,n.infoSyncTree_=new Dg({startListening:(i,o,c,d)=>{let f=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(f=jo(n.infoSyncTree_,i._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),Ch(n,"connected",!1),n.serverSyncTree_=new Dg({startListening:(i,o,c,d)=>(n.server_.listen(i,c,o,(f,m)=>{const g=d(f,m);sn(n.eventQueue_,i._path,g)}),[]),stopListening:(i,o)=>{n.server_.unlisten(i,o)}})}function a_(n){const t=n.infoData_.getNode(new Ue(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function zl(n){return hT({timestamp:a_(n)})}function Fg(n,e,t,i,o){n.dataUpdateCount++;const c=new Ue(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(i){const m=rl(t,g=>ut(g));d=oT(n.serverSyncTree_,c,m,o)}else{const m=ut(t);d=Gy(n.serverSyncTree_,c,m,o)}else if(i){const m=rl(t,g=>ut(g));d=rT(n.serverSyncTree_,c,m)}else{const m=ut(t);d=jo(n.serverSyncTree_,c,m)}let f=c;d.length>0&&(f=Ks(n,c)),sn(n.eventQueue_,f,d)}function Ug(n,e){Ch(n,"connected",e),e===!1&&DT(n)}function PT(n,e){wt(e,(t,i)=>{Ch(n,t,i)})}function Ch(n,e,t){const i=new Ue("/.info/"+e),o=ut(t);n.infoData_.updateSnapshot(i,o);const c=jo(n.infoSyncTree_,i,o);sn(n.eventQueue_,i,c)}function Th(n){return n.nextWriteId_++}function AT(n,e,t){const i=aT(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(o=>{const c=ut(o).withIndex(e._queryParams.getIndex());Ed(n.serverSyncTree_,e,t,!0);let d;if(e._queryParams.loadsAllData())d=jo(n.serverSyncTree_,e._path,c);else{const f=go(n.serverSyncTree_,e);d=Gy(n.serverSyncTree_,e._path,c,f)}return sn(n.eventQueue_,e._path,d),Sl(n.serverSyncTree_,e,t,null,!0),c},o=>(Ao(n,"get for query "+dt(e)+" failed: "+o),Promise.reject(new Error(o))))}function OT(n,e,t,i,o){Ao(n,"set",{path:e.toString(),value:t,priority:i});const c=zl(n),d=ut(t,i),f=gh(n.serverSyncTree_,e),m=Xy(d,f,c),g=Th(n),_=qy(n.serverSyncTree_,e,m,g,!0);Ul(n.eventQueue_,_),n.server_.put(e.toString(),d.val(!0),(v,N)=>{const E=v==="ok";E||Rt("set at "+e+" failed: "+v);const L=Nr(n.serverSyncTree_,g,!E);sn(n.eventQueue_,e,L),bd(n,o,v,N)});const w=Rh(n,e);Ks(n,w),sn(n.eventQueue_,w,[])}function LT(n,e,t,i){Ao(n,"update",{path:e.toString(),value:t});let o=!0;const c=zl(n),d={};if(wt(t,(f,m)=>{o=!1,d[f]=Jy(Ze(e,f),ut(m),n.serverSyncTree_,c)}),o)xt("update() called with empty data.  Don't do anything."),bd(n,i,"ok",void 0);else{const f=Th(n),m=nT(n.serverSyncTree_,e,d,f);Ul(n.eventQueue_,m),n.server_.merge(e.toString(),t,(g,_)=>{const w=g==="ok";w||Rt("update at "+e+" failed: "+g);const v=Nr(n.serverSyncTree_,f,!w),N=v.length>0?Ks(n,e):e;sn(n.eventQueue_,N,v),bd(n,i,g,_)}),wt(t,g=>{const _=Rh(n,Ze(e,g));Ks(n,_)}),sn(n.eventQueue_,e,[])}}function DT(n){Ao(n,"onDisconnectEvents");const e=zl(n),t=pl();yd(n.onDisconnect_,Ae(),(o,c)=>{const d=Jy(o,c,n.serverSyncTree_,e);jy(t,o,d)});let i=[];yd(t,Ae(),(o,c)=>{i=i.concat(jo(n.serverSyncTree_,o,c));const d=Rh(n,o);Ks(n,d)}),n.onDisconnect_=pl(),sn(n.eventQueue_,Ae(),i)}function MT(n,e,t){let i;be(e._path)===".info"?i=Ed(n.infoSyncTree_,e,t):i=Ed(n.serverSyncTree_,e,t),i_(n.eventQueue_,e._path,i)}function FT(n,e,t){let i;be(e._path)===".info"?i=Sl(n.infoSyncTree_,e,t):i=Sl(n.serverSyncTree_,e,t),i_(n.eventQueue_,e._path,i)}function UT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(TT)}function Ao(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xt(t,...e)}function bd(n,e,t,i){e&&ri(()=>{if(t==="ok")e(null);else{const o=(t||"error").toUpperCase();let c=o;i&&(c+=": "+i);const d=new Error(c);d.code=o,e(d)}})}function l_(n,e,t){return gh(n.serverSyncTree_,e,t)||xe.EMPTY_NODE}function Ih(n,e=n.transactionQueueTree_){if(e||Vl(n,e),ii(e)){const t=u_(n,e);ne(t.length>0,"Sending zero length transaction queue"),t.every(o=>o.status===0)&&zT(n,Po(e),t)}else e_(e)&&Ml(e,t=>{Ih(n,t)})}function zT(n,e,t){const i=t.map(g=>g.currentWriteId),o=l_(n,e,i);let c=o;const d=o.hash();for(let g=0;g<t.length;g++){const _=t[g];ne(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const w=It(e,_.path);c=c.updateChild(w,_.currentOutputSnapshotRaw)}const f=c.val(!0),m=e;n.server_.put(m.toString(),f,g=>{Ao(n,"transaction put response",{path:m.toString(),status:g});let _=[];if(g==="ok"){const w=[];for(let v=0;v<t.length;v++)t[v].status=2,_=_.concat(Nr(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&w.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();Vl(n,Eh(n.transactionQueueTree_,e)),Ih(n,n.transactionQueueTree_),sn(n.eventQueue_,e,_);for(let v=0;v<w.length;v++)ri(w[v])}else{if(g==="datastale")for(let w=0;w<t.length;w++)t[w].status===3?t[w].status=4:t[w].status=0;else{Rt("transaction at "+m.toString()+" failed: "+g);for(let w=0;w<t.length;w++)t[w].status=4,t[w].abortReason=g}Ks(n,e)}},d)}function Ks(n,e){const t=c_(n,e),i=Po(t),o=u_(n,t);return VT(n,o,i),i}function VT(n,e,t){if(e.length===0)return;const i=[];let o=[];const d=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],g=It(t,m.path);let _=!1,w;if(ne(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)_=!0,w=m.abortReason,o=o.concat(Nr(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=IT)_=!0,w="maxretry",o=o.concat(Nr(n.serverSyncTree_,m.currentWriteId,!0));else{const v=l_(n,m.path,d);m.currentInputSnapshot=v;const N=e[f].update(v.val());if(N!==void 0){Fl("transaction failed: Data returned ",N,m.path);let E=ut(N);typeof N=="object"&&N!=null&&Tn(N,".priority")||(E=E.updatePriority(v.getPriority()));const P=m.currentWriteId,S=zl(n),T=Xy(E,v,S);m.currentOutputSnapshotRaw=E,m.currentOutputSnapshotResolved=T,m.currentWriteId=Th(n),d.splice(d.indexOf(P),1),o=o.concat(qy(n.serverSyncTree_,m.path,T,m.currentWriteId,m.applyLocally)),o=o.concat(Nr(n.serverSyncTree_,P,!0))}else _=!0,w="nodata",o=o.concat(Nr(n.serverSyncTree_,m.currentWriteId,!0))}sn(n.eventQueue_,t,o),o=[],_&&(e[f].status=2,function(v){setTimeout(v,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(w==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(w),!1,null))))}Vl(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)ri(i[f]);Ih(n,n.transactionQueueTree_)}function c_(n,e){let t,i=n.transactionQueueTree_;for(t=be(e);t!==null&&ii(i)===void 0;)i=Eh(i,t),e=$e(e),t=be(e);return i}function u_(n,e){const t=[];return d_(n,e,t),t.sort((i,o)=>i.order-o.order),t}function d_(n,e,t){const i=ii(e);if(i)for(let o=0;o<i.length;o++)t.push(i[o]);Ml(e,o=>{d_(n,o,t)})}function Vl(n,e){const t=ii(e);if(t){let i=0;for(let o=0;o<t.length;o++)t[o].status!==2&&(t[i]=t[o],i++);t.length=i,Zy(e,t.length>0?t:void 0)}Ml(e,i=>{Vl(n,i)})}function Rh(n,e){const t=Po(c_(n,e)),i=Eh(n.transactionQueueTree_,e);return gT(i,o=>{Zu(n,o)}),Zu(n,i),t_(i,o=>{Zu(n,o)}),t}function Zu(n,e){const t=ii(e);if(t){const i=[];let o=[],c=-1;for(let d=0;d<t.length;d++)t[d].status===3||(t[d].status===1?(ne(c===d-1,"All SENT items should be at beginning of queue."),c=d,t[d].status=3,t[d].abortReason="set"):(ne(t[d].status===0,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(Nr(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&i.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Zy(e,void 0):t.length=c+1,sn(n.eventQueue_,Po(e),o);for(let d=0;d<i.length;d++)ri(i[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let o=t[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function $T(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Rt(`Invalid query segment '${t}' in query '${n}'`)}return e}const zg=function(n,e){const t=BT(n),i=t.namespace;t.domain==="firebase.com"&&Gn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Gn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Zk();const o=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new my(t.host,t.secure,i,o,e,"",i!==t.subdomain),path:new Ue(t.pathString)}},BT=function(n){let e="",t="",i="",o="",c="",d=!0,f="https",m=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let _=n.indexOf("/");_===-1&&(_=n.length);let w=n.indexOf("?");w===-1&&(w=n.length),e=n.substring(0,Math.min(_,w)),_<w&&(o=WT(n.substring(_,w)));const v=$T(n.substring(Math.min(n.length,w)));g=e.indexOf(":"),g>=0?(d=f==="https"||f==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const N=e.slice(0,g);if(N.toLowerCase()==="localhost")t="localhost";else if(N.split(".").length<=2)t=N;else{const E=e.indexOf(".");i=e.substring(0,E).toLowerCase(),t=e.substring(E+1),c=i}"ns"in v&&(c=v.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:d,scheme:f,pathString:o,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HT=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let o;const c=new Array(8);for(o=7;o>=0;o--)c[o]=Vg.charAt(t%64),t=Math.floor(t/64);ne(t===0,"Cannot push at time == 0");let d=c.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)d+=Vg.charAt(e[o]);return ne(d.length===20,"nextPushId: Length should be 20."),d}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,i,o){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+dt(this.snapshot.exportVal())}}class GT{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,i,o){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=o}get key(){return Te(this._path)?null:rh(this._path)}get ref(){return new Qn(this._repo,this._path)}get _queryIdentifier(){const e=bg(this._queryParams),t=Zd(e);return t==="{}"?"default":t}get _queryObject(){return bg(this._queryParams)}isEqual(e){if(e=bt(e),!(e instanceof jh))return!1;const t=this._repo===e._repo,i=sh(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return t&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+Db(this._path)}}class Qn extends jh{constructor(e,t){super(e,t,new lh,!1)}get parent(){const e=Sy(this._path);return e===null?null:new Qn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class vo{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ue(e),i=yo(this.ref,e);return new vo(this._node.getChild(t),i,et)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new vo(o,yo(this.ref,i),et)))}hasChild(e){const t=new Ue(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function In(n,e){return n=bt(n),n._checkNotDeleted("ref"),e!==void 0?yo(n._root,e):n._root}function yo(n,e){return n=bt(n),be(n._path)===null?ET("child","path",e):s_("child","path",e),new Qn(n._repo,Ze(n._path,e))}function QT(n,e){n=bt(n),bh("push",n._path),r_("push",e,n._path,!0);const t=a_(n._repo),i=HT(t),o=yo(n,i),c=yo(n,i);let d;return d=Promise.resolve(c),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}function KT(n){return bh("remove",n._path),Wl(n,null)}function Wl(n,e){n=bt(n),bh("set",n._path),r_("set",e,n._path,!1);const t=new No;return OT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function YT(n,e){ST("update",e,n._path);const t=new No;return LT(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Ph(n){n=bt(n);const e=new h_(()=>{}),t=new $l(e);return AT(n._repo,n,t).then(i=>new vo(i,new Qn(n._repo,n._path),n._queryParams.getIndex()))}class $l{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new qT("value",this,new vo(e.snapshotNode,new Qn(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new GT(this,e,t):null}matches(e){return e instanceof $l?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function JT(n,e,t,i,o){const c=new h_(t,void 0),d=new $l(c);return MT(n._repo,n,d),()=>FT(n._repo,n,d)}function f_(n,e,t,i){return JT(n,"value",e)}QC(Qn);ZC(Qn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="FIREBASE_DATABASE_EMULATOR_HOST",Cd={};let ZT=!1;function eI(n,e,t,i){n.repoInfo_=new my(e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function tI(n,e,t,i,o){let c=i||n.options.databaseURL;c===void 0&&(n.options.projectId||Gn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xt("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let d=zg(c,o),f=d.repoInfo,m;typeof process<"u"&&lg&&(m=lg[XT]),m?(c=`http://${m}?ns=${f.namespace}`,d=zg(c,o),f=d.repoInfo):d.repoInfo.secure;const g=new ub(n.name,n.options,e);kT("Invalid Firebase Database URL",d),Te(d.path)||Gn("Database URL must point to the root of a Firebase Database (not including a child path).");const _=rI(f,n,g,new cb(n,t));return new sI(_,n)}function nI(n,e){const t=Cd[e];(!t||t[n.key]!==n)&&Gn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),UT(n),delete t[n.key]}function rI(n,e,t,i){let o=Cd[e.name];o||(o={},Cd[e.name]=o);let c=o[n.toURLString()];return c&&Gn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new RT(n,ZT,t,i),o[n.toURLString()]=c,c}class sI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qn(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(nI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gn("Cannot call "+e+" on a deleted database.")}}function iI(n=vv(),e){const t=Wd(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=sN("database");i&&oI(t,...i)}return t}function oI(n,e,t,i={}){n=bt(n),n._checkNotDeleted("useEmulator");const o=`${e}:${t}`,c=n._repoInternal;if(n._instanceStarted){if(o===n._repoInternal.repoInfo_.host&&es(i,c.repoInfo_.emulatorOptions))return;Gn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)i.mockUserToken&&Gn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Xa(Xa.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:iN(i.mockUserToken,n.app.options.projectId);d=new Xa(f)}eI(c,o,i,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){Gk(ti),Bs(new ts("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return tI(i,o,c,t)},"PUBLIC").setMultipleInstances(!0)),kr(cg,ug,n),kr(cg,ug,"esm2017")}Bn.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Bn.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};aI();const lI={apiKey:"AIzaSyAKjCipwXObAEYaScVaoV-t9y1d898vGwo",authDomain:"icsaselection.firebaseapp.com",databaseURL:"https://icsaselection-default-rtdb.firebaseio.com",projectId:"icsaselection",storageBucket:"icsaselection.firebasestorage.app",messagingSenderId:"390416164111",appId:"1:390416164111:web:9abe0b1b65ba15a19b4a7a"},m_=gv(lI),Rn=iI(m_),Bl=$k(m_),cI=async(n,e)=>{try{return(await CE(Bl,n,e)).user}catch(t){throw t}},uI=async(n,e)=>{try{return(await TE(Bl,n,e)).user}catch(t){throw t}},dI=async()=>{try{await PE(Bl)}catch(n){throw n}},hI=n=>jE(Bl,n),fI=n=>Wl(In(Rn,"eventState"),n),mI=async()=>{const n=await Ph(In(Rn,"eventState"));return n.exists()?n.val():null},pI=n=>{const e=In(Rn,"eventState");return f_(e,t=>{n(t.val())})},gI=(n,e)=>YT(In(Rn,`users/${n}`),{votingHistory:e}),p_=n=>Wl(In(Rn,"users"),n),g_=async()=>{const n=await Ph(In(Rn,"users"));return n.exists()?n.val():[]},vI=n=>{const e=In(Rn,"users");return f_(e,t=>{n(t.val())})},v_=R.createContext(null);function yI({children:n}){const[e,t]=R.useState(null),[i,o]=R.useState([]),[c,d]=R.useState(!0);R.useEffect(()=>{const _=hI(async v=>{if(v){const N=await g_(),E=N?Object.values(N).find(L=>L.email===v.email):null;if(E){const L={...E,id:v.uid};t(L)}else t({id:v.uid,email:v.email,name:v.displayName||v.email.split("@")[0],role:"selector",isActive:!0,votingHistory:{}})}else t(null);d(!1)}),w=vI(v=>{v&&o(Object.values(v))});return()=>{_(),w()}},[]);const f=_=>{t(_);const w=i.map(v=>v.id===_.id?_:v);p_(w),_.votingHistory&&gI(_.id,_.votingHistory)},m=async(_,w)=>{try{return await uI(_,w),{success:!0}}catch(v){return{success:!1,error:v.message}}},g=async()=>{await dI(),t(null)};return l.jsx(v_.Provider,{value:{user:e,login:m,logout:g,updateUser:f,allUsers:i,loading:c},children:n})}function Gt(){const n=R.useContext(v_);if(n===null)throw new Error("useAuth must be used within an AuthProvider");return n}const Ah="logs",Xr=(n,e)=>{try{const t=QT(In(Rn,Ah)),i={id:t.key,timestamp:new Date().toISOString(),type:n,data:e};return Wl(t,i)}catch(t){return console.error("Error adding log entry:",t),Promise.reject(t)}},Wg=async()=>{try{const n=await Ph(In(Rn,Ah));if(n.exists()){const e=n.val();return Object.values(e)}return[]}catch(n){return console.error("Error retrieving logs:",n),[]}},_I=n=>{try{return KT(In(Rn,`${Ah}/${n}`))}catch(e){return console.error("Error deleting log:",e),Promise.reject(e)}},y_=R.createContext(null),B={PRESELECTION:"preselection",ROUND1_AQ:"round1_aq",ROUND1_LOCK:"round1_lock",ROUND1_FINALIZED:"round1_finalized",ROUND_LEFTOVER:"round_leftover",ROUND_RANKING:"round_ranking",ROUND_FINALIZED:"round_finalized",ALTERNATE_LEFTOVER:"alternate_leftover",ALTERNATE_RANKING:"alternate_ranking",ALTERNATE_FINALIZED:"alternate_finalized",SEEDING:"seeding",SEEDING_ADJUSTMENTS:"seeding_adjustments",COMPLETED:"completed"};function xI({children:n}){const[e,t]=R.useState({phase:B.PRESELECTION,currentRound:0,qualifiedTeams:[],pendingQualifiedTeams:[],remainingBerths:36,teams:[],rankingGroup:[],roundHistory:{},selectionType:null,alternateCount:0}),[i,o]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const T=await mI();T&&(console.log("Loaded saved event state from Firebase"),t(T)),o(!1)}catch(T){console.error("Error loading event state:",T),o(!1)}})();const S=pI(T=>{T&&(console.log("Event state updated from Firebase"),t(T))});return()=>S()},[]),R.useEffect(()=>{var P;i||(console.log("Saving event state to Firebase with ranking group size:",((P=e.rankingGroup)==null?void 0:P.length)||0),fI(e).catch(S=>{console.error("Error saving event state:",S)}))},[e,i]);const c=P=>{t(S=>({...S,selectionType:P}))},d=()=>{t({phase:B.PRESELECTION,currentRound:0,qualifiedTeams:[],remainingBerths:36,teams:[],rankingGroup:[],roundHistory:{},selectionType:null})},f=P=>{t(S=>({...S,teams:P}))},m=P=>{t(S=>({...S,pendingQualifiedTeams:P}))},g=()=>{const P={[B.PRESELECTION]:B.ROUND1_AQ,[B.ROUND1_AQ]:B.ROUND1_LOCK,[B.ROUND1_LOCK]:B.ROUND1_FINALIZED,[B.ROUND1_FINALIZED]:B.ROUND_LEFTOVER,[B.ROUND_LEFTOVER]:B.ROUND_RANKING,[B.ROUND_RANKING]:B.ROUND_FINALIZED,[B.ROUND_FINALIZED]:B.ROUND_LEFTOVER,[B.ALTERNATE_LEFTOVER]:B.ALTERNATE_RANKING,[B.ALTERNATE_RANKING]:B.ALTERNATE_FINALIZED,[B.ALTERNATE_FINALIZED]:B.ALTERNATE_LEFTOVER,[B.SEEDING]:B.SEEDING_ADJUSTMENTS,[B.SEEDING_ADJUSTMENTS]:B.COMPLETED,[B.COMPLETED]:B.PRESELECTION};t(S=>{let T=P[S.phase],C=S.currentRound;if(S.phase===B.ROUND_FINALIZED&&(S.qualifiedTeams.length>=36||S.remainingBerths===0)&&(console.log("All 36 teams qualified! Transitioning to alternate selection"),T=B.ALTERNATE_LEFTOVER),S.phase===B.ALTERNATE_FINALIZED){const A=S.alternateCount||0;console.log(`Completed alternate round, current count: ${A}`),A>=2&&(console.log("Both alternates selected, moving to seeding phase"),T=B.SEEDING)}S.phase===B.PRESELECTION?C=1:(S.phase===B.ROUND1_FINALIZED||S.phase===B.ROUND_FINALIZED&&T===B.ROUND_LEFTOVER||S.phase===B.ALTERNATE_FINALIZED&&T===B.ALTERNATE_LEFTOVER)&&(C=S.currentRound+1);let D=[...S.qualifiedTeams||[]],z=S.remainingBerths,V=Array.isArray(S.pendingQualifiedTeams)?[...S.pendingQualifiedTeams]:[],b=[...S.rankingGroup||[]],x=S.alternateCount||0;if(S.phase===B.ROUND1_LOCK&&T===B.ROUND1_FINALIZED||S.phase===B.ROUND_RANKING&&T===B.ROUND_FINALIZED||S.phase===B.ALTERNATE_RANKING&&T===B.ALTERNATE_FINALIZED){D=[...D,...V];const A=V.filter(q=>q.status.isAlternate).length,H=V.length-A;if(z=Math.max(0,S.remainingBerths-H),S.phase===B.ROUND_RANKING||S.phase===B.ALTERNATE_RANKING){const q=new Set(V.map(Z=>Z.id));b=b.filter(Z=>!q.has(Z.id)),console.log(`Removed ${V.length} newly qualified teams from ranking group. New size: ${b.length}`)}else b=[];S.phase===B.ALTERNATE_RANKING&&(x++,console.log(`Increasing alternate count to ${x}`)),V=[]}let k=null;if(T===B.ROUND_LEFTOVER&&(S.phase===B.ROUND1_FINALIZED||S.phase===B.ROUND_FINALIZED)){const A=z;if(k=Math.floor(A/3),k===0&&A>0&&(k=1),console.log(`Round ${C}: Qualifying ${k} teams out of ${A} remaining berths`),S.phase===B.ROUND1_FINALIZED){console.log("Initializing ranking group after Round 1");const H=new Set([...(D||[]).map(se=>se.id),...(V||[]).map(se=>se.id)]),q=S.teams.filter(se=>!H.has(se.id)).sort((se,pe)=>se.csrRank-pe.csrRank),Z=Math.min(z*2,q.length);b=q.slice(0,Z),console.log(`Initial ranking group created with ${b.length} teams (2x the ${z} remaining berths)`)}else console.log(`Round ${C}: Preserving existing ranking group with ${b.length} teams`);if(b.length<5){console.log(`FAIL-SAFE: Ranking group only has ${b.length} teams, adding more teams from CSR rankings`);const H=new Set([...(D||[]).map(ge=>ge.id),...(V||[]).map(ge=>ge.id)]),q=new Set(b.map(ge=>ge.id)),Z=S.teams.filter(ge=>!H.has(ge.id)&&!q.has(ge.id)).sort((ge,re)=>ge.csrRank-re.csrRank),se=5-b.length,pe=Z.slice(0,se);b=[...b,...pe],console.log(`Added ${pe.length} additional teams to ranking group. New size: ${b.length}`)}}if(T===B.ALTERNATE_LEFTOVER){console.log("Initializing ranking group for alternate selection");const A=new Set([...(D||[]).map(H=>H.id),...(V||[]).map(H=>H.id)]);if(S.rankingGroup&&S.rankingGroup.length>0){const H=S.rankingGroup.filter(q=>!A.has(q.id));if(H.length>=5)b=H,console.log(`Using existing ranking group with ${b.length} teams for alternate selection`);else{console.log("Not enough teams in existing ranking group, adding more from CSR rankings");const q=S.teams.filter(pe=>!A.has(pe.id)&&!H.map(ge=>ge.id).includes(pe.id)).sort((pe,ge)=>pe.csrRank-ge.csrRank),Z=5-H.length,se=q.slice(0,Z);b=[...H,...se],console.log(`Created ranking group with ${b.length} teams for alternate selection`)}}else{console.log("No existing ranking group, creating one from CSR rankings");const H=S.teams.filter(Z=>!A.has(Z.id)).sort((Z,se)=>Z.csrRank-se.csrRank),q=Math.min(5,H.length);b=H.slice(0,q),console.log(`Created fallback ranking group with ${b.length} teams for alternate selection`)}}if(S.phase===B.SEEDING&&T===B.COMPLETED){const A=[...D].filter(se=>!se.status.isAlternate),H=[...D].filter(se=>se.status.isAlternate),q=new Set(D.map(se=>se.id)),Z=S.teams.filter(se=>!q.has(se.id));Xr(S.selectionType,{event:"process_completed",timestamp:new Date().toISOString(),qualifiedTeams:A,alternateTeams:H,leftoverTeams:Z,totalTeamsCount:S.teams.length,summary:{selectionType:S.selectionType,totalQualified:A.length,totalAlternates:H.length,totalLeftover:Z.length}})}return Xr(S.selectionType,{event:"phase_change",oldPhase:S.phase,newPhase:T,currentRound:C,rankingGroupSize:b.length,qualifiedTeamsCount:D.length,remainingBerths:z}),{...S,phase:T,currentRound:C,qualifiedTeams:D,pendingQualifiedTeams:V,remainingBerths:z,teamsToQualifyThisRound:k,rankingGroup:b,alternateCount:x}})},_=P=>{t(S=>{const T=Array.isArray(S.pendingQualifiedTeams)?S.pendingQualifiedTeams:[],C=new Set([...T.map(z=>z.id),...(S.qualifiedTeams||[]).map(z=>z.id)]),D=P.filter(z=>!C.has(z.id));return console.log(`Adding ${D.length} unique teams to pending qualified list`),Xr(S.selectionType,{event:"teams_qualified",phase:S.phase,round:S.currentRound,newlyQualifiedTeams:D.map(z=>({id:z.id,name:z.name,qualificationMethod:z.status.qualificationMethod}))}),{...S,pendingQualifiedTeams:[...T,...D]}})},w=P=>{console.log("UPDATE RANKING GROUP CALLED with",P.length,"teams"),console.log("Teams being added to ranking group:",P.map(S=>S.name).join(", ")),P.length<5?(console.log(`FAIL-SAFE: Ranking group only has ${P.length} teams, adding more teams from CSR rankings`),t(S=>{const T=new Set([...(S.qualifiedTeams||[]).map(x=>x.id),...(S.pendingQualifiedTeams||[]).map(x=>x.id)]),C=new Set(P.map(x=>x.id)),D=S.teams.filter(x=>!T.has(x.id)&&!C.has(x.id)).sort((x,k)=>x.csrRank-k.csrRank),z=5-P.length,V=D.slice(0,z),b=[...P,...V];return console.log(`Added ${V.length} additional teams to ranking group. New size: ${b.length}`),Xr(S.selectionType,{event:"ranking_group_updated",phase:S.phase,round:S.currentRound,teamsCount:b.length,failSafeApplied:!0,teams:b.map(x=>({id:x.id,name:x.name}))}),{...S,rankingGroup:b}})):t(S=>(Xr(S.selectionType,{event:"ranking_group_updated",phase:S.phase,round:S.currentRound,teamsCount:P.length,teams:P.map(T=>({id:T.id,name:T.name}))}),{...S,rankingGroup:P}))},v=(P,S)=>{t(T=>({...T,roundHistory:{...T.roundHistory,[P]:S}}))},N=P=>{t(S=>(Xr(S.selectionType,{event:"rankings_submitted",phase:S.phase,round:P}),S))},E={canAdvancePhase:e.phase!==B.ROUND_FINALIZED&&e.phase!==void 0,canQualifyTeams:e.remainingBerths>0,canUpdateRankingGroup:[B.ROUND_LEFTOVER,B.ROUND_RANKING].includes(e.phase)},L={eventState:e,loading:i,advancePhase:g,qualifyTeams:_,updateRankingGroup:w,storeRoundResults:v,setEventTeams:f,resetEventState:d,setPendingQualifiedTeams:m,setSelectionType:c,logSelectorRankings:N,actionPermissions:E};return l.jsx(y_.Provider,{value:L,children:n})}function ot(){const n=R.useContext(y_);if(!n)throw new Error("useEvent must be used within an EventProvider");return n}function ed({children:n,allowedRoles:e}){const{user:t,loading:i}=Gt();if(i)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(!t)return l.jsx(rd,{to:"/login",replace:!0});if(e&&!e.includes(t.role)){const o=`/${t.role}`;return l.jsx(rd,{to:o,replace:!0})}return n}function wI(){const{user:n,logout:e}=Gt(),t=xo(),i=()=>{e(),t("/login")},o=c=>c.charAt(0).toUpperCase()+c.slice(1);return l.jsx("nav",{className:"bg-white shadow-md",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-xl font-bold",children:"Sailing Nationals Selection"}),n&&l.jsx("div",{className:"ml-4 px-3 py-1 bg-gray-100 rounded-full text-sm",children:o(n.role)})]}),n&&l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("span",{className:"text-gray-700",children:[n.name," (",n.email,")"]}),l.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Logout"})]})]})})})}function td({children:n}){const{eventState:e}=ot();return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(wI,{}),e.selectionType&&l.jsx("div",{className:"bg-blue-600 text-white py-2 text-center",children:l.jsxs("h1",{className:"text-lg font-bold",children:[e.selectionType==="women"?"Women's":"Open"," Nationals Selection"]})}),l.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n})]})}function NI(){const[n,e]=R.useState(""),[t,i]=R.useState(""),[o,c]=R.useState(""),{login:d}=Gt();xo();const f=async m=>{m.preventDefault(),c("");try{const g=await d(n,t);g.success||c(g.error||"Failed to log in")}catch{c("An error occurred during login")}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-center text-3xl font-bold",children:"Sailing Nationals Selection"}),l.jsx("p",{className:"mt-2 text-center text-gray-600",children:"Please sign in to continue"})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[o&&l.jsx("div",{className:"text-red-500 text-center text-sm",children:o}),l.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),l.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",value:n,onChange:m=>e(m.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),l.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",value:t,onChange:m=>i(m.target.value)})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Sign in"})}),l.jsx("div",{className:"text-center",children:l.jsx("a",{href:"/register",className:"text-blue-600 hover:text-blue-800",children:"Need an account? Register"})})]})]})})}function SI(){const[n,e]=R.useState(""),[t,i]=R.useState(""),[o,c]=R.useState(""),[d,f]=R.useState("selector"),[m,g]=R.useState(""),_=xo(),w=async v=>{v.preventDefault(),g("");try{const N=await cI(t,o),E=await g_()||{},L={id:N.uid,name:n,email:t,role:d,isActive:!0,votingHistory:{}},P={...E,[N.uid]:L};await p_(P),_("/login")}catch(N){g(N.message)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:[l.jsx("h2",{className:"text-center text-3xl font-bold",children:"Register"}),m&&l.jsx("div",{className:"text-red-500 text-center text-sm",children:m}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),l.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",value:n,onChange:v=>e(v.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),l.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",value:t,onChange:v=>i(v.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),l.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",value:o,onChange:v=>c(v.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),l.jsxs("select",{id:"role",name:"role",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",value:d,onChange:v=>f(v.target.value),children:[l.jsx("option",{value:"selector",children:"Selector"}),l.jsx("option",{value:"parliamentarian",children:"Parliamentarian"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Register"})}),l.jsx("div",{className:"text-center",children:l.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-800",children:"Already have an account? Login"})})]})]})})}function EI(){const{eventState:n}=ot(),{user:e,updateUser:t}=Gt(),[i,o]=R.useState(()=>{var E,L;const N=((L=(E=e==null?void 0:e.votingHistory)==null?void 0:E.round1)==null?void 0:L.lockVotes)||[];return new Set(N)}),[c,d]=R.useState(()=>{var N,E;return((E=(N=e==null?void 0:e.votingHistory)==null?void 0:N.round1)==null?void 0:E.submitted)||!1}),[f,m]=R.useState("");R.useEffect(()=>{var N;(N=e==null?void 0:e.votingHistory)!=null&&N.round1&&(o(new Set(e.votingHistory.round1.lockVotes||[])),d(e.votingHistory.round1.submitted||!1))},[e]);const g=[...n.teams].sort((N,E)=>N.name.localeCompare(E.name)),_=N=>{c||o(E=>{const L=new Set(E);return L.has(N)?L.delete(N):L.add(N),L})},w=N=>f.trim()?N.filter(E=>E.name.toLowerCase().includes(f.toLowerCase())):N,v=()=>{const N={lockVotes:Array.from(i),submitted:!0,timestamp:new Date().toISOString()},E={...e,votingHistory:{...e.votingHistory,round1:N}};t(E),d(!0),alert("Your lock votes have been submitted successfully!")};return l.jsx("div",{className:"w-full bg-white rounded-lg shadow-sm",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Round 1: Lock Vote Submission"}),c?l.jsxs("div",{className:"bg-green-50 p-6 rounded-lg text-center",children:[l.jsx("h3",{className:"text-xl font-medium text-green-700 mb-2",children:"Votes Submitted"}),l.jsx("p",{className:"mb-4",children:"Your lock votes have been recorded."}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-4",children:[...i].map(N=>{const E=n.teams.find(L=>L.id===N);return l.jsx("div",{className:"bg-white p-3 rounded border border-green-200",children:E?E.name:N},N)})}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change My Votes"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[l.jsxs("p",{className:"text-blue-700",children:["Teams Selected: ",i.size]}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Select the teams you believe should automatically qualify based on their performance throughout the season."})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{children:"Teams receiving votes from 60% or more of selectors will automatically qualify."}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"You can select as many teams as you believe deserve to qualify."})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:f,onChange:N=>m(N.target.value),placeholder:"Search teams by name or CSR rank...",className:"w-full p-3 border border-gray-300 rounded-lg pl-10"}),l.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),f&&l.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"border rounded-lg",children:[l.jsxs("div",{className:"p-3 bg-gray-50 border-b font-medium flex justify-between",children:[l.jsx("div",{children:"All Teams"}),l.jsxs("div",{className:"text-sm bg-blue-100 px-2 py-1 rounded",children:[w(g).length," teams"]})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:w(g).map(N=>l.jsxs("div",{className:`flex items-center justify-between p-3 border-b last:border-b-0 ${i.has(N.id)?"bg-blue-50":"hover:bg-gray-50"}`,children:[l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:N.name})}),l.jsx("input",{type:"checkbox",checked:i.has(N.id),onChange:()=>_(N.id),className:"h-5 w-5 text-blue-600"})]},N.id))})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Submit Lock Votes"})})]})]})})}function kI(){const{eventState:n}=ot(),{user:e,updateUser:t}=Gt(),i=`round${n.currentRound}_leftover`,[o,c]=R.useState(()=>{var T,C;const S=((C=(T=e==null?void 0:e.votingHistory)==null?void 0:T[i])==null?void 0:C.votes)||[];return new Set(S)}),[d,f]=R.useState(()=>{var S,T;return((T=(S=e==null?void 0:e.votingHistory)==null?void 0:S[i])==null?void 0:T.submitted)||!1}),[m,g]=R.useState(""),[_,w]=R.useState([]),[v,N]=R.useState([]);R.useEffect(()=>{var T;const S=`round${n.currentRound}_leftover`;(T=e==null?void 0:e.votingHistory)!=null&&T[S]?(c(new Set(e.votingHistory[S].votes||[])),f(e.votingHistory[S].submitted||!1)):(c(new Set),f(!1))},[e,n.currentRound]),R.useEffect(()=>{if((!n.rankingGroup||n.rankingGroup.length===0)&&n.currentRound>1){console.log("Creating local ranking group for filtering");const S=new Set;n.qualifiedTeams&&n.qualifiedTeams.forEach(z=>S.add(z.id)),n.pendingQualifiedTeams&&n.pendingQualifiedTeams.forEach(z=>S.add(z.id));const T=Math.min((36-n.qualifiedTeams.filter(z=>z.status.qualificationRound===1).length)*2,n.teams.filter(z=>!S.has(z.id)).length),D=n.teams.filter(z=>!S.has(z.id)).sort((z,V)=>z.csrRank-V.csrRank).slice(0,T);N(D),console.log("Local ranking group created with",D.length,"teams based on initial calculation")}else N(n.rankingGroup||[])},[n.teams,n.qualifiedTeams,n.pendingQualifiedTeams,n.currentRound,n.rankingGroup]),R.useEffect(()=>{if(!n.teams)return;n.phase,B.ALTERNATE_LEFTOVER;const S=new Set;n.qualifiedTeams&&n.qualifiedTeams.forEach(z=>S.add(z.id)),n.pendingQualifiedTeams&&n.pendingQualifiedTeams.forEach(z=>S.add(z.id));const T=new Set;v.forEach(z=>T.add(z.id));const D=[...n.teams.filter(z=>!S.has(z.id)&&!T.has(z.id))].sort((z,V)=>z.name.localeCompare(V.name));w(D)},[n.teams,n.qualifiedTeams,n.pendingQualifiedTeams,v]);const E=()=>{const S={votes:Array.from(o),submitted:!0,timestamp:new Date().toISOString()},T={...e,votingHistory:{...e.votingHistory,[i]:S}};t(T),f(!0),alert("Your leftover votes have been submitted successfully!")},L=S=>{d||c(T=>{const C=new Set(T);return C.has(S)?C.delete(S):C.add(S),C})},P=S=>m.trim()?S.filter(T=>T.name.toLowerCase().includes(m.toLowerCase())):S;return l.jsx("div",{className:"w-full bg-white rounded-lg shadow-sm",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-6",children:["Round ",n.currentRound,": Leftover Team Voting"]}),d?l.jsxs("div",{className:"bg-green-50 p-6 rounded-lg text-center",children:[l.jsx("h3",{className:"text-xl font-medium text-green-700 mb-2",children:"Votes Submitted"}),l.jsx("p",{className:"mb-4",children:"Your leftover team votes have been recorded."}),o.size>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-4",children:[...o].map(S=>{const T=n.teams.find(C=>C.id===S);return l.jsx("div",{className:"bg-white p-3 rounded border border-green-200",children:T?T.name:S},S)})}):l.jsx("p",{className:"italic text-gray-500",children:"No teams selected for leftover voting"}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change My Votes"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Leftover Team Voting"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"You can vote for teams outside the initial ranking group that you believe should be considered for ranking. Teams receiving votes from 80% or more of selectors will be added to the ranking group."})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:m,onChange:S=>g(S.target.value),placeholder:"Search teams by name...",className:"w-full p-3 border border-gray-300 rounded-lg pl-10"}),l.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),m&&l.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),l.jsxs("div",{className:"mb-6 border rounded-lg",children:[l.jsxs("div",{className:"p-3 bg-gray-50 border-b font-medium flex justify-between",children:[l.jsxs("div",{children:["Teams Available for Leftover Voting",l.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(Teams outside the initial ranking group)"})]}),l.jsxs("div",{className:"text-sm bg-blue-100 px-2 py-1 rounded",children:[P(_).length," teams"]})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:P(_).length>0?P(_).map(S=>l.jsxs("div",{className:`mb-2 p-3 bg-white rounded border ${o.has(S.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"} flex justify-between items-center cursor-pointer`,onClick:()=>L(S.id),children:[l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:S.name})}),l.jsx("div",{className:"flex items-center",children:l.jsx("input",{type:"checkbox",checked:o.has(S.id),onChange:()=>L(S.id),className:"h-5 w-5 text-blue-600"})})]},S.id)):l.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"No teams match your search criteria"})})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Submit Leftover Votes"})})]})]})})}function bI(){const{eventState:n}=ot(),{user:e,updateUser:t}=Gt(),i=`round${n.currentRound}_ranking`,[o,c]=R.useState(()=>{var C,D;return(((D=(C=e==null?void 0:e.votingHistory)==null?void 0:C[i])==null?void 0:D.rankings)||[]).map(z=>n.teams.find(V=>V.id===z)||{id:z,name:"Unknown Team"})}),[d,f]=R.useState([]),[m,g]=R.useState(()=>{var T,C;return((C=(T=e==null?void 0:e.votingHistory)==null?void 0:T[i])==null?void 0:C.submitted)||!1}),[_,w]=R.useState("");R.useEffect(()=>{var V;if(console.log("Ranking Group Length:",((V=n.rankingGroup)==null?void 0:V.length)||0),console.log("Current Ranking Group:",n.rankingGroup),!n.rankingGroup||n.rankingGroup.length===0){f([]);return}const T=[...n.rankingGroup],C=new Set(o.map(b=>b.id)),D=new Set([...(n.qualifiedTeams||[]).map(b=>b.id),...(n.pendingQualifiedTeams||[]).map(b=>b.id)]),z=T.filter(b=>!C.has(b.id)&&!D.has(b.id)).sort((b,x)=>b.name.localeCompare(x.name));f(z)},[n.rankingGroup,o,n.qualifiedTeams,n.pendingQualifiedTeams]),R.useEffect(()=>{var C;const T=`round${n.currentRound}_ranking`;if((C=e==null?void 0:e.votingHistory)!=null&&C[T]){const z=(e.votingHistory[T].rankings||[]).map(V=>n.teams.find(b=>b.id===V)||{id:V,name:"Unknown Team"});c(z),g(e.votingHistory[T].submitted||!1)}else c([]),g(!1)},[e,n.currentRound,n.teams]);const v=()=>{if(o.length!==n.rankingGroup.length){alert(`Please rank all ${n.rankingGroup.length} teams before submitting. You've currently ranked ${o.length} teams.`);return}const T={rankings:o.map(D=>D.id),submitted:!0,timestamp:new Date().toISOString()},C={...e,votingHistory:{...e.votingHistory,[i]:T}};t(C),g(!0),alert("Your rankings have been submitted successfully!")},N=T=>{m||(c([...o,T]),f(d.filter(C=>C.id!==T.id)))},E=T=>{m||(f([...d,T].sort((C,D)=>C.name.localeCompare(D.name))),c(o.filter(C=>C.id!==T.id)))},L=T=>{if(T===0||m)return;const C=[...o],D=C[T];C[T]=C[T-1],C[T-1]=D,c(C)},P=T=>{if(T===o.length-1||m)return;const C=[...o],D=C[T];C[T]=C[T+1],C[T+1]=D,c(C)},S=T=>_.trim()?T.filter(C=>C.name.toLowerCase().includes(_.toLowerCase())||C.csrRank.toString().includes(_)):T;return l.jsx("div",{className:"w-full bg-white rounded-lg shadow-sm",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-6",children:["Round ",n.currentRound,": Team Ranking"]}),m?l.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-medium text-green-700 mb-2",children:"Rankings Submitted"}),l.jsx("p",{className:"mb-4",children:"Your team rankings have been recorded."}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Your Final Rankings:"}),l.jsx("div",{className:"space-y-2",children:o.map((T,C)=>l.jsxs("div",{className:"p-3 bg-white border border-green-200 rounded-lg flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:C+1}),l.jsx("div",{className:"flex-grow",children:l.jsx("p",{className:"font-medium",children:T.name})})]},T.id))})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change My Rankings"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Team Ranking Instructions"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:'Add teams from the "Available Teams" list to your rankings. Use the up and down arrows to arrange them in your preferred order.'}),l.jsx("div",{className:"mt-3 p-2 bg-green-100 rounded-lg text-center",children:l.jsxs("p",{className:"font-medium text-green-800",children:["The top ",Math.floor(n.remainingBerths/3)||1," teams will qualify this round"]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[l.jsx("h3",{className:"font-medium",children:"Available Teams"}),l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"text-sm bg-blue-100 px-2 py-1 rounded mr-3",children:[S(d).length," teams"]}),l.jsxs("div",{className:"relative w-60",children:[l.jsx("input",{type:"text",value:_,onChange:T=>w(T.target.value),placeholder:"Search teams...",className:"w-full p-2 border border-gray-300 rounded-lg pl-8 text-sm"}),l.jsx("div",{className:"absolute left-2 top-2.5 text-gray-400",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})]})]}),l.jsxs("div",{className:"border rounded-lg p-2 min-h-80 bg-gray-50",children:[S(d).map(T=>l.jsxs("div",{className:"mb-2 p-3 bg-white rounded border border-gray-200 flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:T.name})}),l.jsx("button",{onClick:()=>N(T),className:"p-1 bg-blue-100 rounded hover:bg-blue-200",title:"Add to rankings",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},T.id)),S(d).length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:_?"No teams match your search":"All teams have been ranked"})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"font-medium",children:"Your Rankings"}),l.jsxs("div",{className:"text-sm bg-blue-100 px-2 py-1 rounded",children:[o.length," teams ranked"]})]}),l.jsxs("div",{className:"border rounded-lg p-2 min-h-80 bg-gray-50",children:[o.map((T,C)=>l.jsxs("div",{className:"mb-2 p-3 bg-white rounded border border-gray-200 flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:C+1}),l.jsx("div",{className:"flex-grow",children:l.jsx("p",{className:"font-medium",children:T.name})}),l.jsxs("div",{className:"flex flex-col space-y-1 ml-2",children:[l.jsx("button",{onClick:()=>L(C),disabled:C===0,className:`p-1 rounded ${C===0?"text-gray-300 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:"Move up",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"18 15 12 9 6 15"})})}),l.jsx("button",{onClick:()=>P(C),disabled:C===o.length-1,className:`p-1 rounded ${C===o.length-1?"text-gray-300 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:"Move down",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),l.jsx("button",{onClick:()=>E(T),className:"p-1 bg-red-100 rounded hover:bg-red-200 ml-2",title:"Remove from rankings",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},T.id)),o.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Add teams from the available list to rank them"})]})]})]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsxs("button",{onClick:v,disabled:o.length!==n.rankingGroup.length,className:`px-4 py-2 rounded-lg ${o.length===n.rankingGroup.length?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 cursor-not-allowed text-gray-500"}`,children:["Submit Rankings (",o.length,"/",n.rankingGroup.length,")"]})})]})]})})}class CI{constructor(){this.subscribers={},this.lastEventState=null,this.pollingInterval=null,this.pollingDelay=3e3}subscribe(e,t){return this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t),()=>{this.subscribers[e]=this.subscribers[e].filter(i=>i!==t)}}publish(e,t){this.subscribers[e]&&this.subscribers[e].forEach(i=>{i(t)})}startPolling(e){this.pollingInterval&&clearInterval(this.pollingInterval),this.lastEventState=JSON.stringify(e()),this.pollingInterval=setInterval(()=>{var i,o;const t=JSON.stringify(e());if(t!==this.lastEventState){const c=JSON.parse(this.lastEventState),d=JSON.parse(t);this.lastEventState=t,c.phase!==d.phase&&this.publish("phase_changed",{oldPhase:c.phase,newPhase:d.phase}),((i=c.qualifiedTeams)==null?void 0:i.length)!==((o=d.qualifiedTeams)==null?void 0:o.length)&&this.publish("teams_qualified",{newlyQualified:d.qualifiedTeams.slice(c.qualifiedTeams.length),totalQualified:d.qualifiedTeams.length}),JSON.stringify(c.rankingGroup)!==JSON.stringify(d.rankingGroup)&&this.publish("ranking_group_updated",{rankingGroup:d.rankingGroup}),this.publish("state_updated",{oldState:c,newState:d})}},this.pollingDelay)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}}const El=new CI;function TI(){const{eventState:n}=ot(),{user:e,updateUser:t}=Gt(),[i,o]=R.useState([]),[c,d]=R.useState([]),[f,m]=R.useState(!1),[g,_]=R.useState(""),[w,v]=R.useState(36),[N,E]=R.useState([]),[L,P]=R.useState([]);R.useEffect(()=>{var q,Z,se,pe;const b=[...n.qualifiedTeams||[],...n.pendingQualifiedTeams||[]],x=b.filter(ge=>!ge.status.isAlternate&&ge.status.qualificationMethod!=="ALTERNATE"),k=[...x].sort((ge,re)=>ge.name.localeCompare(re.name));o(k);const A=((Z=(q=e==null?void 0:e.votingHistory)==null?void 0:q.seeding)==null?void 0:Z.submitted)||!1;m(A);const H=b.filter(ge=>!ge.status.isAlternate&&ge.status.qualificationMethod!=="ALTERNATE").length;if(v(H),A&&((pe=(se=e==null?void 0:e.votingHistory)==null?void 0:se.seeding)!=null&&pe.rankings)){const re=e.votingHistory.seeding.rankings.map(Q=>x.find(G=>G.id===Q)||{id:Q,name:"Unknown Team"});d(re),o([])}if(A){const Q=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(G=>{var ee,j;return G.role==="selector"&&G.id!==e.id&&((j=(ee=G.votingHistory)==null?void 0:ee.seeding)==null?void 0:j.submitted)}).map(G=>{const j=(G.votingHistory.seeding.rankings||[]).map($=>{const J=x.find(ie=>ie.id===$);return J?{id:$,name:J.name,selectorId:G.id,selectorName:G.name}:null}).filter(Boolean);return{selectorId:G.id,selectorName:G.name,rankings:j}});E(Q)}if(A){const re=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(ie=>{var ae,fe;return ie.role==="selector"&&ie.id!==e.id&&((fe=(ae=ie.votingHistory)==null?void 0:ae.seeding)==null?void 0:fe.submitted)}),Q=re.map(ie=>{const fe=(ie.votingHistory.seeding.rankings||[]).map(Ne=>{const le=x.find(me=>me.id===Ne);return le?{id:Ne,name:le.name,selectorId:ie.id,selectorName:ie.name}:null}).filter(Boolean);return{selectorId:ie.id,selectorName:ie.name,rankings:fe}});E(Q);const G=[{selectorId:e.id,rankings:e.votingHistory.seeding.rankings||[]},...re.map(ie=>({selectorId:ie.id,rankings:ie.votingHistory.seeding.rankings||[]}))],ee={},j={};G.forEach(ie=>{ie.rankings.forEach((ae,fe)=>{ee[ae]||(ee[ae]=0,j[ae]=0),ee[ae]+=fe+1,j[ae]++})});const J=Object.keys(ee).map(ie=>{const ae=x.find(fe=>fe.id===ie);return{id:ie,name:ae?ae.name:"Unknown Team",averageSeed:(ee[ie]/j[ie]).toFixed(2)}}).sort((ie,ae)=>parseFloat(ie.averageSeed)-parseFloat(ae.averageSeed));P(J)}},[n.qualifiedTeams,n.pendingQualifiedTeams,e]);const S=b=>{f||(d([...c,b]),o(i.filter(x=>x.id!==b.id)))},T=b=>{f||(o([...i,b].sort((x,k)=>x.name.localeCompare(k.name))),d(c.filter(x=>x.id!==b.id)))},C=b=>{if(b===0||f)return;const x=[...c],k=x[b];x[b]=x[b-1],x[b-1]=k,d(x)},D=b=>{if(b===c.length-1||f)return;const x=[...c],k=x[b];x[b]=x[b+1],x[b+1]=k,d(x)},z=b=>g.trim()?b.filter(x=>x.name.toLowerCase().includes(g.toLowerCase())):b,V=()=>{const b=[...n.qualifiedTeams,...n.pendingQualifiedTeams].filter(A=>!A.status.isAlternate&&A.status.qualificationMethod!=="ALTERNATE").length;if(c.length!==b){alert(`Please rank all ${b} qualified teams before submitting.`);return}const x={rankings:c.map(A=>A.id),submitted:!0,timestamp:new Date().toISOString()},k={...e,votingHistory:{...e.votingHistory,seeding:x}};t(k),m(!0),alert("Your seeding rankings have been submitted successfully!")};return l.jsx("div",{className:"w-full bg-white rounded-lg shadow-sm",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Seeding Rankings"}),f?l.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-medium text-green-700 mb-2",children:"Seeding Submitted"}),l.jsx("p",{className:"mb-4",children:"Your seeding rankings have been recorded."}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Your Final Seedings:"}),l.jsx("div",{className:"space-y-2",children:c.map((b,x)=>l.jsxs("div",{className:"p-3 bg-white border border-green-200 rounded-lg flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:x+1}),l.jsx("div",{className:"flex-grow",children:l.jsx("p",{className:"font-medium",children:b.name})})]},b.id))}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change My Seedings"})}),L.length>0&&l.jsxs("div",{className:"mt-8 border-t pt-6",children:[l.jsx("h4",{className:"font-medium mb-4",children:"Average Seedings (All Selectors)"}),l.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[l.jsx("div",{className:"bg-purple-50 p-3 border-b font-medium",children:"Consensus Seeding Order"}),l.jsx("div",{className:"p-3 max-h-80 overflow-y-auto",children:l.jsx("div",{className:"space-y-2",children:L.map((b,x)=>l.jsxs("div",{className:"p-2 bg-white border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-purple-100 rounded-full mr-3",children:x+1}),l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:b.name})})]}),l.jsxs("div",{className:"text-gray-600 font-medium",children:["Avg: ",b.averageSeed]})]},b.id))})})]})]}),N.length>0&&l.jsxs("div",{className:"mt-8 border-t pt-6",children:[l.jsx("h4",{className:"font-medium mb-4",children:"Other Selectors' Seedings"}),l.jsx("div",{className:"space-y-6",children:N.map(b=>l.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 p-3 border-b font-medium",children:[b.selectorName,"'s Seedings"]}),l.jsx("div",{className:"p-3 max-h-64 overflow-y-auto",children:l.jsxs("div",{className:"space-y-2",children:[b.rankings.slice(0,10).map((x,k)=>l.jsxs("div",{className:"p-2 bg-white border rounded flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full mr-3",children:k+1}),l.jsx("div",{className:"flex-grow",children:l.jsx("p",{className:"font-medium",children:x.name})})]},x.id)),b.rankings.length>10&&l.jsxs("div",{className:"text-center text-gray-500 italic p-2",children:["Showing top 10 seeds only. ",b.rankings.length-10," more teams ranked."]})]})})]},b.selectorId))})]}),N.length===0&&l.jsx("div",{className:"mt-8 border-t pt-6",children:l.jsx("p",{className:"text-center text-gray-500 italic",children:"No other selectors have submitted their seedings yet."})})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Seeding Instructions"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Please rank all 36 qualified teams in order of their strength. These rankings will be used to seed the teams for the Championship."})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[l.jsx("h3",{className:"font-medium",children:"Qualified Teams"}),l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"text-sm bg-blue-100 px-2 py-1 rounded mr-3",children:[z(i).length," teams"]}),l.jsxs("div",{className:"relative w-60",children:[l.jsx("input",{type:"text",value:g,onChange:b=>_(b.target.value),placeholder:"Search teams...",className:"w-full p-2 border border-gray-300 rounded-lg pl-8 text-sm"}),l.jsx("div",{className:"absolute left-2 top-2.5 text-gray-400",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})]})]}),l.jsxs("div",{className:"border rounded-lg p-2 min-h-80 bg-gray-50",children:[z(i).map(b=>l.jsxs("div",{className:"mb-2 p-3 bg-white rounded border border-gray-200 flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:b.name})}),l.jsx("button",{onClick:()=>S(b),className:"p-1 bg-blue-100 rounded hover:bg-blue-200",title:"Add to rankings",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},b.id)),z(i).length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:g?"No teams match your search":"All teams have been ranked"})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"font-medium",children:"Your Seedings"}),l.jsxs("div",{className:"text-sm bg-blue-100 px-2 py-1 rounded",children:[c.length," of 36 teams ranked"]})]}),l.jsxs("div",{className:"border rounded-lg p-2 min-h-80 bg-gray-50 overflow-y-auto max-h-96",children:[c.map((b,x)=>l.jsxs("div",{className:"mb-2 p-3 bg-white rounded border border-gray-200 flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:x+1}),l.jsx("div",{className:"flex-grow",children:l.jsx("p",{className:"font-medium",children:b.name})}),l.jsxs("div",{className:"flex flex-col space-y-1 ml-2",children:[l.jsx("button",{onClick:()=>C(x),disabled:x===0,className:`p-1 rounded ${x===0?"text-gray-300 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:"Move up",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"18 15 12 9 6 15"})})}),l.jsx("button",{onClick:()=>D(x),disabled:x===c.length-1,className:`p-1 rounded ${x===c.length-1?"text-gray-300 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:"Move down",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),l.jsx("button",{onClick:()=>T(b),className:"p-1 bg-red-100 rounded hover:bg-red-200 ml-2",title:"Remove from rankings",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},b.id)),c.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Add teams from the qualified list to rank them"})]})]})]}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsxs("button",{onClick:V,disabled:c.length!==w,className:`px-4 py-2 rounded-lg ${c.length===w?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 cursor-not-allowed text-gray-500"}`,children:["Submit Seeding (",c.length,"/",w,")"]})})]})]})})}function __(){const{eventState:n}=ot(),[e,t]=R.useState([]),[i,o]=R.useState([]),[c,d]=R.useState([]),f=[1,4,5,8,9,12,13,16,17,20,21,24,25,28,29,32,33,36],m=g=>f.includes(g);return R.useEffect(()=>{const g=[...n.qualifiedTeams].filter(C=>!C.status.isAlternate&&C.status.qualificationMethod!=="ALTERNATE"),_=[...n.qualifiedTeams].filter(C=>C.status.isAlternate||C.status.qualificationMethod==="ALTERNATE"),v=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(C=>{var D,z;return C.role==="selector"&&((z=(D=C.votingHistory)==null?void 0:D.seeding)==null?void 0:z.submitted)}),N={},E={};v.forEach(C=>{(C.votingHistory.seeding.rankings||[]).forEach((z,V)=>{N[z]||(N[z]=0,E[z]=0),N[z]+=V+1,E[z]++})});const S=[...g.map(C=>{let D=null;return N[C.id]&&E[C.id]&&(D=Math.round(N[C.id]/E[C.id])),{...C,averageSeed:D||999}})].sort((C,D)=>C.averageSeed-D.averageSeed).map((C,D)=>({...C,assignedSeed:D+1})),T=localStorage.getItem("sailing_nationals_seeding_adjustments");if(T){const{east:C,west:D}=JSON.parse(T);t(C),o(D)}else{const C=[],D=[];S.forEach(z=>{m(z.assignedSeed)?C.push(z):D.push(z)}),C.sort((z,V)=>z.assignedSeed-V.assignedSeed),D.sort((z,V)=>z.assignedSeed-V.assignedSeed),t(C),o(D)}d(_)},[n.qualifiedTeams]),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-green-700",children:"Selection Process Completed"}),l.jsx("p",{className:"text-lg text-gray-600 mt-2",children:"The national championship selection process has concluded. Below are the final results and division assignments."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold mb-4 text-blue-700",children:"East Division"}),l.jsxs("div",{className:"overflow-hidden border rounded-lg",children:[l.jsxs("div",{className:"bg-blue-50 p-3 border-b font-medium",children:["Teams: ",e.length]}),l.jsxs("div",{className:"divide-y",children:[e.map(g=>l.jsxs("div",{className:"p-3 flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full mr-3",children:g.assignedSeed}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:g.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[g.status.qualificationMethod," (Round ",g.status.qualificationRound,")"]})]})]},g.id)),e.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500",children:"No teams in East division"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold mb-4 text-green-700",children:"West Division"}),l.jsxs("div",{className:"overflow-hidden border rounded-lg",children:[l.jsxs("div",{className:"bg-green-50 p-3 border-b font-medium",children:["Teams: ",i.length]}),l.jsxs("div",{className:"divide-y",children:[i.map(g=>l.jsxs("div",{className:"p-3 flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:g.assignedSeed}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:g.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[g.status.qualificationMethod," (Round ",g.status.qualificationRound,")"]})]})]},g.id)),i.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500",children:"No teams in West division"})]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Alternate Teams"}),l.jsx("div",{className:"overflow-hidden border rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qualification"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[c.map((g,_)=>l.jsxs("tr",{className:_%2===0?"bg-white":"bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-yellow-100 rounded-full font-medium",children:_+1})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:g.name})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:["Round ",g.status.qualificationRound]})]},g.id)),c.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No alternates available yet"})})]})]})})]})]})}function x_(){const{eventState:n}=ot(),{user:e}=Gt(),[t,i]=R.useState([]),[o,c]=R.useState([]),[d,f]=R.useState(!1),m=[1,4,5,8,9,12,13,16,17,20,21,24,25,28,29,32,33,36],g=E=>m.includes(E);R.useEffect(()=>{if(d)return;const E=localStorage.getItem("sailing_nationals_seeding_adjustments");if(E)try{const{east:k,west:A}=JSON.parse(E);if(Array.isArray(k)&&Array.isArray(A)){i(k),c(A),f(!0);return}}catch(k){console.error("Error loading saved adjustments:",k)}const L=[...n.qualifiedTeams].filter(k=>!k.status.isAlternate&&k.status.qualificationMethod!=="ALTERNATE"),S=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(k=>{var A,H;return k.role==="selector"&&((H=(A=k.votingHistory)==null?void 0:A.seeding)==null?void 0:H.submitted)}),T={},C={};S.forEach(k=>{(k.votingHistory.seeding.rankings||[]).forEach((H,q)=>{T[H]||(T[H]=0,C[H]=0),T[H]+=q+1,C[H]++})});const V=[...L.map(k=>{let A=null;return T[k.id]&&C[k.id]&&(A=Math.round(T[k.id]/C[k.id])),{...k,averageSeed:A||999}})].sort((k,A)=>k.averageSeed-A.averageSeed).map((k,A)=>({...k,assignedSeed:A+1})),b=[],x=[];V.forEach(k=>{g(k.assignedSeed)?b.push(k):x.push(k)}),b.sort((k,A)=>k.assignedSeed-A.assignedSeed),x.sort((k,A)=>k.assignedSeed-A.assignedSeed),i(b),c(x),f(!0)},[n.qualifiedTeams,d]);const _=(E,L)=>{const P={east:E,west:L,timestamp:new Date().toISOString()};localStorage.setItem("sailing_nationals_seeding_adjustments",JSON.stringify(P));const S={type:"seeding_adjustments_updated",timestamp:new Date().toISOString()};localStorage.setItem("sailing_nationals_notification",JSON.stringify(S))},w=E=>{if(e.role!=="parliamentarian")return;const L=t.filter(S=>S.id!==E.id),P=[...o,E].sort((S,T)=>S.assignedSeed-T.assignedSeed);i(L),c(P),e.role==="parliamentarian"&&_(L,P)},v=E=>{if(e.role!=="parliamentarian")return;const L=o.filter(S=>S.id!==E.id),P=[...t,E].sort((S,T)=>S.assignedSeed-T.assignedSeed);c(L),i(P),e.role==="parliamentarian"&&_(P,L)},N=()=>{e.role==="parliamentarian"&&(_(t,o),alert("Seeding adjustments have been saved successfully!"))};return R.useEffect(()=>{if(e.role==="parliamentarian")return;const E=setInterval(()=>{const L=localStorage.getItem("sailing_nationals_seeding_adjustments");if(L)try{const{east:P,west:S,timestamp:T}=JSON.parse(L);if(Array.isArray(P)&&Array.isArray(S)&&T){const C=localStorage.getItem("sailing_nationals_last_loaded_adjustment");(!C||T>C)&&(i(P),c(S),localStorage.setItem("sailing_nationals_last_loaded_adjustment",T),console.log("Updated seeding adjustments from localStorage"))}}catch(P){console.error("Error checking for adjustment updates:",P)}},5e3);return()=>clearInterval(E)},[e.role]),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Championship Seeding Adjustments"}),l.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Division Adjustments"}),l.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Teams are divided into East and West divisions based on their seeding.",e.role==="parliamentarian"?" You can adjust which division each team belongs to while maintaining their original seeding.":" The parliamentarian can adjust which division each team belongs to."]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-3 text-blue-700",children:"East Division"}),l.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-blue-50 p-3 border-b font-medium",children:["Teams: ",t.length]}),l.jsxs("div",{className:"divide-y max-h-96 overflow-y-auto",children:[t.map(E=>l.jsxs("div",{className:"p-3 flex justify-between items-center hover:bg-gray-50",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full mr-3",children:E.assignedSeed}),l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:E.name})})]}),e.role==="parliamentarian"&&l.jsx("button",{onClick:()=>w(E),className:"text-sm bg-gray-100 hover:bg-gray-200 p-1 rounded",title:"Move to West",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]},E.id)),t.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500",children:"No teams in East division"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-medium mb-3 text-green-700",children:"West Division"}),l.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-green-50 p-3 border-b font-medium",children:["Teams: ",o.length]}),l.jsxs("div",{className:"divide-y max-h-96 overflow-y-auto",children:[o.map(E=>l.jsxs("div",{className:"p-3 flex justify-between items-center hover:bg-gray-50",children:[e.role==="parliamentarian"&&l.jsx("button",{onClick:()=>v(E),className:"text-sm bg-gray-100 hover:bg-gray-200 p-1 rounded",title:"Move to East",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:E.assignedSeed}),l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:E.name})})]})]},E.id)),o.length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500",children:"No teams in West division"})]})]})]})]}),e.role==="parliamentarian"&&l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Save Division Adjustments"})})]})}function II(){const{eventState:n}=ot(),[e,t]=R.useState(!1);R.useEffect(()=>{const d=El.subscribe("state_updated",()=>{t(f=>!f)});return()=>d()},[]);const i=()=>{switch(n.phase){case B.ROUND1_LOCK:return l.jsx(EI,{});case B.ROUND_LEFTOVER:case B.ALTERNATE_LEFTOVER:return l.jsx(kI,{});case B.ROUND_RANKING:case B.ALTERNATE_RANKING:return l.jsx(bI,{});case B.SEEDING:return l.jsx(TI,{});case B.SEEDING_ADJUSTMENTS:return l.jsx(x_,{});case B.COMPLETED:return l.jsx(__,{});default:return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Waiting for Next Phase"}),l.jsx("p",{children:"The parliamentarian will advance the selection process when ready."}),l.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-700",children:["Current Phase: ",o()]})})]})}},o=()=>({[B.PRESELECTION]:"Preselection - Waiting to Begin",[B.ROUND1_AQ]:"Round 1 - Automatic Qualifier Selection in Progress",[B.ROUND1_LOCK]:"Round 1 - Lock Vote Submission",[B.ROUND1_FINALIZED]:"Round 1 Complete - Waiting for Next Round",[B.ROUND_LEFTOVER]:"Leftover Team Voting",[B.ROUND_RANKING]:"Team Ranking Phase",[B.ROUND_FINALIZED]:"Round Complete - Waiting for Next Round",[B.ALTERNATE_LEFTOVER]:"Alternate Selection - Leftover Voting",[B.ALTERNATE_RANKING]:"Alternate Selection - Ranking Phase",[B.ALTERNATE_FINALIZED]:"Alternate Selection - Round Complete",[B.SEEDING]:"Championship Seeding Phase"})[n.phase]||"Unknown Phase",c=()=>l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Qualification Status"}),l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsxs("div",{children:[l.jsxs("p",{className:"text-gray-700",children:["Teams Qualified: ",n.qualifiedTeams.length]}),l.jsxs("p",{className:"text-gray-700",children:["Remaining Berths: ",n.remainingBerths]})]})}),n.qualifiedTeams.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Qualified Teams"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.qualifiedTeams.map(d=>l.jsxs("div",{className:"p-2 bg-green-50 rounded-lg flex justify-between items-center",children:[l.jsx("span",{children:d.name}),l.jsx("span",{className:"text-sm text-green-600",children:d.status.qualificationMethod})]},d.id))})]})]});return l.jsxs("div",{className:"space-y-6",children:[i(),c()]})}function RI(){const{eventState:n,advancePhase:e,actionPermissions:t}=ot(),i=d=>({[B.PRESELECTION]:"Preselection Phase",[B.ROUND1_AQ]:"Round 1 - Automatic Qualifier Selection",[B.ROUND1_LOCK]:"Round 1 - Lock Vote Submission",[B.ROUND1_FINALIZED]:"Round 1 Complete",[B.ROUND_LEFTOVER]:"Leftover Team Voting",[B.ROUND_RANKING]:"Team Ranking Phase",[B.ROUND_FINALIZED]:"Round Complete",[B.ALTERNATE_LEFTOVER]:"Alternate Selection - Leftover Voting",[B.ALTERNATE_RANKING]:"Alternate Selection - Ranking Phase",[B.ALTERNATE_FINALIZED]:"Alternate Selection - Round Complete",[B.SEEDING]:"Championship Seeding Phase",[B.SEEDING_ADJUSTMENTS]:"Division Seeding Adjustments",[B.COMPLETED]:"Selection Process Completed"})[d]||d,o=()=>({[B.PRESELECTION]:"Begin Round 1 - AQ Selection",[B.ROUND1_AQ]:"Open Lock Vote Submission",[B.ROUND1_LOCK]:"Finalize Round 1",[B.ROUND1_FINALIZED]:"Begin Leftover Voting",[B.ROUND_LEFTOVER]:"Begin Team Ranking",[B.ROUND_RANKING]:"Finalize Round",[B.SEEDING]:"Complete Selection Process",[B.COMPLETED]:"Reset Process"})[n.phase]||"Next Phase",c=()=>n.phase===B.PRESELECTION?"Round: Not Started":n.phase&&n.phase.includes("ROUND1_")?`Round 1 - ${n.phase===B.ROUND1_AQ?"AQ Selection":"Lock Votes"}`:`Round ${n.currentRound} - ${n.phase===B.ROUND_LEFTOVER?"Leftover Voting":"Team Ranking"}`;return n.phase===B.COMPLETED?l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Selection Complete"}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Current Phase: Selection Process Completed"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"All 36 teams and alternates have been selected and seeded."})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white",children:"Reset Process"})})]}):l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Round Control Panel"}),l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[l.jsxs("p",{className:"font-medium",children:["Current Phase: ",i(n.phase)]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c()}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Remaining Berths: ",n.remainingBerths]})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Next Action: ",o()]}),l.jsx("button",{onClick:()=>{var d,f,m;if(n.phase===B.PRESELECTION&&(!n.teams||n.teams.length===0)){alert("Please import team data from the CSR file before starting the selection process.");return}if(n.phase===B.ROUND1_AQ&&!((d=n.pendingQualifiedTeams)!=null&&d.some(g=>{var _;return((_=g.status)==null?void 0:_.qualificationMethod)==="AQ"}))){alert("Please finalize AQ selections before advancing to the next phase.");return}if(n.phase===B.ROUND1_LOCK){const _=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(L=>L.role==="selector");if(!_.every(L=>{var P,S;return(S=(P=L.votingHistory)==null?void 0:P.round1)==null?void 0:S.submitted})){alert("Not all selectors have submitted their lock votes yet. Please wait for all votes before advancing.");return}const v=_.filter(L=>{var P,S;return(S=(P=L.votingHistory)==null?void 0:P.round1)==null?void 0:S.submitted}).length,N={};if(_.forEach(L=>{var P,S;(S=(P=L.votingHistory)==null?void 0:P.round1)!=null&&S.submitted&&(L.votingHistory.round1.lockVotes||[]).forEach(C=>{N[C]=(N[C]||0)+1})}),Object.keys(N).filter(L=>(v>0?Math.round(N[L]/v*100):0)>=60).length>0&&!((f=n.pendingQualifiedTeams)!=null&&f.some(L=>{var P;return((P=L.status)==null?void 0:P.qualificationMethod)==="LOCK"}))){alert("There are teams with 60% or more lock votes. Please finalize qualifying teams before advancing.");return}}if(n.phase===B.ROUND_LEFTOVER){const _=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(S=>S.role==="selector"),w=`round${n.currentRound}_leftover`;if(!_.every(S=>{var T,C;return(C=(T=S.votingHistory)==null?void 0:T[w])==null?void 0:C.submitted})){alert("Not all selectors have submitted their leftover votes yet. Please wait for all votes before advancing.");return}const N=_.filter(S=>{var T,C;return(C=(T=S.votingHistory)==null?void 0:T[w])==null?void 0:C.submitted}).length;n.teams;const E=new Set([...(n.qualifiedTeams||[]).map(S=>S.id),...(n.pendingQualifiedTeams||[]).map(S=>S.id)]),L={};if(_.forEach(S=>{var T,C;(C=(T=S.votingHistory)==null?void 0:T[w])!=null&&C.submitted&&(S.votingHistory[w].votes||[]).forEach(z=>{E.has(z)||(L[z]=(L[z]||0)+1)})}),Object.keys(L).filter(S=>(N>0?Math.round(L[S]/N*100):0)>=80).length>0&&(!n.rankingGroup||n.rankingGroup.length===0)){alert("There are teams with 80% or more leftover votes. Please add them to the ranking group before advancing.");return}}if(n.phase===B.ROUND_RANKING&&!((m=n.pendingQualifiedTeams)!=null&&m.some(g=>{var _;return((_=g.status)==null?void 0:_.qualificationMethod)==="RANKING"}))){alert("Please finalize qualifying teams from rankings before advancing to the next phase.");return}if(n.phase===B.SEEDING&&!JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(v=>v.role==="selector").every(v=>{var N,E;return(E=(N=v.votingHistory)==null?void 0:N.seeding)==null?void 0:E.submitted})){alert("Not all selectors have submitted their seeding rankings yet. Please wait for all seedings to be submitted before advancing.");return}e()},className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:o()})]})]})}function jI(){const{eventState:n,qualifyTeams:e}=ot(),[t,i]=R.useState(new Set),[o,c]=R.useState(""),[d,f]=R.useState(()=>n.pendingQualifiedTeams.some(v=>{var N;return((N=v.status)==null?void 0:N.qualificationMethod)==="AQ"})||n.qualifiedTeams.some(v=>{var N;return((N=v.status)==null?void 0:N.qualificationMethod)==="AQ"})),m=n.teams.sort((v,N)=>v.name.localeCompare(N.name)),g=v=>{i(N=>{const E=new Set(N);return E.has(v)?E.delete(v):E.size<12&&E.add(v),E})},_=()=>{if(t.size!==12){alert("You must select exactly 12 Automatic Qualifiers before finalizing.");return}const v=n.teams.filter(N=>t.has(N.id)).map(N=>({...N,status:{...N.status,isAQ:!0,isQualified:!0,qualificationMethod:"AQ",qualificationRound:1}}));e(v),f(!0),alert("Automatic Qualifiers have been selected. They will be added to the qualified teams list when the round is finalized.")},w=v=>o.trim()?v.filter(N=>N.name.toLowerCase().includes(o.toLowerCase())):v;return l.jsx("div",{className:"w-full bg-white rounded-lg shadow-sm",children:l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Round 1: Automatic Qualifier Selection"}),d?l.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-medium text-green-700 mb-2",children:"AQ Teams Selected"}),l.jsx("p",{className:"mb-4",children:"The Automatic Qualifier teams have been selected."}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Selected AQ Teams:"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-4",children:[n.pendingQualifiedTeams.filter(v=>{var N;return((N=v.status)==null?void 0:N.qualificationMethod)==="AQ"}).map(v=>l.jsx("div",{className:"bg-white p-3 rounded border border-green-200",children:v.name},v.id)),n.qualifiedTeams.filter(v=>{var N;return((N=v.status)==null?void 0:N.qualificationMethod)==="AQ"}).map(v=>l.jsx("div",{className:"bg-white p-3 rounded border border-green-200",children:v.name},v.id))]})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change AQ Selections"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[l.jsxs("p",{className:"text-blue-700",children:["Automatic Qualifiers Selected: ",t.size,"/12"]}),t.size===12&&l.jsx("p",{className:"text-green-600 mt-2",children:"You have selected all 12 required teams. Review your selections and click Finalize when ready."})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{children:"Select 12 teams as Automatic Qualifiers. These teams will automatically advance."}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Note: This selection must be completed before selectors can submit their lock votes."})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:o,onChange:v=>c(v.target.value),placeholder:"Search teams by name...",className:"w-full p-3 border border-gray-300 rounded-lg pl-10"}),l.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),o&&l.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"border rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium mb-3",children:"All Teams"}),l.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:[w(m).map(v=>l.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${t.has(v.id)?"bg-blue-50":"hover:bg-gray-50"}`,children:[l.jsx("div",{children:l.jsx("p",{className:"font-medium",children:v.name})}),l.jsx("input",{type:"checkbox",checked:t.has(v.id),onChange:()=>g(v.id),disabled:!t.has(v.id)&&t.size>=12,className:"h-5 w-5 text-blue-600"})]},v.id)),w(m).length===0&&l.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"No teams match your search"})]})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:_,disabled:t.size!==12,className:`px-4 py-2 rounded-lg ${t.size===12?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 cursor-not-allowed text-gray-500"}`,children:"Finalize AQ Selections"})})]})]})})}function PI(){const{eventState:n,qualifyTeams:e}=ot(),{user:t}=Gt(),[i,o]=R.useState("status"),[c,d]=R.useState([]),[f,m]=R.useState([]);R.useEffect(()=>{const N=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(T=>T.role==="selector"),E=N.map(T=>{var z,V,b,x;const C=((V=(z=T.votingHistory)==null?void 0:z.round1)==null?void 0:V.submitted)||!1,D=((x=(b=T.votingHistory)==null?void 0:b.round1)==null?void 0:x.timestamp)||null;return{id:T.id,name:T.name,hasVoted:C,timestamp:D}});d(E);const L={},P=N.filter(T=>{var C,D;return(D=(C=T.votingHistory)==null?void 0:C.round1)==null?void 0:D.submitted}).length;if(P===0){const T=n.teams.filter(C=>{var D;return!((D=C.status)!=null&&D.isQualified)}).map(C=>({...C,votePercentage:0,qualifies:!1}));m(T);return}n.teams.forEach(T=>{L[T.id]=0}),N.forEach(T=>{var D,z;(((z=(D=T.votingHistory)==null?void 0:D.round1)==null?void 0:z.lockVotes)||[]).forEach(V=>{L[V]!==void 0&&(L[V]+=1)})});const S=n.teams.filter(T=>{var C;return!((C=T.status)!=null&&C.isQualified)}).map(T=>{const C=L[T.id]||0,D=Math.round(C/P*100);return{...T,votePercentage:D,qualifies:D>=60}});m(S)},[n.teams]);const g=f.filter(v=>v.qualifies),_=()=>{const v=g.map(N=>{const E=n.teams.find(L=>L.id===N.id);return{...E,status:{...E.status,isLocked:!0,isQualified:!0,qualificationMethod:"LOCK",qualificationRound:n.currentRound}}});e(v),alert(`${v.length} teams have been qualified through lock voting! They will be officially qualified when the round is finalized.`)},w=[...f].sort((v,N)=>N.votePercentage-v.votePercentage);return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Lock Vote Monitoring"}),l.jsx("div",{className:"border-b mb-6",children:l.jsxs("nav",{className:"flex -mb-px",children:[l.jsx("button",{onClick:()=>o("status"),className:`mr-4 py-2 px-4 font-medium ${i==="status"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Selector Status"}),l.jsx("button",{onClick:()=>o("results"),className:`py-2 px-4 font-medium ${i==="results"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Voting Results"})]})}),i==="status"?l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Selector Voting Progress"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[c.filter(v=>v.hasVoted).length," of ",c.length," selectors have submitted their votes"]})]}),l.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[c.length>0?Math.round(c.filter(v=>v.hasVoted).length/c.length*100):0,"%"]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selector Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(v=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:v.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.hasVoted?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Voted"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pending"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v.timestamp||""})]},v.id))})]})})]}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-green-50 p-4 rounded-lg",children:[l.jsxs("p",{className:"font-medium",children:["Qualifying Teams (",g.length,")"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Teams receiving votes from 60% or more of selectors qualify automatically"})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vote Percentage"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[w.filter(v=>v.votePercentage>0).map(v=>l.jsxs("tr",{className:v.qualifies?"bg-green-50":"",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:v.name})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:`h-2.5 rounded-full ${v.qualifies?"bg-green-600":"bg-blue-600"}`,style:{width:`${v.votePercentage}%`}})}),l.jsxs("span",{className:"text-xs text-gray-600 mt-1 block",children:[v.votePercentage,"%"]})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.qualifies?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Qualifies"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Does Not Qualify"})})]},v.id)),w.filter(v=>v.votePercentage>0).length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No teams have received votes yet"})})]})]})}),g.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:_,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Finalize Qualifying Teams"})})]})]})}function AI(){const{eventState:n,updateRankingGroup:e}=ot(),{user:t}=Gt(),[i,o]=R.useState("status"),[c,d]=R.useState([]),[f,m]=R.useState([]);R.useEffect(()=>{const N=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(D=>D.role==="selector"),E=`round${n.currentRound}_leftover`,L=N.map(D=>{var b,x,k,A;const z=((x=(b=D.votingHistory)==null?void 0:b[E])==null?void 0:x.submitted)||!1,V=((A=(k=D.votingHistory)==null?void 0:k[E])==null?void 0:A.timestamp)||null;return{id:D.id,name:D.name,hasVoted:z,timestamp:V}});d(L);const P={},S=N.filter(D=>{var z,V;return(V=(z=D.votingHistory)==null?void 0:z[E])==null?void 0:V.submitted}).length,T=n.teams.filter(D=>{var z;return!((z=D.status)!=null&&z.isQualified)&&!n.rankingGroup.some(V=>V.id===D.id)});T.forEach(D=>{P[D.id]=0}),N.forEach(D=>{var V,b;(((b=(V=D.votingHistory)==null?void 0:V[E])==null?void 0:b.votes)||[]).forEach(x=>{P[x]!==void 0&&(P[x]+=1)})});const C=T.map(D=>{const z=P[D.id]||0,V=S>0?Math.round(z/S*100):0;return{...D,votePercentage:V,shouldAdd:V>=80}});m(C)},[n.teams,n.rankingGroup,n.currentRound]);const g=[...f].sort((v,N)=>N.votePercentage-v.votePercentage),_=g.filter(v=>v.shouldAdd),w=()=>{const v=[...n.rankingGroup];console.log("Current ranking group before adding teams:",v.length);const N=[...v,..._];console.log("Updated ranking group after adding teams:",N.length),console.log("Teams being added:",_.map(E=>E.name).join(", ")),e(N),alert(`${_.length} teams have been added to the ranking group!`)};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Leftover Vote Monitoring"}),l.jsx("div",{className:"border-b mb-6",children:l.jsxs("nav",{className:"flex -mb-px",children:[l.jsx("button",{onClick:()=>o("status"),className:`mr-4 py-2 px-4 font-medium ${i==="status"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Selector Status"}),l.jsx("button",{onClick:()=>o("results"),className:`py-2 px-4 font-medium ${i==="results"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Voting Results"})]})}),i==="status"?l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Selector Voting Progress"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[c.filter(v=>v.hasVoted).length," of ",c.length," selectors have submitted their votes"]})]}),l.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[c.length>0?Math.round(c.filter(v=>v.hasVoted).length/c.length*100):0,"%"]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selector Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(v=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:v.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.hasVoted?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Voted"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pending"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v.timestamp||""})]},v.id))})]})})]}):l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-purple-50 p-4 rounded-lg",children:[l.jsxs("p",{className:"font-medium",children:["Teams to Add to Ranking Group (",_.length,")"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Teams receiving votes from 80% or more of selectors will be added to the ranking group"})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vote Percentage"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[g.filter(v=>v.votePercentage>0).map(v=>l.jsxs("tr",{className:v.shouldAdd?"bg-purple-50":"",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:v.name})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:`h-2.5 rounded-full ${v.shouldAdd?"bg-purple-600":"bg-blue-600"}`,style:{width:`${v.votePercentage}%`}})}),l.jsxs("span",{className:"text-xs text-gray-600 mt-1 block",children:[v.votePercentage,"%"]})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.shouldAdd?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:"Add to Ranking"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Do Not Add"})})]},v.id)),g.filter(v=>v.votePercentage>0).length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No teams have received votes yet"})})]})]})}),_.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:w,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Add Teams to Ranking Group"})})]})]})}function OI(){const{eventState:n,qualifyTeams:e,logSelectorRankings:t}=ot(),{user:i}=Gt(),[o,c]=R.useState("status"),[d,f]=R.useState([]),[m,g]=R.useState([]),[_,w]=R.useState([]),[v,N]=R.useState([]);n.remainingBerths;const E=n.teamsToQualifyThisRound!==null?n.teamsToQualifyThisRound:Math.floor(n.remainingBerths/3);R.useEffect(()=>{const D=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(x=>x.role==="selector"),z=`round${n.currentRound}_ranking`,V=D.map(x=>{var H,q,Z,se;const k=((q=(H=x.votingHistory)==null?void 0:H[z])==null?void 0:q.submitted)||!1,A=((se=(Z=x.votingHistory)==null?void 0:Z[z])==null?void 0:se.timestamp)||null;return{id:x.id,name:x.name,hasSubmitted:k,timestamp:A}});f(V);const b=[];if(D.forEach(x=>{var k,A;if((A=(k=x.votingHistory)==null?void 0:k[z])!=null&&A.submitted){const H=x.votingHistory[z].rankings||[];b.push({selectorId:x.id,selectorName:x.name,rankings:H.map((q,Z)=>{const se=n.teams.find(pe=>pe.id===q);return{teamId:q,teamName:se?se.name:"Unknown Team",csrRank:se?se.csrRank:0,rank:Z+1}})})}}),g(b),b.length>0){const x={},k={},A={};b.forEach(se=>{se.rankings.forEach(pe=>{x[pe.teamId]||(x[pe.teamId]=0,k[pe.teamId]=0,A[pe.teamId]={teamName:pe.teamName,csrRank:pe.csrRank,rankings:[]}),x[pe.teamId]+=pe.rank,k[pe.teamId]++,A[pe.teamId].rankings.push(pe.rank)})});const q=Object.keys(x).map(se=>({teamId:se,teamName:A[se].teamName,csrRank:A[se].csrRank,averageRank:(x[se]/k[se]).toFixed(2),rankings:A[se].rankings})).sort((se,pe)=>parseFloat(se.averageRank)-parseFloat(pe.averageRank));w(q);const Z=q.slice(0,E).map(se=>{const pe=n.teams.find(ge=>ge.id===se.teamId);return pe?{...pe,status:{...pe.status,isQualified:!0,qualificationMethod:"RANKING",qualificationRound:n.currentRound}}:null}).filter(Boolean);N(Z)}},[n.rankingGroup,n.currentRound,n.teams,E]);const L=()=>{var b;if(!d.every(x=>x.hasSubmitted)){alert("Not all selectors have submitted their rankings yet. Please wait for all rankings to be submitted before finalizing.");return}const D=n.remainingBerths,z=n.phase===B.ALTERNATE_RANKING;let V=[];if(z)V=_.slice(0,1).map(x=>{const k=n.teams.find(A=>A.id===x.teamId);return k?{...k,status:{...k.status,isQualified:!0,isAlternate:!0,qualificationMethod:"ALTERNATE",qualificationRound:n.currentRound}}:null}).filter(Boolean),e(V),t(n.currentRound),alert(`${((b=V[0])==null?void 0:b.name)||"One team"} has been selected as an alternate!`);else{let x=Math.floor(D/3);x===0&&D>0&&(x=1),console.log(`Qualifying ${x} teams out of ${D} remaining berths`),V=_.slice(0,x).map(k=>{const A=n.teams.find(H=>H.id===k.teamId);return A?{...A,status:{...A.status,isQualified:!0,qualificationMethod:"RANKING",qualificationRound:n.currentRound}}:null}).filter(Boolean),e(V),t(n.currentRound),alert(`${x} teams have qualified based on rankings!`)}},P=(C,D)=>{const z=C/D;let V="bg-green-100";return z<=.25&&(V="bg-green-200"),z<=.1&&(V="bg-green-300"),l.jsx("div",{className:`${V} rounded-lg p-2 text-center font-medium`,children:C})},T=(()=>{const C=n.remainingBerths;let D=Math.floor(C/3);return D===0&&C>0&&(D=1),D})();return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Round ",n.currentRound,": Ranking Monitoring"]}),l.jsx("div",{className:"border-b mb-6",children:l.jsxs("nav",{className:"flex -mb-px",children:[l.jsx("button",{onClick:()=>c("status"),className:`mr-4 py-2 px-4 font-medium ${o==="status"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Selector Status"}),l.jsx("button",{onClick:()=>c("individual"),className:`mr-4 py-2 px-4 font-medium ${o==="individual"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Individual Rankings"}),l.jsx("button",{onClick:()=>c("average"),className:`py-2 px-4 font-medium ${o==="average"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Average Rankings"})]})}),o==="status"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Selector Submission Progress"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[d.filter(C=>C.hasSubmitted).length," of ",d.length," selectors have submitted rankings"]})]}),l.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[d.length>0?Math.round(d.filter(C=>C.hasSubmitted).length/d.length*100):0,"%"]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selector Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(C=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:C.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.hasSubmitted?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Submitted"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pending"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.timestamp||""})]},C.id))})]})})]}),o==="individual"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Individual Selector Rankings"}),l.jsx("p",{className:"text-sm text-gray-600",children:"View how each selector ranked the teams in the ranking group"})]}),l.jsxs("div",{className:"space-y-6",children:[m.map(C=>l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-2",children:[C.selectorName,"'s Rankings"]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.rankings.sort((D,z)=>D.rank-z.rank).map(D=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(D.rank,C.rankings.length)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:D.teamName})})]},D.teamId))})]})})]},C.selectorId)),m.length===0&&l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-center text-gray-500",children:"No selector rankings submitted yet"})]})]}),o==="average"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-green-50 p-4 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Average Rankings & Qualification Status"}),l.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Teams are sorted by their average rank across all selectors. The top ",T," teams will qualify this round."]}),l.jsxs("p",{className:"text-sm text-gray-600",children:[n.remainingBerths," berths remaining. Qualifying ",T," teams in this round."]}),n.remainingBerths<=6&&l.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Final round: All remaining ",n.remainingBerths," qualifying berths will be filled plus 2 alternates."]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Rank"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[_.map((C,D)=>l.jsxs("tr",{className:D<E?"bg-green-50":"",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:C.teamName})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:C.averageRank}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D<T?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Qualifies"}):n.remainingBerths<=6&&D>=T&&D<T+2?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Alternate"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Does Not Qualify"})})]},C.teamId)),_.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No rankings submitted yet"})})]})]})}),_.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:L,disabled:!d.every(C=>C.hasSubmitted),className:`px-4 py-2 rounded-lg ${d.every(C=>C.hasSubmitted)?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 cursor-not-allowed text-gray-500"}`,title:d.every(C=>C.hasSubmitted)?"Finalize qualifying teams":"Waiting for all selectors to submit rankings",children:"Finalize Qualifying Teams"})})]})]})}var Za={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var LI=Za.exports,$g;function DI(){return $g||($g=1,function(n,e){((t,i)=>{n.exports=i()})(LI,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,c=!i.document&&!!i.postMessage,d=i.IS_PAPA_WORKER||!1,f={},m=0,g={};function _(x){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var A=z(k);A.chunkSize=parseInt(A.chunkSize),k.step||k.chunk||(A.chunkSize=null),this._handle=new L(A),(this._handle.streamer=this)._config=A}).call(this,x),this.parseChunk=function(k,A){var H=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<H){let Z=this._config.newline;Z||(q=this._config.quoteChar||'"',Z=this._handle.guessLineEndings(k,q)),k=[...k.split(Z).slice(H)].join(Z)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(q=this._config.beforeFirstChunk(k))!==void 0&&(k=q),this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+k,q=(this._partialLine="",this._handle.parse(H,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=q.meta.cursor,H=(this._finished||(this._partialLine=H.substring(k-this._baseIndex),this._baseIndex=k),q&&q.data&&(this._rowCount+=q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),d)i.postMessage({results:q,workerId:g.WORKER_ID,finished:H});else if(b(this._config.chunk)&&!A){if(this._config.chunk(q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(q.data),this._completeResults.errors=this._completeResults.errors.concat(q.errors),this._completeResults.meta=q.meta),this._completed||!H||!b(this._config.complete)||q&&q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||q&&q.meta.paused||this._nextChunk(),q}this._halted=!0},this._sendError=function(k){b(this._config.error)?this._config.error(k):d&&this._config.error&&i.postMessage({workerId:g.WORKER_ID,error:k,finished:!1})}}function w(x){var k;(x=x||{}).chunkSize||(x.chunkSize=g.RemoteChunkSize),_.call(this,x),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),c||(k.onload=V(this._chunkLoaded,this),k.onerror=V(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var A,H=this._config.downloadRequestHeaders;for(A in H)k.setRequestHeader(A,H[A])}var q;this._config.chunkSize&&(q=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+q));try{k.send(this._config.downloadRequestBody)}catch(Z){this._chunkError(Z.message)}c&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(A=>(A=A.getResponseHeader("Content-Range"))!==null?parseInt(A.substring(A.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(A){A=k.statusText||A,this._sendError(new Error(A))}}function v(x){(x=x||{}).chunkSize||(x.chunkSize=g.LocalChunkSize),_.call(this,x);var k,A,H=typeof FileReader<"u";this.stream=function(q){this._input=q,A=q.slice||q.webkitSlice||q.mozSlice,H?((k=new FileReader).onload=V(this._chunkLoaded,this),k.onerror=V(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var q=this._input,Z=(this._config.chunkSize&&(Z=Math.min(this._start+this._config.chunkSize,this._input.size),q=A.call(q,this._start,Z)),k.readAsText(q,this._config.encoding));H||this._chunkLoaded({target:{result:Z}})},this._chunkLoaded=function(q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(q.target.result)},this._chunkError=function(){this._sendError(k.error)}}function N(x){var k;_.call(this,x=x||{}),this.stream=function(A){return k=A,this._nextChunk()},this._nextChunk=function(){var A,H;if(!this._finished)return A=this._config.chunkSize,k=A?(H=k.substring(0,A),k.substring(A)):(H=k,""),this._finished=!k,this.parseChunk(H)}}function E(x){_.call(this,x=x||{});var k=[],A=!0,H=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(q){this._input=q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){H&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):A=!0},this._streamData=V(function(q){try{k.push(typeof q=="string"?q:q.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(Z){this._streamError(Z)}},this),this._streamError=V(function(q){this._streamCleanUp(),this._sendError(q)},this),this._streamEnd=V(function(){this._streamCleanUp(),H=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(x){var k,A,H,q,Z=Math.pow(2,53),se=-Z,pe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ge=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,re=this,Q=0,G=0,ee=!1,j=!1,$=[],J={data:[],errors:[],meta:{}};function ie(le){return x.skipEmptyLines==="greedy"?le.join("").trim()==="":le.length===1&&le[0].length===0}function ae(){if(J&&H&&(Ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+g.DefaultDelimiter+"'"),H=!1),x.skipEmptyLines&&(J.data=J.data.filter(function(ze){return!ie(ze)})),fe()){let ze=function(Ke,De){b(x.transformHeader)&&(Ke=x.transformHeader(Ke,De)),$.push(Ke)};var Se=ze;if(J)if(Array.isArray(J.data[0])){for(var le=0;fe()&&le<J.data.length;le++)J.data[le].forEach(ze);J.data.splice(0,1)}else J.data.forEach(ze)}function me(ze,Ke){for(var De=x.header?{}:[],Oe=0;Oe<ze.length;Oe++){var Ee=Oe,st=ze[Oe],st=((Re,Me)=>(Be=>(x.dynamicTypingFunction&&x.dynamicTyping[Be]===void 0&&(x.dynamicTyping[Be]=x.dynamicTypingFunction(Be)),(x.dynamicTyping[Be]||x.dynamicTyping)===!0))(Re)?Me==="true"||Me==="TRUE"||Me!=="false"&&Me!=="FALSE"&&((Be=>{if(pe.test(Be)&&(Be=parseFloat(Be),se<Be&&Be<Z))return 1})(Me)?parseFloat(Me):ge.test(Me)?new Date(Me):Me===""?null:Me):Me)(Ee=x.header?Oe>=$.length?"__parsed_extra":$[Oe]:Ee,st=x.transform?x.transform(st,Ee):st);Ee==="__parsed_extra"?(De[Ee]=De[Ee]||[],De[Ee].push(st)):De[Ee]=st}return x.header&&(Oe>$.length?Ne("FieldMismatch","TooManyFields","Too many fields: expected "+$.length+" fields but parsed "+Oe,G+Ke):Oe<$.length&&Ne("FieldMismatch","TooFewFields","Too few fields: expected "+$.length+" fields but parsed "+Oe,G+Ke)),De}var Ie;J&&(x.header||x.dynamicTyping||x.transform)&&(Ie=1,!J.data.length||Array.isArray(J.data[0])?(J.data=J.data.map(me),Ie=J.data.length):J.data=me(J.data,0),x.header&&J.meta&&(J.meta.fields=$),G+=Ie)}function fe(){return x.header&&$.length===0}function Ne(le,me,Ie,Se){le={type:le,code:me,message:Ie},Se!==void 0&&(le.row=Se),J.errors.push(le)}b(x.step)&&(q=x.step,x.step=function(le){J=le,fe()?ae():(ae(),J.data.length!==0&&(Q+=le.data.length,x.preview&&Q>x.preview?A.abort():(J.data=J.data[0],q(J,re))))}),this.parse=function(le,me,Ie){var Se=x.quoteChar||'"',Se=(x.newline||(x.newline=this.guessLineEndings(le,Se)),H=!1,x.delimiter?b(x.delimiter)&&(x.delimiter=x.delimiter(le),J.meta.delimiter=x.delimiter):((Se=((ze,Ke,De,Oe,Ee)=>{var st,Re,Me,Be;Ee=Ee||[",","	","|",";",g.RECORD_SEP,g.UNIT_SEP];for(var Vt=0;Vt<Ee.length;Vt++){for(var Pt,Kn=Ee[Vt],at=0,Wt=0,tt=0,ht=(Me=void 0,new S({comments:Oe,delimiter:Kn,newline:Ke,preview:10}).parse(ze)),At=0;At<ht.data.length;At++)De&&ie(ht.data[At])?tt++:(Pt=ht.data[At].length,Wt+=Pt,Me===void 0?Me=Pt:0<Pt&&(at+=Math.abs(Pt-Me),Me=Pt));0<ht.data.length&&(Wt/=ht.data.length-tt),(Re===void 0||at<=Re)&&(Be===void 0||Be<Wt)&&1.99<Wt&&(Re=at,st=Kn,Be=Wt)}return{successful:!!(x.delimiter=st),bestDelimiter:st}})(le,x.newline,x.skipEmptyLines,x.comments,x.delimitersToGuess)).successful?x.delimiter=Se.bestDelimiter:(H=!0,x.delimiter=g.DefaultDelimiter),J.meta.delimiter=x.delimiter),z(x));return x.preview&&x.header&&Se.preview++,k=le,A=new S(Se),J=A.parse(k,me,Ie),ae(),ee?{meta:{paused:!0}}:J||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,A.abort(),k=b(x.chunk)?"":k.substring(A.getCharIndex())},this.resume=function(){re.streamer._halted?(ee=!1,re.streamer.parseChunk(k,!0)):setTimeout(re.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,A.abort(),J.meta.aborted=!0,b(x.complete)&&x.complete(J),k=""},this.guessLineEndings=function(ze,Se){ze=ze.substring(0,1048576);var Se=new RegExp(P(Se)+"([^]*?)"+P(Se),"gm"),Ie=(ze=ze.replace(Se,"")).split("\r"),Se=ze.split(`
`),ze=1<Se.length&&Se[0].length<Ie[0].length;if(Ie.length===1||ze)return`
`;for(var Ke=0,De=0;De<Ie.length;De++)Ie[De][0]===`
`&&Ke++;return Ke>=Ie.length/2?`\r
`:"\r"}}function P(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(x){var k=(x=x||{}).delimiter,A=x.newline,H=x.comments,q=x.step,Z=x.preview,se=x.fastMode,pe=null,ge=!1,re=x.quoteChar==null?'"':x.quoteChar,Q=re;if(x.escapeChar!==void 0&&(Q=x.escapeChar),(typeof k!="string"||-1<g.BAD_DELIMITERS.indexOf(k))&&(k=","),H===k)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<g.BAD_DELIMITERS.indexOf(H))&&(H=!1),A!==`
`&&A!=="\r"&&A!==`\r
`&&(A=`
`);var G=0,ee=!1;this.parse=function(j,$,J){if(typeof j!="string")throw new Error("Input must be a string");var ie=j.length,ae=k.length,fe=A.length,Ne=H.length,le=b(q),me=[],Ie=[],Se=[],ze=G=0;if(!j)return at();if(se||se!==!1&&j.indexOf(re)===-1){for(var Ke=j.split(A),De=0;De<Ke.length;De++){if(Se=Ke[De],G+=Se.length,De!==Ke.length-1)G+=A.length;else if(J)return at();if(!H||Se.substring(0,Ne)!==H){if(le){if(me=[],Be(Se.split(k)),Wt(),ee)return at()}else Be(Se.split(k));if(Z&&Z<=De)return me=me.slice(0,Z),at(!0)}}return at()}for(var Oe=j.indexOf(k,G),Ee=j.indexOf(A,G),st=new RegExp(P(Q)+P(re),"g"),Re=j.indexOf(re,G);;)if(j[G]===re)for(Re=G,G++;;){if((Re=j.indexOf(re,Re+1))===-1)return J||Ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:me.length,index:G}),Pt();if(Re===ie-1)return Pt(j.substring(G,Re).replace(st,re));if(re===Q&&j[Re+1]===Q)Re++;else if(re===Q||Re===0||j[Re-1]!==Q){Oe!==-1&&Oe<Re+1&&(Oe=j.indexOf(k,Re+1));var Me=Vt((Ee=Ee!==-1&&Ee<Re+1?j.indexOf(A,Re+1):Ee)===-1?Oe:Math.min(Oe,Ee));if(j.substr(Re+1+Me,ae)===k){Se.push(j.substring(G,Re).replace(st,re)),j[G=Re+1+Me+ae]!==re&&(Re=j.indexOf(re,G)),Oe=j.indexOf(k,G),Ee=j.indexOf(A,G);break}if(Me=Vt(Ee),j.substring(Re+1+Me,Re+1+Me+fe)===A){if(Se.push(j.substring(G,Re).replace(st,re)),Kn(Re+1+Me+fe),Oe=j.indexOf(k,G),Re=j.indexOf(re,G),le&&(Wt(),ee))return at();if(Z&&me.length>=Z)return at(!0);break}Ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:me.length,index:G}),Re++}}else if(H&&Se.length===0&&j.substring(G,G+Ne)===H){if(Ee===-1)return at();G=Ee+fe,Ee=j.indexOf(A,G),Oe=j.indexOf(k,G)}else if(Oe!==-1&&(Oe<Ee||Ee===-1))Se.push(j.substring(G,Oe)),G=Oe+ae,Oe=j.indexOf(k,G);else{if(Ee===-1)break;if(Se.push(j.substring(G,Ee)),Kn(Ee+fe),le&&(Wt(),ee))return at();if(Z&&me.length>=Z)return at(!0)}return Pt();function Be(tt){me.push(tt),ze=G}function Vt(tt){var ht=0;return ht=tt!==-1&&(tt=j.substring(Re+1,tt))&&tt.trim()===""?tt.length:ht}function Pt(tt){return J||(tt===void 0&&(tt=j.substring(G)),Se.push(tt),G=ie,Be(Se),le&&Wt()),at()}function Kn(tt){G=tt,Be(Se),Se=[],Ee=j.indexOf(A,G)}function at(tt){if(x.header&&!$&&me.length&&!ge){var ht=me[0],At={},us=new Set(ht);let Yn=!1;for(let Qt=0;Qt<ht.length;Qt++){let Kt=ht[Qt];if(At[Kt=b(x.transformHeader)?x.transformHeader(Kt,Qt):Kt]){let Jn,oi=At[Kt];for(;Jn=Kt+"_"+oi,oi++,us.has(Jn););us.add(Jn),ht[Qt]=Jn,At[Kt]++,Yn=!0,(pe=pe===null?{}:pe)[Jn]=Kt}else At[Kt]=1,ht[Qt]=Kt;us.add(Kt)}Yn&&console.warn("Duplicate headers found and renamed."),ge=!0}return{data:me,errors:Ie,meta:{delimiter:k,linebreak:A,aborted:ee,truncated:!!tt,cursor:ze+($||0),renamedHeaders:pe}}}function Wt(){q(at()),me=[],Ie=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return G}}function T(x){var k=x.data,A=f[k.workerId],H=!1;if(k.error)A.userError(k.error,k.file);else if(k.results&&k.results.data){var q={abort:function(){H=!0,C(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:D,resume:D};if(b(A.userStep)){for(var Z=0;Z<k.results.data.length&&(A.userStep({data:k.results.data[Z],errors:k.results.errors,meta:k.results.meta},q),!H);Z++);delete k.results}else b(A.userChunk)&&(A.userChunk(k.results,q,k.file),delete k.results)}k.finished&&!H&&C(k.workerId,k.results)}function C(x,k){var A=f[x];b(A.userComplete)&&A.userComplete(k),A.terminate(),delete f[x]}function D(){throw new Error("Not implemented.")}function z(x){if(typeof x!="object"||x===null)return x;var k,A=Array.isArray(x)?[]:{};for(k in x)A[k]=z(x[k]);return A}function V(x,k){return function(){x.apply(k,arguments)}}function b(x){return typeof x=="function"}return g.parse=function(x,k){var A=(k=k||{}).dynamicTyping||!1;if(b(A)&&(k.dynamicTypingFunction=A,A={}),k.dynamicTyping=A,k.transform=!!b(k.transform)&&k.transform,!k.worker||!g.WORKERS_SUPPORTED)return A=null,g.NODE_STREAM_INPUT,typeof x=="string"?(x=(H=>H.charCodeAt(0)!==65279?H:H.slice(1))(x),A=new(k.download?w:N)(k)):x.readable===!0&&b(x.read)&&b(x.on)?A=new E(k):(i.File&&x instanceof File||x instanceof Object)&&(A=new v(k)),A.stream(x);(A=(()=>{var H;return!!g.WORKERS_SUPPORTED&&(H=(()=>{var q=i.URL||i.webkitURL||null,Z=t.toString();return g.BLOB_URL||(g.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Z,")();"],{type:"text/javascript"})))})(),(H=new i.Worker(H)).onmessage=T,H.id=m++,f[H.id]=H)})()).userStep=k.step,A.userChunk=k.chunk,A.userComplete=k.complete,A.userError=k.error,k.step=b(k.step),k.chunk=b(k.chunk),k.complete=b(k.complete),k.error=b(k.error),delete k.worker,A.postMessage({input:x,config:k,workerId:A.id})},g.unparse=function(x,k){var A=!1,H=!0,q=",",Z=`\r
`,se='"',pe=se+se,ge=!1,re=null,Q=!1,G=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||g.BAD_DELIMITERS.filter(function($){return k.delimiter.indexOf($)!==-1}).length||(q=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(A=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(ge=k.skipEmptyLines),typeof k.newline=="string"&&(Z=k.newline),typeof k.quoteChar=="string"&&(se=k.quoteChar),typeof k.header=="boolean"&&(H=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");re=k.columns}k.escapeChar!==void 0&&(pe=k.escapeChar+se),k.escapeFormulae instanceof RegExp?Q=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(P(se),"g"));if(typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(x)){if(!x.length||Array.isArray(x[0]))return ee(null,x,ge);if(typeof x[0]=="object")return ee(re||Object.keys(x[0]),x,ge)}else if(typeof x=="object")return typeof x.data=="string"&&(x.data=JSON.parse(x.data)),Array.isArray(x.data)&&(x.fields||(x.fields=x.meta&&x.meta.fields||re),x.fields||(x.fields=Array.isArray(x.data[0])?x.fields:typeof x.data[0]=="object"?Object.keys(x.data[0]):[]),Array.isArray(x.data[0])||typeof x.data[0]=="object"||(x.data=[x.data])),ee(x.fields||[],x.data||[],ge);throw new Error("Unable to serialize unrecognized input");function ee($,J,ie){var ae="",fe=(typeof $=="string"&&($=JSON.parse($)),typeof J=="string"&&(J=JSON.parse(J)),Array.isArray($)&&0<$.length),Ne=!Array.isArray(J[0]);if(fe&&H){for(var le=0;le<$.length;le++)0<le&&(ae+=q),ae+=j($[le],le);0<J.length&&(ae+=Z)}for(var me=0;me<J.length;me++){var Ie=(fe?$:J[me]).length,Se=!1,ze=fe?Object.keys(J[me]).length===0:J[me].length===0;if(ie&&!fe&&(Se=ie==="greedy"?J[me].join("").trim()==="":J[me].length===1&&J[me][0].length===0),ie==="greedy"&&fe){for(var Ke=[],De=0;De<Ie;De++){var Oe=Ne?$[De]:De;Ke.push(J[me][Oe])}Se=Ke.join("").trim()===""}if(!Se){for(var Ee=0;Ee<Ie;Ee++){0<Ee&&!ze&&(ae+=q);var st=fe&&Ne?$[Ee]:Ee;ae+=j(J[me][st],Ee)}me<J.length-1&&(!ie||0<Ie&&!ze)&&(ae+=Z)}}return ae}function j($,J){var ie,ae;return $==null?"":$.constructor===Date?JSON.stringify($).slice(1,25):(ae=!1,Q&&typeof $=="string"&&Q.test($)&&($="'"+$,ae=!0),ie=$.toString().replace(G,pe),(ae=ae||A===!0||typeof A=="function"&&A($,J)||Array.isArray(A)&&A[J]||((fe,Ne)=>{for(var le=0;le<Ne.length;le++)if(-1<fe.indexOf(Ne[le]))return!0;return!1})(ie,g.BAD_DELIMITERS)||-1<ie.indexOf(q)||ie.charAt(0)===" "||ie.charAt(ie.length-1)===" ")?se+ie+se:ie)}},g.RECORD_SEP="",g.UNIT_SEP="",g.BYTE_ORDER_MARK="\uFEFF",g.BAD_DELIMITERS=["\r",`
`,'"',g.BYTE_ORDER_MARK],g.WORKERS_SUPPORTED=!c&&!!i.Worker,g.NODE_STREAM_INPUT=1,g.LocalChunkSize=10485760,g.RemoteChunkSize=5242880,g.DefaultDelimiter=",",g.Parser=S,g.ParserHandle=L,g.NetworkStreamer=w,g.FileStreamer=v,g.StringStreamer=N,g.ReadableStreamStreamer=E,i.jQuery&&((o=i.jQuery).fn.parse=function(x){var k=x.config||{},A=[];return this.each(function(Z){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var se=0;se<this.files.length;se++)A.push({file:this.files[se],inputElem:this,instanceConfig:o.extend({},k)})}),H(),this;function H(){if(A.length===0)b(x.complete)&&x.complete();else{var Z,se,pe,ge,re=A[0];if(b(x.before)){var Q=x.before(re.file,re.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return Z="AbortError",se=re.file,pe=re.inputElem,ge=Q.reason,void(b(x.error)&&x.error({name:Z},se,pe,ge));if(Q.action==="skip")return void q();typeof Q.config=="object"&&(re.instanceConfig=o.extend(re.instanceConfig,Q.config))}else if(Q==="skip")return void q()}var G=re.instanceConfig.complete;re.instanceConfig.complete=function(ee){b(G)&&G(ee,re.file,re.inputElem),q()},g.parse(re.file,re.instanceConfig)}}function q(){A.splice(0,1),H()}}),d&&(i.onmessage=function(x){x=x.data,g.WORKER_ID===void 0&&x&&(g.WORKER_ID=x.workerId),typeof x.input=="string"?i.postMessage({workerId:g.WORKER_ID,results:g.parse(x.input,x.config),finished:!0}):(i.File&&x.input instanceof File||x.input instanceof Object)&&(x=g.parse(x.input,x.config))&&i.postMessage({workerId:g.WORKER_ID,results:x,finished:!0})}),(w.prototype=Object.create(_.prototype)).constructor=w,(v.prototype=Object.create(_.prototype)).constructor=v,(N.prototype=Object.create(N.prototype)).constructor=N,(E.prototype=Object.create(_.prototype)).constructor=E,g})}(Za)),Za.exports}var MI=DI();const Td=Bg(MI);function FI(){const{eventState:n,setEventTeams:e}=ot(),[t,i]=R.useState(!1),[o,c]=R.useState(null),[d,f]=R.useState(!1),[m,g]=R.useState(null),_=N=>{const E=N.target.files[0];E&&(i(!0),c(null),f(!1),Td.parse(E,{header:!1,skipEmptyLines:!0,complete:L=>{if(L.errors.length>0){c(`Error parsing CSV: ${L.errors[0].message}`),i(!1);return}try{const P=L.data.slice(2);let S=0,T=1;n.selectionType==="women"&&(S=5,T=6),console.log(`Using columns for ${n.selectionType} selection: Rank=${S}, Name=${T}`);const C=P.filter(D=>D[S]&&D[T]).map((D,z)=>{const V=parseInt(D[S])||z+1,b=D[T]||"";return{id:`team_${z+1}`,name:b,csrRank:V,conference:"N/A",status:{isAQ:!1,isLocked:!1,isQualified:!1,qualificationMethod:null,qualificationRound:null}}});if(C.some(D=>!D.name)){c("Invalid CSV format: Some teams are missing names"),i(!1);return}g({teams:C,rowCount:C.length,columnNames:[],selectionType:n.selectionType}),i(!1)}catch(P){c(`Error processing data: ${P.message}`),i(!1)}},error:L=>{c(`Error reading file: ${L.message}`),i(!1)}}))},w=()=>{try{const N=[...m.teams].sort((E,L)=>E.name.localeCompare(L.name));e(N),f(!0),g(null)}catch(N){c(`Error importing teams: ${N.message}`)}},v=()=>{g(null)};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Import Team Data"}),d?l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[l.jsx("p",{className:"text-green-700 font-medium",children:"Team data imported successfully!"}),l.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[n.teams.length," teams are now ready for the selection process."]})]}):l.jsxs(l.Fragment,{children:[o&&l.jsx("div",{className:"bg-red-50 p-4 rounded-lg mb-4",children:l.jsx("p",{className:"text-red-700",children:o})}),!m&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"flex flex-col items-center p-4 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50",children:[l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-2 text-gray-500",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),l.jsx("span",{className:"text-sm text-gray-500",children:t?"Uploading...":"Upload CSR File (CSV)"}),l.jsx("input",{type:"file",accept:".csv",onChange:_,className:"hidden",disabled:t})]}),l.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"CSV Format Requirements"}),l.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["Currently importing for: ",l.jsxs("span",{className:"font-bold",children:[n.selectionType==="women"?"Women's":"Open"," Selection"]})]}),l.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[l.jsx("li",{children:"File must be in CSV format"}),l.jsx("li",{children:"Data should start from row 3 of the CSV file"}),n.selectionType==="women"?l.jsx("li",{children:"For Women's Selection: Using columns F (rank) and G (team name)"}):l.jsx("li",{children:"For Open Selection: Using columns A (rank) and B (team name)"})]})]})]}),m&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-medium mb-2",children:"Preview Team Data"}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[l.jsxs("p",{children:["Found ",m.rowCount," teams in the CSV file"]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Columns detected: ",m.columnNames.join(", ")]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden mb-4",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[m.teams.slice(0,5).map((N,E)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:N.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:N.conference})]},E)),m.teams.length>5&&l.jsx("tr",{children:l.jsxs("td",{colSpan:"2",className:"px-6 py-4 text-center text-gray-500 italic",children:["... and ",m.teams.length-5," more teams"]})})]})]})}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{onClick:v,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),l.jsx("button",{onClick:w,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Import Teams"})]})]})]})]})}function UI(){const{resetEventState:n}=ot(),[e,t]=R.useState(!1),i=()=>{const c=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").map(d=>d.role==="selector"?{...d,votingHistory:{}}:d);localStorage.setItem("sailing_nationals_users",JSON.stringify(c)),n(),t(!1)};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-700",children:"Reset Selection Process"}),l.jsx("p",{className:"mb-4 text-gray-700",children:"This will completely reset the selection process. All qualified teams, rankings, and votes will be removed. You will need to re-import team data from the CSR file."}),e?l.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[l.jsx("p",{className:"font-medium text-red-800 mb-4",children:"Are you sure you want to reset the entire selection process? This action cannot be undone."}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, Reset Everything"})]})]}):l.jsx("button",{onClick:()=>t(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reset Process"})]})}function zI(){const{eventState:n}=ot(),[e,t]=R.useState([]),[i,o]=R.useState([]),[c,d]=R.useState([]),[f,m]=R.useState("status"),{logSelectorRankings:g}=ot();return R.useEffect(()=>{i.length>0&&Xr(n.selectionType,{event:"seeding_submitted",phase:n.phase,selectorSeedings:i})},[i]),R.useEffect(()=>{const w=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(E=>E.role==="selector"),v=w.map(E=>{var S,T,C,D;const L=((T=(S=E.votingHistory)==null?void 0:S.seeding)==null?void 0:T.submitted)||!1,P=((D=(C=E.votingHistory)==null?void 0:C.seeding)==null?void 0:D.timestamp)||null;return{id:E.id,name:E.name,hasSubmitted:L,timestamp:P}});t(v);const N=[];if(w.forEach(E=>{var L,P;if((P=(L=E.votingHistory)==null?void 0:L.seeding)!=null&&P.submitted){const S=E.votingHistory.seeding.rankings||[];N.push({selectorId:E.id,selectorName:E.name,seedings:S.map((T,C)=>{const D=n.teams.find(z=>z.id===T);return{teamId:T,teamName:D?D.name:"Unknown Team",seed:C+1}})})}}),o(N),N.length>0){const E={},L={},P={};N.forEach(C=>{C.seedings.forEach(D=>{E[D.teamId]||(E[D.teamId]=0,L[D.teamId]=0,P[D.teamId]={teamName:D.teamName,seedings:[]}),E[D.teamId]+=D.seed,L[D.teamId]++,P[D.teamId].seedings.push(D.seed)})});const T=Object.keys(E).map(C=>({teamId:C,teamName:P[C].teamName,averageSeed:(E[C]/L[C]).toFixed(2),seedings:P[C].seedings})).sort((C,D)=>parseFloat(C.averageSeed)-parseFloat(D.averageSeed));d(T)}},[n.teams]),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Championship Seeding Monitoring"}),l.jsx("div",{className:"border-b mb-6",children:l.jsxs("nav",{className:"flex -mb-px",children:[l.jsx("button",{onClick:()=>m("status"),className:`mr-4 py-2 px-4 font-medium ${f==="status"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Selector Status"}),l.jsx("button",{onClick:()=>m("individual"),className:`mr-4 py-2 px-4 font-medium ${f==="individual"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Individual Seedings"}),l.jsx("button",{onClick:()=>m("average"),className:`py-2 px-4 font-medium ${f==="average"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Final Seedings"})]})}),f==="status"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Selector Submission Progress"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[e.filter(_=>_.hasSubmitted).length," of ",e.length," selectors have submitted seedings"]})]}),l.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[e.length>0?Math.round(e.filter(_=>_.hasSubmitted).length/e.length*100):0,"%"]})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Selector Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(_=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:_.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.hasSubmitted?l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Submitted"}):l.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pending"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.timestamp||""})]},_.id))})]})})]}),f==="individual"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-blue-50 p-4 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Individual Selector Seedings"}),l.jsx("p",{className:"text-sm text-gray-600",children:"View how each selector seeded the qualified teams"})]}),l.jsxs("div",{className:"space-y-6",children:[i.map(_=>l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-2",children:[_.selectorName,"'s Seedings"]}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seed"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.seedings.sort((w,v)=>w.seed-v.seed).map(w=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full",children:w.seed})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:w.teamName})})]},w.teamId))})]})})]},_.selectorId)),i.length===0&&l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-center text-gray-500",children:"No selector seedings submitted yet"})]})]}),f==="average"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4 bg-green-50 p-4 rounded-lg",children:[l.jsx("p",{className:"font-medium",children:"Final Championship Seedings"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Teams are sorted by their average seed across all selectors."})]}),l.jsx("div",{className:"border rounded-lg overflow-hidden mb-6",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seed"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Seed"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[c.map((_,w)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full font-medium",children:w+1})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:_.teamName})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:_.averageSeed})]},_.teamId)),c.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500",children:"No seedings submitted yet"})})]})]})})]})]})}function VI(){const{eventState:n,setSelectionType:e,resetEventState:t,advancePhase:i,setEventTeams:o}=ot(),{user:c}=Gt(),[d,f]=R.useState(""),[m,g]=R.useState([]),[_,w]=R.useState([]),[v,N]=R.useState(!1),E=R.useRef(null),[L,P]=R.useState(null),[S,T]=R.useState(!1),[C,D]=R.useState(null),[z,V]=R.useState(null);_0.useEffect(()=>{const H=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").filter(q=>q.role==="selector");w(H)},[]);const b=A=>{g(H=>H.includes(A)?H.filter(q=>q!==A):[...H,A])},x=A=>{const H=A.target.files[0];H&&(P(H),T(!0),D(null),Td.parse(H,{header:!1,skipEmptyLines:!0,complete:q=>{if(q.errors.length>0){D(`Error parsing CSV: ${q.errors[0].message}`),T(!1);return}try{const Z=q.data;V(Z),T(!1)}catch(Z){D(`Error processing file: ${Z.message}`),T(!1)}},error:q=>{D(`Error reading file: ${q.message}`),T(!1)}}))},k=()=>{if(!L){alert("Please upload the CSR file first.");return}T(!0),Td.parse(L,{header:!1,skipEmptyLines:!0,complete:A=>{if(A.errors.length>0){D(`Error parsing CSV: ${A.errors[0].message}`),T(!1);return}try{const H=A.data.slice(2);let q=0,Z=1;d==="women"&&(q=5,Z=6);const se=H.filter(re=>re[q]&&re[Z]).map((re,Q)=>{const G=parseInt(re[q])||Q+1,ee=re[Z]||"";return{id:`team_${Q+1}`,name:ee,csrRank:G,conference:"N/A",status:{isAQ:!1,isLocked:!1,isQualified:!1,qualificationMethod:null,qualificationRound:null}}});if(se.some(re=>!re.name)){D("Invalid CSV format: Some teams are missing names"),T(!1);return}t(),e(d),o(se);const ge=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]").map(re=>re.role==="selector"?{...re,isActive:m.includes(re.id)}:re);localStorage.setItem("sailing_nationals_users",JSON.stringify(ge)),N(!1),i(),alert(`${d.charAt(0).toUpperCase()+d.slice(1)} selection process has been initiated with ${se.length} teams!`),T(!1)}catch(H){D(`Error processing data: ${H.message}`),T(!1)}},error:A=>{D(`Error reading file: ${A.message}`),T(!1)}})};return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Start Selection Process"}),v?l.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[l.jsxs("p",{className:"font-medium text-yellow-800 mb-4",children:["Are you sure you want to start the ",d," selection process?"]}),l.jsxs("div",{className:"mb-4 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Selected Process:"})," ",d.charAt(0).toUpperCase()+d.slice(1)," Selection"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"CSV File:"})," ",L?L.name:"None"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Selected Selectors:"})," ",m.length]})]}),l.jsxs("div",{className:"flex space-x-3 justify-end",children:[l.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Confirm & Start"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Select which process you want to start and which selectors will participate."})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selection Process Type"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer ${d==="open"?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"}`,onClick:()=>f("open"),children:[l.jsx("h3",{className:"font-medium",children:"Open Selection"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select teams for the Open National Championship"})]}),l.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer ${d==="women"?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"}`,onClick:()=>f("women"),children:[l.jsx("h3",{className:"font-medium",children:"Women's Selection"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select teams for the Women's National Championship"})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Participating Selectors"}),l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsx("div",{className:"max-h-64 overflow-y-auto",children:_.map(A=>l.jsxs("div",{className:"flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-gray-50",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:A.name}),l.jsx("p",{className:"text-sm text-gray-600",children:A.email})]}),l.jsx("input",{type:"checkbox",checked:m.includes(A.id),onChange:()=>b(A.id),className:"h-5 w-5 text-blue-600"})]},A.id))})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSR File"}),l.jsxs("div",{className:"flex flex-col items-center p-4 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50",onClick:()=>E.current.click(),children:[l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-2 text-gray-500",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),l.jsx("span",{className:"text-sm text-gray-500",children:S?"Uploading...":L?L.name:"Upload CSR File (CSV)"}),l.jsx("input",{ref:E,type:"file",accept:".csv",onChange:x,className:"hidden",disabled:S})]}),C&&l.jsx("div",{className:"mt-2 text-sm text-red-600",children:C}),z&&l.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[l.jsx("h4",{className:"font-medium mb-2",children:"File Preview"}),l.jsx("div",{className:"border rounded bg-white",style:{height:"300px",overflowY:"scroll",display:"block"},children:l.jsx("table",{className:"min-w-full table-fixed border-collapse",children:l.jsx("tbody",{children:z.map((A,H)=>l.jsx("tr",{className:H%2===0?"bg-white":"bg-gray-50",children:A.slice(0,10).filter((q,Z)=>Z!==9).map((q,Z)=>l.jsx("td",{className:`px-4 py-2 text-sm text-center border-b ${d==="open"&&(Z===0||Z===1)||d==="women"&&(Z===5||Z===6)?"bg-blue-50 font-medium":""}`,style:{width:`${100/9}%`},children:q||""},Z))},H))})})}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:d==="women"?"Columns F-G (highlighted) will be used for Women's rankings.":"Columns A-B (highlighted) will be used for Open rankings."})]}),l.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[l.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"CSV Format Requirements"}),l.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[l.jsx("li",{children:"File must be in CSV format"}),l.jsx("li",{children:"Data should start from row 3 of the CSV file"}),l.jsx("li",{children:"Open Rankings should be in columns A (rank) and B (team name)"}),l.jsx("li",{children:"Women's Rankings should be in columns F (rank) and G (team name)"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>{if(!d){alert("Please select a process type.");return}if(m.length<3){alert("Please select at least 3 selectors for the process.");return}if(!L){alert("Please upload the CSR file first.");return}N(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",disabled:!L||!d||m.length<3,children:"Start Selection Process"})})]})]})}function WI(){const{eventState:n}=ot(),[e,t]=R.useState(!1);R.useEffect(()=>{const c=El.subscribe("state_updated",()=>{t(d=>!d)});return()=>c()},[]);const i=()=>{if(!n.selectionType)return l.jsx(VI,{});switch(n.phase){case B.ROUND1_AQ:return l.jsx(jI,{});case B.ROUND1_LOCK:return l.jsx(PI,{});case B.ROUND_LEFTOVER:case B.ALTERNATE_LEFTOVER:return l.jsx(AI,{});case B.ROUND_RANKING:case B.ALTERNATE_RANKING:return l.jsx(OI,{});case B.SEEDING:return l.jsx(zI,{});case B.SEEDING_ADJUSTMENTS:return l.jsx(x_,{});case B.COMPLETED:return l.jsx(__,{});case B.PRESELECTION:return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Welcome to the Selection Process"}),l.jsx("p",{children:"Use the controls above to manage the selection process phases."}),l.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:l.jsx("p",{className:"text-sm text-blue-700",children:"Before starting the selection process, you should import the team data from the CSR file."})})]}),l.jsx(FI,{})]});case B.ROUND1_FINALIZED:case B.ROUND_FINALIZED:case B.ALTERNATE_FINALIZED:return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Round Complete"}),l.jsx("p",{children:"The current round has been finalized. Use the controls above to advance to the next phase."}),n.phase===B.ALTERNATE_FINALIZED&&l.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:l.jsx("p",{className:"text-sm text-blue-700",children:n.alternateCount===1?"One alternate has been selected. Continue to select the second alternate.":"Both alternates have been selected. Continue to the seeding phase."})})]});default:return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Welcome to the Selection Process"}),l.jsx("p",{children:"Use the controls above to manage the selection process phases."})]})}},o=()=>{const c=n.qualifiedTeams||[],d=n.pendingQualifiedTeams||[],f=n.remainingBerths||36;return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Qualified Teams"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("p",{className:"text-gray-600",children:["Total Qualified: ",c.length]}),l.jsxs("p",{className:"text-gray-600",children:["Remaining Berths: ",f]})]}),d.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Pending Qualified Teams"}),l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"These teams will be officially qualified when the current round is finalized."}),l.jsx("div",{className:"space-y-2",children:d.map(m=>l.jsxs("div",{className:"p-2 bg-yellow-50 rounded-lg flex justify-between items-center",children:[l.jsx("span",{children:m.name}),l.jsxs("span",{className:"text-sm text-yellow-600",children:["Pending: ",m.status.qualificationMethod]})]},m.id))})]}),c.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Qualified Teams List"}),l.jsx("div",{className:"space-y-2",children:c.map(m=>l.jsxs("div",{className:"p-2 bg-green-50 rounded-lg flex justify-between items-center",children:[l.jsx("span",{children:m.name}),l.jsx("span",{className:"text-sm text-green-600",children:m.status.qualificationMethod})]},m.id))})]})]})]})};return l.jsxs("div",{className:"space-y-6",children:[n.selectionType&&l.jsx("div",{className:"bg-blue-100 p-4 rounded-lg",children:l.jsxs("p",{className:"font-medium",children:["Current Process: ",n.selectionType==="women"?"Women's":"Open"," Selection"]})}),n.selectionType&&l.jsx(RI,{}),i(),n.selectionType&&o(),n.selectionType&&l.jsx(UI,{})]})}function $I(){const[n,e]=R.useState([]),t=o=>({[B.PRESELECTION]:"Preselection Phase",[B.ROUND1_AQ]:"Round 1 - Automatic Qualifier Selection",[B.ROUND1_LOCK]:"Round 1 - Lock Vote Submission",[B.ROUND1_FINALIZED]:"Round 1 Complete",[B.ROUND_LEFTOVER]:"Leftover Team Voting",[B.ROUND_RANKING]:"Team Ranking Phase",[B.ROUND_FINALIZED]:"Round Complete"})[o]||o;R.useEffect(()=>{const o=El.subscribe("phase_changed",d=>{const f={id:Date.now(),type:"info",message:`Process phase changed from "${t(d.oldPhase)}" to "${t(d.newPhase)}"`,time:new Date};e(m=>[...m,f])}),c=El.subscribe("teams_qualified",d=>{const f={id:Date.now(),type:"success",message:`${d.newlyQualified.length} new teams have qualified! Total qualified: ${d.totalQualified}`,time:new Date};e(m=>[...m,f])});return()=>{o(),c()}},[]);const i=o=>{e(c=>c.filter(d=>d.id!==o))};return R.useEffect(()=>{if(n.length>0){const o=setTimeout(()=>{e(c=>{const[,...d]=c;return d})},5e3);return()=>clearTimeout(o)}},[n]),n.length===0?null:l.jsx("div",{className:"fixed bottom-5 right-5 z-50 space-y-2",children:n.map(o=>l.jsxs("div",{className:`p-4 rounded-lg shadow-lg flex items-start max-w-md ${o.type==="success"?"bg-green-100 text-green-800":o.type==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-medium",children:o.message}),l.jsx("p",{className:"text-xs mt-1",children:o.time.toLocaleTimeString()})]}),l.jsx("button",{onClick:()=>i(o.id),className:"ml-2 text-gray-500 hover:text-gray-700",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},o.id))})}function BI(){var C,D,z,V;const[n,e]=R.useState([]),[t,i]=R.useState(null),[o,c]=R.useState(""),[d,f]=R.useState("all"),[m,g]=R.useState(new Set);R.useEffect(()=>{_()},[]);const _=()=>{const b=Wg();e(b)},w=b=>{window.confirm("Are you sure you want to delete this log?")&&(_I(b),_(),(t==null?void 0:t.id)===b&&i(null))},v=()=>{if(m.size===0){alert("No logs selected");return}if(window.confirm(`Are you sure you want to delete ${m.size} selected log entries?`)){const x=Wg().filter(k=>!m.has(k.id));localStorage.setItem("sailing_nationals_selection_logs",JSON.stringify(x)),g(new Set),_()}},N=b=>{g(x=>{const k=new Set(x);return k.has(b)?k.delete(b):k.add(b),k})},E=()=>{m.size===T.length?g(new Set):g(new Set(T.map(b=>b.id)))},L=b=>{const x={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(b).toLocaleDateString(void 0,x)},P=b=>{var x;switch(b.data.event){case"phase_change":return`Phase changed: ${b.data.oldPhase}  ${b.data.newPhase}`;case"teams_qualified":return`Teams qualified: ${((x=b.data.newlyQualifiedTeams)==null?void 0:x.length)||0} teams`;case"ranking_group_updated":return`Ranking group updated: ${b.data.teamsCount} teams`;case"rankings_submitted":return`Rankings submitted for Round ${b.data.round}`;case"process_completed":return`Selection process completed: ${b.data.summary.totalQualified} qualified, ${b.data.summary.totalAlternates} alternates`;default:return b.data.event}},T=[...n.filter(b=>{const x=o===""||JSON.stringify(b).toLowerCase().includes(o.toLowerCase()),k=d==="all"||b.type===d;return x&&k})].sort((b,x)=>new Date(x.timestamp)-new Date(b.timestamp));return l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Selection Process Logs"}),l.jsxs("div",{className:"mb-4 flex flex-wrap gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx("input",{type:"text",placeholder:"Search logs...",value:o,onChange:b=>c(b.target.value),className:"w-full p-2 border rounded-lg"})}),l.jsx("div",{children:l.jsxs("select",{value:d,onChange:b=>f(b.target.value),className:"p-2 border rounded-lg",children:[l.jsx("option",{value:"all",children:"All Processes"}),l.jsx("option",{value:"open",children:"Open Selection"}),l.jsx("option",{value:"women",children:"Women's Selection"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1 border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 p-3 border-b font-medium flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:m.size===T.length&&T.length>0,onChange:E,className:"h-4 w-4 mr-2 text-blue-600"}),l.jsxs("span",{children:["Log Entries (",T.length,")"]})]}),m.size>0&&l.jsxs("button",{onClick:v,className:"text-red-600 hover:text-red-900 text-sm flex items-center",children:[l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Delete Selected (",m.size,")"]})]}),l.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"600px"},children:T.length>0?l.jsx("div",{className:"divide-y",children:T.map(b=>l.jsx("div",{className:`p-3 cursor-pointer hover:bg-gray-50 ${(t==null?void 0:t.id)===b.id?"bg-blue-50":""}`,children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{type:"checkbox",checked:m.has(b.id),onChange:()=>N(b.id),onClick:x=>x.stopPropagation(),className:"h-4 w-4 mr-2 mt-1 text-blue-600"}),l.jsxs("div",{onClick:()=>i(b),children:[l.jsxs("div",{className:"text-sm font-medium mb-1",children:[b.type==="women"?"Women's":"Open"," Selection"]}),l.jsx("div",{className:"text-xs text-gray-500 mb-2",children:L(b.timestamp)}),l.jsx("div",{className:"text-sm text-gray-700",children:P(b)})]})]}),l.jsx("button",{onClick:x=>{x.stopPropagation(),w(b.id)},className:"text-red-600 hover:text-red-900 p-1",title:"Delete log",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})},b.id))}):l.jsx("div",{className:"p-4 text-center text-gray-500",children:"No log entries found"})})]}),l.jsxs("div",{className:"lg:col-span-2 border rounded-lg overflow-hidden",children:[l.jsx("div",{className:"bg-gray-50 p-3 border-b font-medium",children:"Log Details"}),l.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"600px"},children:t?l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h3",{className:"text-lg font-medium mb-2",children:[t.type==="women"?"Women's":"Open"," Selection"]}),l.jsx("p",{className:"text-sm text-gray-600",children:L(t.timestamp)}),l.jsx("div",{className:"mt-2 px-2 py-1 inline-block text-xs font-medium rounded bg-blue-100 text-blue-800",children:t.data.event}),t.data.round&&l.jsxs("div",{className:"mt-2 px-2 py-1 inline-block text-xs font-medium rounded bg-purple-100 text-purple-800 ml-2",children:["Round ",t.data.round]}),t.data.phase&&l.jsx("div",{className:"mt-2 px-2 py-1 inline-block text-xs font-medium rounded bg-green-100 text-green-800 ml-2",children:t.data.phase})]}),t.data.event==="phase_change"&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Phase Transition"}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"bg-yellow-100 p-2 rounded",children:t.data.oldPhase}),l.jsx("div",{className:"mx-2",children:""}),l.jsx("div",{className:"bg-green-100 p-2 rounded",children:t.data.newPhase})]}),l.jsxs("div",{className:"mt-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Round:"})," ",t.data.currentRound]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Qualified Teams:"})," ",t.data.qualifiedTeamsCount]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Remaining Berths:"})," ",t.data.remainingBerths]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Ranking Group Size:"})," ",t.data.rankingGroupSize]})]})]})]}),t.data.event==="teams_qualified"&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Newly Qualified Teams"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:((C=t.data.newlyQualifiedTeams)==null?void 0:C.length)>0?l.jsx("div",{className:"space-y-2",children:t.data.newlyQualifiedTeams.map((b,x)=>l.jsxs("div",{className:"flex justify-between bg-white p-2 rounded border",children:[l.jsx("div",{children:b.name}),l.jsx("div",{className:"text-sm text-gray-600",children:b.qualificationMethod})]},x))}):l.jsx("p",{className:"text-gray-500",children:"No teams qualified in this event"})})]}),t.data.event==="ranking_group_updated"&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Ranking Group Teams"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:((D=t.data.teams)==null?void 0:D.length)>0?l.jsx("div",{className:"space-y-2",children:t.data.teams.map((b,x)=>l.jsx("div",{className:"bg-white p-2 rounded border",children:b.name},x))}):l.jsx("p",{className:"text-gray-500",children:"No teams in ranking group"})})]}),t.data.event==="process_completed"&&l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Process Completion Summary"}),l.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[l.jsxs("div",{className:"mb-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"p-3 bg-white rounded shadow text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.data.summary.totalQualified}),l.jsx("div",{className:"text-sm text-gray-600",children:"Qualified Teams"})]}),l.jsxs("div",{className:"p-3 bg-white rounded shadow text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.data.summary.totalAlternates}),l.jsx("div",{className:"text-sm text-gray-600",children:"Alternates"})]}),l.jsxs("div",{className:"p-3 bg-white rounded shadow text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.data.summary.totalLeftover}),l.jsx("div",{className:"text-sm text-gray-600",children:"Non-Qualified"})]}),l.jsxs("div",{className:"p-3 bg-white rounded shadow text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.data.totalTeamsCount}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Teams"})]})]}),l.jsxs("p",{className:"text-sm text-gray-600 mb-2 text-center",children:["Final results for ",t.data.summary.selectionType==="women"?"Women's":"Open"," Selection Process"]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Qualified Teams (with Seeding)"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg overflow-hidden",children:l.jsx("div",{className:"space-y-2",children:t.data.qualifiedTeams.map((b,x)=>l.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-green-200",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:x+1}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:b.name}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Qualified via ",b.qualificationMethod," in Round ",b.qualificationRound]})]})]}),l.jsxs("div",{className:"font-medium",children:["Seed: ",b.averageSeed]})]},b.id))})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Alternate Teams"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg overflow-hidden",children:l.jsx("div",{className:"space-y-2",children:t.data.alternateTeams.length>0?t.data.alternateTeams.map((b,x)=>l.jsx("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-yellow-200",children:l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"w-8 h-8 flex items-center justify-center bg-yellow-100 rounded-full mr-3",children:["ALT ",x+1]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:b.name}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Selected as alternate in Round ",b.qualificationRound]})]})]})},b.id)):l.jsx("p",{className:"text-gray-500 text-center p-2",children:"No alternate teams"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Non-Qualified Teams"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg overflow-y-auto max-h-60",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Team Name"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"CSR Rank"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.data.leftoverTeams.sort((b,x)=>b.csrRank-x.csrRank).map(b=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:b.name}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-500",children:b.csrRank})]},b.id))})]})})]})]}),t.data.event==="rankings_submitted"&&l.jsxs("div",{children:[t.data.finalRoundInfo&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-medium mb-2 text-red-600",children:"Final Round Selection Results"}),l.jsxs("div",{className:"bg-red-50 p-3 rounded-lg mb-4 border border-red-200",children:[l.jsxs("div",{className:"mb-2 font-medium",children:["Teams Qualifying (",t.data.finalRoundInfo.mainQualifiers.length,")"]}),l.jsx("div",{className:"space-y-2 mb-4",children:t.data.finalRoundInfo.mainQualifiers.map((b,x)=>l.jsxs("div",{className:"flex justify-between bg-white p-2 rounded border border-green-200",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-100 rounded-full mr-3",children:x+1}),l.jsx("div",{children:b.teamName})]}),l.jsxs("div",{className:"font-medium text-green-600",children:["Avg Rank: ",b.averageRank]})]},x))}),l.jsxs("div",{className:"mb-2 font-medium",children:["Alternates (",t.data.finalRoundInfo.alternates.length,")"]}),l.jsx("div",{className:"space-y-2 mb-4",children:t.data.finalRoundInfo.alternates.map((b,x)=>l.jsxs("div",{className:"flex justify-between bg-white p-2 rounded border border-yellow-200",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"w-8 h-8 flex items-center justify-center bg-yellow-100 rounded-full mr-3",children:["ALT ",x+1]}),l.jsx("div",{children:b.teamName})]}),l.jsxs("div",{className:"font-medium text-yellow-600",children:["Avg Rank: ",b.averageRank]})]},x))}),l.jsxs("div",{className:"mb-2 font-medium",children:["Non-Qualifying Teams (",t.data.finalRoundInfo.nonQualifiers.length,")"]}),l.jsx("div",{className:"space-y-2",children:t.data.finalRoundInfo.nonQualifiers.map((b,x)=>l.jsxs("div",{className:"flex justify-between bg-white p-2 rounded border",children:[l.jsx("div",{children:b.teamName}),l.jsxs("div",{className:"text-gray-600",children:["Avg Rank: ",b.averageRank]})]},x))}),l.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[l.jsxs("p",{children:["Total teams in ranking group: ",t.data.finalRoundInfo.rankingGroupSize]}),l.jsxs("p",{children:["Remaining berths filled: ",t.data.finalRoundInfo.remainingBerths]})]})]})]}),l.jsx("h4",{className:"font-medium mb-2",children:"Average Rankings"}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[l.jsx("div",{className:"mb-2 text-sm text-gray-600",children:"Top ranked teams based on selector averages"}),((z=t.data.averageRankings)==null?void 0:z.length)>0?l.jsx("div",{className:"space-y-2",children:t.data.averageRankings.map((b,x)=>l.jsxs("div",{className:"flex justify-between bg-white p-2 rounded border",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full mr-3",children:x+1}),l.jsx("div",{children:b.teamName})]}),l.jsxs("div",{className:"font-medium",children:["Avg: ",b.averageRank]})]},x))}):l.jsx("p",{className:"text-gray-500",children:"No average rankings available"})]}),l.jsx("h4",{className:"font-medium mb-2",children:"Individual Selector Rankings"}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:((V=t.data.selectorRankings)==null?void 0:V.length)>0?l.jsx("div",{className:"space-y-4",children:t.data.selectorRankings.map((b,x)=>l.jsxs("div",{className:"bg-white p-3 rounded border",children:[l.jsxs("h5",{className:"font-medium mb-2",children:[b.selectorName,"'s Rankings"]}),l.jsx("div",{className:"space-y-1",children:b.rankings.map((k,A)=>l.jsx("div",{className:"flex justify-between text-sm border-b pb-1 last:border-b-0",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-6 h-6 flex items-center justify-center bg-gray-100 rounded-full mr-2",children:k.rank}),l.jsx("div",{children:k.teamName})]})},A))})]},x))}):l.jsx("p",{className:"text-gray-500",children:"No individual rankings available"})})]}),l.jsx("div",{className:"mt-6",children:l.jsxs("details",{children:[l.jsx("summary",{className:"cursor-pointer text-sm text-gray-500",children:"View Raw Data"}),l.jsx("pre",{className:"mt-2 p-3 bg-gray-100 rounded text-xs overflow-auto",style:{maxHeight:"300px"},children:JSON.stringify(t,null,2)})]})})]}):l.jsx("div",{className:"text-center text-gray-500 p-10",children:"Select a log entry to view details"})})]})]})]})}function HI(){const{eventState:n,resetEventState:e}=ot(),{user:t}=Gt(),[i,o]=R.useState([]),[c,d]=R.useState({open:{active:!1,phase:null,teams:0},women:{active:!1,phase:null,teams:0}}),[f,m]=R.useState(null),[g,_]=R.useState({name:"",email:"",role:"selector",isActive:!0}),[w,v]=R.useState(!1),[N,E]=R.useState({firstName:"",lastName:"",email:"",role:"selector",password:"password"});R.useEffect(()=>{const V=JSON.parse(localStorage.getItem("sailing_nationals_users")||"[]");o(V);const b=localStorage.getItem("sailing_nationals_event_state");if(b){const x=JSON.parse(b);d({open:{active:x.selectionType==="open",phase:x.selectionType==="open"?x.phase:null,teams:x.selectionType==="open"?x.teams.length:0},women:{active:x.selectionType==="women",phase:x.selectionType==="women"?x.phase:null,teams:x.selectionType==="women"?x.teams.length:0}})}},[]);const L=V=>{const{name:b,value:x,type:k,checked:A}=V.target;_({...g,[b]:k==="checkbox"?A:x})},P=()=>{try{if(!N.firstName||!N.lastName||!N.email){alert("Please fill out all required fields");return}const V={id:`user_${Date.now()}`,name:`${N.firstName} ${N.lastName}`,email:N.email,password:N.password,role:N.role,isActive:!0,votingHistory:{}},b=[...i,V];localStorage.setItem("sailing_nationals_users",JSON.stringify(b)),o(b),E({firstName:"",lastName:"",email:"",role:"selector",password:"password"}),v(!1),alert(`User ${V.name} has been created successfully!`)}catch(V){console.error("Error creating user:",V),alert("Failed to create user")}},S=V=>{const{name:b,value:x}=V.target;E({...N,[b]:x})},T=V=>{const b=i.map(x=>x.id===V?{...x,...g}:x);localStorage.setItem("sailing_nationals_users",JSON.stringify(b)),o(b),m(null)},C=V=>{if(window.confirm(`Are you sure you want to reset this user's password to "password"?`)){const b=i.map(x=>x.id===V?{...x,password:"password"}:x);localStorage.setItem("sailing_nationals_users",JSON.stringify(b)),o(b),alert('Password has been reset to "password".')}},D=V=>{_({name:V.name,email:V.email,role:V.role,isActive:V.isActive}),m(V.id)},z=V=>({[B.PRESELECTION]:"Preselection Phase",[B.ROUND1_AQ]:"Round 1 - AQ Selection",[B.ROUND1_LOCK]:"Round 1 - Lock Voting",[B.ROUND1_FINALIZED]:"Round 1 Complete",[B.ROUND_LEFTOVER]:"Leftover Voting",[B.ROUND_RANKING]:"Team Ranking",[B.ROUND_FINALIZED]:"Round Complete",[B.SEEDING]:"Championship Seeding",[B.COMPLETED]:"Process Completed"})[V]||"Unknown Phase";return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Admin Dashboard"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Welcome to the Sailing Nationals Selection System administration panel."}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h3",{className:"text-lg font-medium mb-3",children:"Selection Process Status"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-4 rounded-lg border ${c.open.active?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h4",{className:"font-medium",children:"Open Selection Process"}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.open.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.open.active?"Active":"Inactive"})]}),c.open.active?l.jsxs("div",{className:"text-sm",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Current Phase:"})," ",z(c.open.phase)]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Teams Loaded:"})," ",c.open.teams]})]}):l.jsx("p",{className:"text-sm text-gray-600",children:"No active Open selection process."})]}),l.jsxs("div",{className:`p-4 rounded-lg border ${c.women.active?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h4",{className:"font-medium",children:"Women's Selection Process"}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.women.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:c.women.active?"Active":"Inactive"})]}),c.women.active?l.jsxs("div",{className:"text-sm",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Current Phase:"})," ",z(c.women.phase)]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Teams Loaded:"})," ",c.women.teams]})]}):l.jsx("p",{className:"text-sm text-gray-600",children:"No active Women's selection process."})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-medium",children:"User Management"}),l.jsx("button",{onClick:()=>v(!w),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:w?"Cancel":"Add New User"})]}),w&&l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Create New User"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),l.jsx("input",{type:"text",name:"firstName",value:N.firstName,onChange:S,className:"w-full p-2 border rounded",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),l.jsx("input",{type:"text",name:"lastName",value:N.lastName,onChange:S,className:"w-full p-2 border rounded",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:N.email,onChange:S,className:"w-full p-2 border rounded",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),l.jsxs("select",{name:"role",value:N.role,onChange:S,className:"w-full p-2 border rounded",children:[l.jsx("option",{value:"selector",children:"Selector"}),l.jsx("option",{value:"parliamentarian",children:"Parliamentarian"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",name:"password",value:N.password,onChange:S,className:"w-full p-2 border rounded",placeholder:"Default: password"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave as "password" or set a custom one'})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create User"})})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"border rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(V=>l.jsx("tr",{children:f===V.id?l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("input",{type:"text",name:"name",value:g.name,onChange:L,className:"border rounded px-2 py-1 w-full"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("input",{type:"email",name:"email",value:g.email,onChange:L,className:"border rounded px-2 py-1 w-full"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("select",{name:"role",value:g.role,onChange:L,className:"border rounded px-2 py-1",children:[l.jsx("option",{value:"selector",children:"Selector"}),l.jsx("option",{value:"parliamentarian",children:"Parliamentarian"}),l.jsx("option",{value:"admin",children:"Admin"})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("label",{className:"inline-flex items-center",children:[l.jsx("input",{type:"checkbox",name:"isActive",checked:g.isActive,onChange:L,className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"ml-2 text-sm",children:"Active"})]})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[l.jsx("button",{onClick:()=>T(V.id),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Save"}),l.jsx("button",{onClick:()=>m(null),className:"text-gray-600 hover:text-gray-900",children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"font-medium text-gray-900",children:V.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-gray-500",children:V.email})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${V.role==="admin"?"bg-red-100 text-red-800":V.role==="parliamentarian"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:V.role.charAt(0).toUpperCase()+V.role.slice(1)})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${V.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:V.isActive?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[l.jsx("button",{onClick:()=>D(V),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>C(V.id),className:"text-yellow-600 hover:text-yellow-900",children:"Reset Password"})]})]})},V.id))})]})}),l.jsx("div",{children:l.jsx(BI,{})})]})]})})}function qI(){return l.jsx(yI,{children:l.jsxs(xI,{children:[l.jsx(Uw,{children:l.jsxs(pw,{children:[l.jsx(Kr,{path:"/login",element:l.jsx(NI,{})}),l.jsx(Kr,{path:"/register",element:l.jsx(SI,{})})," ",l.jsx(Kr,{path:"/selector",element:l.jsx(ed,{allowedRoles:["selector"],children:l.jsx(td,{children:l.jsx(II,{})})})}),l.jsx(Kr,{path:"/parliamentarian",element:l.jsx(ed,{allowedRoles:["parliamentarian"],children:l.jsx(td,{children:l.jsx(WI,{})})})}),l.jsx(Kr,{path:"/admin",element:l.jsx(ed,{allowedRoles:["admin"],children:l.jsx(td,{children:l.jsx(HI,{})})})}),l.jsx(Kr,{path:"/",element:l.jsx(rd,{to:"/login",replace:!0})})]})}),l.jsx($I,{})]})})}k0.createRoot(document.getElementById("root")).render(l.jsx(R.StrictMode,{children:l.jsx(qI,{})}));
